
egret 和 wx 通过 platform 文件来实现api调用。  所以逻辑有egret写。调用wx的api可以在直接egret也可以在wx开发中写。
开放域在opendata中index.js中写。



微信小游戏：
什么是 DOM？
DOM 是 W3C（万维网联盟）的标准。

DOM 定义了访问 HTML 和 XML 文档的标准：

“W3C 文档对象模型 （DOM） 是中立于平台和语言的接口，它允许程序和脚本动态地访问和更新文档的内容、结构和样式。”
W3C DOM 标准被分为 3 个不同的部分：

核心 DOM - 针对任何结构化文档的标准模型
XML DOM - 针对 XML 文档的标准模型
HTML DOM - 针对 HTML 文档的标准模型
编者注：DOM 是 Document Object Model（文档对象模型）的缩写。

但是小游戏不支持这个DOM。




打包发布的默认入口类必须为Main.

文件结构:
只有两个必要文件：1.game.js 小游戏入口文件 2.game.json 配置文件

代码包大小限制: 每个小游戏允许上传的代码包总大小为4MB。

分包加载:
限制：1.整个小游戏所有分包大小不超过8M。
 	 2.单个分包/主包大小不能超过4M。

1.分包配置   game.json配置分包信息。
2.分包加载   


猜想：1.发布成小游戏后要去微信注册。2.发布后的版本在微信工具内调试，相当于换个平台。
小游戏进阶:
文件系统:
1.代码包文件:在项目目录中添加的文件。由于代码包文件大小限制，代码包文件适用于放置首次加载时需要的文件，对于内容较大或需要动态替换的文件，不推荐用添加到代码包中，推荐在小程序启动之后再用下载接口下载到本地。
访问代码包文件：代码包文件的访问方式是从项目根目录开始写文件路径。
修改代码包文件：代码包内的文件无法在运行后动态修改或删除，修改代码包文件需要重新发布版本。
2.本地文件：
本地文件指的是小程序被用户添加到手机后，会有一块独立的文件存储区域，以用户维度隔离。即同一台手机，每个微信用户不能访问到其他登录用户的文件，同一个用户不同 appId 之间的文件也不能互相访问。
本地文件的文件路径均为以下格式：

{{协议名}}://文件路径
本地临时文件
本地缓存文件
本地用户文件
用户登陆签名：小程序的一部分后台(HTTP)接口要求验证用户登录状态。开发者在调用时需提供以session_key为密钥生成的签名。其中session_key是指通过wx.login 获得的登录态。


小游戏API调用：
在Egret中可以直接调用小游戏API。
1.新增platForm.ts文件，官方有代码
2.新增platform.js文件  官方有代码
3.引入platform.js
4.调用小游戏API
5.最后只需要在你需要的地方添加方法就可了，搞定！







微信小游戏学习：creator的  但应该是通用的，白鹭讲得不清楚
http://docs.cocos.com/creator/manual/zh/publish/publish-wechatgame.html
1.小游戏环境中，资源管理是最特殊的部分，它和浏览器的不同在于下面四点：
2.小游戏的包内体积不能够超过 4mb，包含所有代码和资源，额外的资源必须通过网络请求下载。
3.对于从远程服务器下载的文件，小游戏环境没有浏览器的缓存以及过期更新机制。
4.对于小游戏包内资源，小游戏环境内并不是按需加载的，而是一次性加载所有包内资源，然后再启动页面。
不可以从远程服务器下载脚本文件。

如果缓存资源超过微信环境限制，用户需要手动清除资源，
可以在微信小游戏平台下使用 wxDownloader.cleanAllAssets() 接口来清除缓存。目前只支持一次清除所有缓存

微信小游戏为了保护其社交关系链数据，增加了 开放数据域 的概念，这是一个单独的游戏执行环境。
开放数据域中的资源、引擎、程序，都和主游戏完全隔离，
开发者只有在开放数据域中才能访问微信提供的
wx.getFriendCloudStorage() 和 wx.getGroupCloudStorage() 两个 API，用于实现一些例如排行榜的功能。



小游戏就是小程序。
小游戏渲染更牛逼。

小游戏有
1.关系链数据域：一个微信用户的关系链数据包括两部分：  关系链数据必须在开放数据域中获取
该用户好友的用户数据
该用户所在的某个群的群成员的用户数据。
2。开放数据域：
开放数据域 是一个封闭、独立的 JavaScript 作用域。要让代码运行在开放数据域，
需要在 game.json 中添加配置项 openDataContext 指定开放数据域的代码目录。
添加该配置项表示小游戏启用了开放数据域，这将会导致一些 限制。
同时还需要在该目录下创建 index.js 作为开放数据域的入口文件，其代码运行在开放数据域。

https://mp.weixin.qq.com/debug/wxagame/dev/tutorial/open-ability/open-data.html?t=2018323
主域和开放数据域中的代码不能相互 require.
主域和开放数据域的通信.
开放数据域
不能设置 sharedCanvas 的宽高
开放数据域只能调用有限的 API，
