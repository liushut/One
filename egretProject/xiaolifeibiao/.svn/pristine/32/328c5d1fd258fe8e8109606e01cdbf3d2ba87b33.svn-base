var __reflect=this&&this.__reflect||function(t,e,i){t.__class__=e,i?i.push(e):i=[e],t.__types__=t.__types__?i.concat(t.__types__):i},__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},__awaiter=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))(function(s,a){function o(t){try{h(n.next(t))}catch(e){a(e)}}function r(t){try{h(n["throw"](t))}catch(e){a(e)}}function h(t){t.done?s(t.value):new i(function(e){e(t.value)}).then(o,r)}h((n=n.apply(t,e||[])).next())})},__generator=this&&this.__generator||function(t,e){function i(t){return function(e){return n([t,e])}}function n(i){if(s)throw new TypeError("Generator is already executing.");for(;h;)try{if(s=1,a&&(o=a[2&i[0]?"return":i[0]?"throw":"next"])&&!(o=o.call(a,i[1])).done)return o;switch(a=0,o&&(i=[0,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return h.label++,{value:i[1],done:!1};case 5:h.label++,a=i[1],i=[0];continue;case 7:i=h.ops.pop(),h.trys.pop();continue;default:if(o=h.trys,!(o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){h=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){h.label=i[1];break}if(6===i[0]&&h.label<o[1]){h.label=o[1],o=i;break}if(o&&h.label<o[2]){h.label=o[2],h.ops.push(i);break}o[2]&&h.ops.pop(),h.trys.pop();continue}i=e.call(t,h)}catch(n){i=[6,n],a=0}finally{s=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}var s,a,o,r,h={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:i(0),"throw":i(1),"return":i(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r},ZJ;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.skinName=t.Util.getClassName(i)+"Skin",i}return __extends(i,e),i.prototype.onDestroy=function(){return 0},i}(eui.Component);t.ComponentBase=e,__reflect(e.prototype,"ZJ.ComponentBase",["eui.UIComponent","egret.DisplayObject"])}(ZJ||(ZJ={}));var ZJ;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e.prototype.setData=function(t){},e.prototype.show=function(){},e.prototype.onProgress=function(t,e){},e.prototype.onDestroy=function(){return t.prototype.onDestroy.call(this)},e}(t.ComponentBase);t.ViewBase=e,__reflect(e.prototype,"ZJ.ViewBase",["RES.PromiseTaskReporter"])}(ZJ||(ZJ={}));var ZJ;!function(t){var e=function(){function t(t,e,i){void 0===e&&(e=0),void 0===i&&(i=null),this.viewName="",this.layer=0,this.viewClass=null,this.viewName=t,this.layer=e,this.viewClass=i}return t}();t.UIData=e,__reflect(e.prototype,"ZJ.UIData")}(ZJ||(ZJ={}));var GameView=function(t){function e(){var e=t.call(this)||this;return e.guanji=1,e.shootN=0,e.jifenN=0,e.MING_SHU=30,e.mingshu=e.MING_SHU,e.shuzu=[],e.yuanzu=[],e.id=1,e.rota=0,e.i=0,e.weekTopScore=-1,e.friendRank=-1,e.gameRank=-1,e.skinName="GameViewSkin",e}return __extends(e,t),e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){var e=this;t.prototype.childrenCreated.call(this),ZJ.EventManager.instance.addEventListener(EventName.Test,this.restart,this),ZJ.UIManager.instance.destroyView(UIName.Loading),ModuleConfig.compile.danji?(this.yindao=ZJ.ResManager.instance.loadDragonBones("shou"),this.yindao.x=this.bgAll.width/2,this.yindao.y=this.bgAll.height/4,this.bgAll.addChild(this.yindao),this.yindao.animation.play(),this.createMain(),setTimeout(function(){e.bgAll.removeChild(e.yindao),e.createBar(),e.bgAll.addEventListener(egret.TouchEvent.TOUCH_BEGIN,e.setClick,e)},2330)):(this.initdate=ChushouDataModel.instance,this.initdate.onData11003=function(t){e.initdate.getHighestScore11008(),e.initdate.myData.battleTimes<10&&(e.yindao=ZJ.ResManager.instance.loadDragonBones("shou"),e.yindao.x=e.bgAll.width/2,e.yindao.y=e.bgAll.height/4,e.bgAll.addChild(e.yindao),e.yindao.animation.play()),e.createMain(),setTimeout(function(){e.bgAll.removeChild(e.yindao),e.createBar(),e.bgAll.addEventListener(egret.TouchEvent.TOUCH_BEGIN,e.setClick,e)},2330)},this.initdate.onData11007=function(t){ChushouDataModel.instance.getHighestScore11008()},this.initdate.onData11008=function(t){e.weekTopScore=t.weekScore},this.initdate.onData11012=function(t){0==t.result&&(e.gameRank=t.rank,e.friendRank=t.friendRank,setTimeout(function(){ZJ.AudioManager.Instance.play("jiesuantanchu",1);var t=ZJ.UIManager.instance.openView(UIName.Settle);t.setData({score:e.jifenN,friend:e.friendRank,paiming:e.gameRank,weekTop:e.weekTopScore})},1e3))})},e.prototype.createMain=function(){this.djs=ZJ.ResManager.instance.loadDragonBones("djs"),this.djs.x=this.bgAll.width/2,this.djs.y=this.bgAll.height/2,this.bgAll.addChild(this.djs),this.djs.animation.play("djs",1),this.setConfigure(),this.arrow=this.createArrow(),this.createTarget(),this.setLife(),this.setFen()},e.prototype.setClick=function(){0==this.i&&(ZJ.AudioManager.Instance.play("targetFei",1),this.rota=this.arrow.rotation,egret.Tween.removeTweens(this.arrow),this.arrowHui=this.createArrowHui(),this.arrHuiImg.addChild(this.arrowHui),this.runArrow(),this.i++)},e.prototype.createBar=function(){var t=this,e=new eui.Image;e.source="barblack_png",this.bar.addChild(e);var i=new eui.Image;i.source="barred_png",this.bar.addChild(i),this.barB=new eui.Image,this.barB.source="barblack_png",this.barB.mask=e,this.bar.addChild(this.barB),this.barR=new eui.Image,this.barR.source="barred_png",this.barR.visible=!1,this.bar.addChild(this.barR),this.barR.mask=i;var n=i.width,s=e.width;egret.Tween.get(this.barB).to({x:-(s-n)},(1-n/s)*this.time).call(function(){t.barB.visible=!1,t.barR.visible=!0,egret.Tween.get(t.barR).to({x:-n},n/s*t.time).call(function(){if(egret.Tween.removeTweens(this.barB),egret.Tween.removeTweens(this.barR),clearInterval(this.dingshi1),this.bar.removeChildren(),0==this.i)if(this.mingshu=this.mingshu-1,this.setLife(),0==this.mingshu){egret.Tween.removeTweens(this.arrow),egret.Tween.removeTweens(this.arrowHui),this.arrImg.removeChildren(),this.arrHuiImg.removeChildren(),ZJ.AudioManager.Instance.play("shibai",1);var t=ZJ.ResManager.instance.loadDragonBones("js");t.x=this.bgAll.width/2,t.y=this.bgAll.height/2,this.bgAll.addChild(t),t.animation.play("feibiao",1),this.reAnimation()}else this.mingshu>0&&this.createBar()},t)},this)},e.prototype.createTarget=function(){for(var t=this.bg.x,e=this.bg.y,i=this.bg.width,n=this.bg.height,s=(new YuanJiao).width,a=[0,1,2,3],o=[4,5,6,7],r=4,h=4,u=0;u<this.bashuliang;u++){var l=new Plate;if(l.scaleX=this.targetV,4>u){var c=Math.floor(Math.random()*r),g=a[c];a.splice(c,1),r--}else if(u>=4&&8>u){var c=Math.floor(Math.random()*h),g=o[c];o.splice(c,1),h--}this.plateW=l.width*l.scaleX;var d=this.bgAll.width-this.plateW-s-s-10,p=this.bgAll.height-this.plateW-s-s-10,f=Math.ceil(Math.random()*d+s+5),y=Math.ceil(Math.random()*p+s+5);if(0==g)l.x=f,l.y=e,l.anchorOffsetY=l.height,l.id=this.id,this.id++;else if(1==g)l.rotation=90,l.x=t,l.y=y,l.id=this.id,this.id++;else if(2==g)l.x=f,l.y=e+n,l.id=this.id,this.id++;else if(3==g)l.x=t+i,l.y=y,l.rotation=90,l.anchorOffsetY=l.height,l.id=this.id,this.id++;else if(4==g){for(var m=0;4>m;m++)this.shuzu[m].y==e&&(this.shuzu[m].x>=d/2+s?l.x=Math.ceil(Math.random()*(d/2-this.plateW)+s):l.x=Math.ceil(Math.random()*(d/2-this.plateW)+s+d/2+this.plateW));l.y=e,l.anchorOffsetY=l.height,l.id=this.id,this.id++}else if(5==g){for(var m=0;4>m;m++)this.shuzu[m].x==t&&(this.shuzu[m].y>=p/2+s?l.y=Math.ceil(Math.random()*(p/2-this.plateW)+s):l.y=Math.ceil(Math.random()*(p/2-this.plateW)+s+p/2+this.plateW));l.rotation=90,l.x=t,l.id=this.id,this.id++}else if(6==g){for(var m=0;4>m;m++)this.shuzu[m].y==e+n&&(this.shuzu[m].x>=(i-this.plateW)/2+t?l.x=Math.ceil(Math.random()*(d/2-this.plateW)+s):l.x=Math.ceil(Math.random()*(d/2-this.plateW)+s+d/2+this.plateW));l.y=e+n,l.id=this.id,this.id++}else if(7==g){for(var m=0;4>m;m++)this.shuzu[m].x==t+i&&(this.shuzu[m].y>=p/2+s?l.y=Math.ceil(Math.random()*(p/2-this.plateW)+s):l.y=Math.ceil(Math.random()*(p/2-this.plateW)+s+p/2+this.plateW));l.x=t+i,l.rotation=90,l.anchorOffsetY=l.height,l.id=this.id,this.id++}this.tarImg.addChild(l),this.shuzu.push(l)}},e.prototype.createArrow=function(){var t=new Arrow;return t.x=this.bgAll.width/2,t.y=this.bgAll.height/2,t.anchorOffsetX=t.width/2,t.anchorOffsetY=t.height-18,t.rotation=this.rota,egret.Tween.get(t,{loop:!0}).to({rotation:this.rota+this.arrowR},this.arrowV),this.arrImg.addChild(t),t},e.prototype.createArrowHui=function(){var t=new ArrowHui;return t.x=this.bgAll.width/2,t.y=this.bgAll.height/2,t.anchorOffsetX=t.width/2,t.anchorOffsetY=t.height-18,t.rotation=this.rota,egret.Tween.get(t,{loop:!0}).to({rotation:this.rota+this.arrowR},this.arrowV),this.arrImg.addChild(t),t},e.prototype.runArrow=function(){var t=this,e=this.arrow.x,i=this.arrow.y,n=this.arrow.height,s=this.bg.x,a=this.bg.y,o=this.bg.width,r=this.bg.height,h=this.arrow.rotation,u=(new YuanJiao).width,l=(180*Math.atan((o/2-u+s)/(r/2))/Math.PI,180*Math.atan(this.bgAll.width/2/(this.bgAll.height/2))/Math.PI),c=0,g=0,d=0,p=0,f=0,y=0,m=0,v=Math.abs(h-90),b=Math.abs(v*Math.PI/180);c=Math.abs(Math.tan(b));var w=Math.abs(Math.cos(b))*(n-18),A=Math.abs(Math.sin(b))*(n-18);this.bgAll.width-u-u,this.bgAll.height-u-u;h>-180&&-90>h&&(c=-c),h>0&&90>h&&(c=-c),g=i-c*e,h>-l&&l>=h?(p=a,d=(p-g)/c,y=p+A,f=(y-g)/c,(u>d||d>this.bgAll.width-u)&&(u>d?(f=this.getPoint(c,g,u,u,0),y=c*f+g):(f=this.getPoint(c,g,this.bgAll.width-u,u,1),y=c*f+g),y+=A,f=(y-g)/c)):h>l&&180-l>=h?(d=s+o,p=c*d+g,f=d-w,y=c*f+g,(u>p||p>this.bgAll.height-u)&&(u>p?(f=this.getPoint(c,g,this.bgAll.width-u,u,1),y=c*f+g):(f=this.getPoint(c,g,this.bgAll.width-u,this.bgAll.height-u,1),y=c*f+g),f-=w,y=c*f+g)):h>180-l&&180>=h?(p=a+r,d=(p-g)/c,y=p-A,f=(y-g)/c,d>this.bgAll.width-u&&(f=this.getPoint(c,g,this.bgAll.width-u,this.bgAll.height-u,1),y=c*f+g,y-=A,f=(y-g)/c)):h>-180&&-180+l>=h?(p=a+r,d=(p-g)/c,y=p-A,f=(y-g)/c,u>d&&(f=this.getPoint(c,g,u,this.bgAll.height-u,0),y=c*f+g,y-=A,f=(y-g)/c)):h>-180+l&&-l>=h&&(d=s,p=c*d+g,f=d+w,y=c*f+g,(u>p||p>this.bgAll.height-u)&&(u>p?(f=this.getPoint(c,g,u,u,0),y=c*f+g):(f=this.getPoint(c,g,u,this.bgAll.height-u,0),y=c*f+g),f+=w,y=c*f+g)),this.k=c,this.arrX=d,this.arrY=p,m=Math.sqrt((f-e)*(f-e)+(y-i)*(y-i)),egret.Tween.get(this.arrow).to({x:f,y:y},m).call(function(){t.mingshu--,t.shootTarget(),egret.Tween.get(t.arrow).to({alpha:0},100).call(function(){if(t.setLife(),t.setFen(),ModuleConfig.compile.danji||t.initdate.sendScoredData11011({score:t.jifenN,resultData:""}),egret.Tween.removeTweens(t.barB),egret.Tween.removeTweens(t.barR),clearInterval(t.dingshi1),t.bar.removeChildren(),0==t.mingshu){egret.Tween.removeAllTweens(),t.arrImg.removeChildren(),t.arrHuiImg.removeChildren(),ZJ.AudioManager.Instance.play("shibai",1);var e=ZJ.ResManager.instance.loadDragonBones("js");e.x=f,e.y=y,t.bgAll.addChild(e),e.animation.play("feibiao",1),t.reAnimation()}else egret.Tween.removeTweens(t.arrow),egret.Tween.removeTweens(t.arrowHui),t.arrImg.removeChildren(),t.rota=t.arrowHui.rotation,t.arrHuiImg.removeChildren(),t.bashuliang!=t.shootN&&(t.arrow=t.createArrow(),t.createBar()),t.bashuliang==t.shootN&&(egret.Tween.removeAllTweens(),t.tarImg.removeChildren(),t.yuanImg.removeChildren(),t.shuzu.splice(0,t.shuzu.length),t.yuanzu.splice(0,t.yuanzu.length),t.id=1,t.guanji++,t.createBar(),t.setConfigure(),t.shootN=0,t.arrow=t.createArrow(),setTimeout(function(){t.createTarget(),t.guanji==t.plateRguan&&(clearInterval(t.dingshi),t.runTarget())},300)),t.i=0},t)},this)},e.prototype.setMask=function(){var t=(new YuanJiao).width,e=new egret.Shape;return e.x=t,e.y=t,e.graphics.beginFill(16777215),e.graphics.drawRect(0,0,t,t),e.graphics.endFill(),e.anchorOffsetX=t,e.anchorOffsetY=t,e.rotation=90-this.jd,e},e.prototype.runTarget=function(){var t=this,e=this.bg.x,i=this.bg.y,n=this.bg.width,s=this.bg.height,a=(new YuanJiao).width,o=(new YuanJiao).height,r=((new Plate).height,(new Plate).width,2*Math.PI*o/4);this.jd=Math.floor(this.plateW/r*90);var h=(90-this.jd)*Math.PI/180;Math.tan(h)*a;this.dingshi=setInterval(function(){for(var h=0;h<t.shuzu.length;h++)t.shuzu[h].y==i&&0==t.shuzu[h].rotation?t.shuzu[h].x==a-t.plateW?(egret.Tween.removeTweens(t.shuzu[h]),egret.Tween.get(t.shuzu[h]).to({x:a},t.plateW*t.targetS).call(function(){for(var t=0;t<this.shuzu.length;t++)if(this.shuzu[t].x==a&&this.shuzu[t].y==i&&0==this.shuzu[t].rotation)for(var e=0;e<this.yuanzu.length;e++)this.yuanzu[e].id==this.shuzu[t].id&&this.yuanzu[e].x==a&&this.yuanzu[e].y==a&&this.yuanzu[e].rotation>0&&"2"==this.yuanzu[e].name&&0!=this.mingshu&&this.bashuliang!=this.shootN&&(egret.Tween.removeTweens(this.yuanzu[e]),this.yuanzu[e].parent.removeChild(this.yuanzu[e]),this.yuanzu.splice(e,1))},t)):t.shuzu[h].x>=a&&"1"!=t.shuzu[h].name&&t.shuzu[h].x<t.bgAll.width-a-t.plateW&&(t.shuzu[h].name="1",egret.Tween.removeTweens(t.shuzu[h]),egret.Tween.get(t.shuzu[h]).to({x:t.bgAll.width-a-t.plateW},(t.bgAll.width-a-t.plateW-t.shuzu[h].x)*t.targetS).call(function(){for(var t=0;t<this.shuzu.length;t++)if(this.shuzu[t].x==this.bgAll.width-a-this.plateW&&this.shuzu[t].y==i&&0==this.shuzu[t].rotation)var s=this.shuzu[t].id;var h=new YuanJiao;if(h.x=this.bgAll.width-a,h.y=o,h.anchorOffsetX=a,h.anchorOffsetY=a,h.id=s,h.name="1",this.plateW<r){var u=this.setMask();h.addChild(u)}h.mask=u,this.yuanzu.push(h),this.yuanImg.addChild(h),egret.Tween.get(h).to({rotation:90},2*a*Math.PI/4*this.targetS).call(function(){for(var t=0;t<this.yuanzu.length;t++)if(this.yuanzu[t].id==s&&this.yuanzu[t].x==this.bgAll.width-a&&this.yuanzu[t].y==a&&90==this.yuanzu[t].rotation&&"1"==this.yuanzu[t].name&&0!=this.mingshu&&this.bashuliang!=this.shootN){var i=new Plate;i.x=e+n,i.y=a-this.plateW,i.scaleX=this.targetV,i.rotation=90,i.anchorOffsetY=i.height,i.id=this.yuanzu[t].id,this.shuzu.push(i),this.tarImg.addChild(i),this.plateW<r&&(egret.Tween.removeTweens(this.yuanzu[t]),egret.Tween.get(this.yuanzu[t]).to({rotation:180},2*a*Math.PI/4*this.targetS))}},this)},t).to({x:t.bgAll.width-a},t.plateW*t.targetS).call(function(){for(var t=0;t<this.shuzu.length;t++)if(this.shuzu[t].x==this.bgAll.width-a&&this.shuzu[t].y==i&&0==this.shuzu[t].rotation){var e=this.shuzu[t].id;if(egret.Tween.removeTweens(this.shuzu[t]),this.shuzu[t].parent.removeChild(this.shuzu[t]),this.shuzu.splice(t,1),this.plateW>=r)for(var n=0;n<this.yuanzu.length;n++)this.yuanzu[n].id==e&&this.yuanzu[n].x==this.bgAll.width-a&&this.yuanzu[n].y==a&&90==this.yuanzu[n].rotation&&"1"==this.yuanzu[n].name&&(egret.Tween.removeTweens(this.yuanzu[n]),egret.Tween.get(this.yuanzu[n]).to({rotation:180},2*a*Math.PI/4*this.targetS))}},t)):t.shuzu[h].x==e&&90==t.shuzu[h].rotation?t.shuzu[h].y==t.bgAll.height-a?(egret.Tween.removeTweens(t.shuzu[h]),egret.Tween.get(t.shuzu[h]).to({y:t.bgAll.height-a-t.plateW},t.plateW*t.targetS).call(function(){for(var t=0;t<this.shuzu.length;t++)if(this.shuzu[t].y==this.bgAll.height-a-this.plateW&&this.shuzu[t].x==e&&90==this.shuzu[t].rotation)for(var i=0;i<this.yuanzu.length;i++)this.yuanzu[i].id==this.shuzu[t].id&&this.yuanzu[i].x==a&&this.yuanzu[i].y==this.bgAll.height-a&&this.yuanzu[i].rotation>-90&&"3"==this.yuanzu[i].name&&0!=this.mingshu&&this.bashuliang!=this.shootN&&(egret.Tween.removeTweens(this.yuanzu[i]),this.yuanzu[i].parent.removeChild(this.yuanzu[i]),this.yuanzu.splice(i,1))},t)):t.shuzu[h].y<=t.bgAll.height-a-t.plateW&&"1"!=t.shuzu[h].name&&t.shuzu[h].y>a&&(t.shuzu[h].name="1",egret.Tween.removeTweens(t.shuzu[h]),egret.Tween.get(t.shuzu[h]).to({y:a},(t.shuzu[h].y-a)*t.targetS).call(function(){for(var t=0;t<this.shuzu.length;t++)if(this.shuzu[t].y==a&&this.shuzu[t].x==e&&90==this.shuzu[t].rotation)var n=this.shuzu[t].id;var s=new YuanJiao;if(s.x=a,s.y=a,s.anchorOffsetX=a,s.anchorOffsetY=a,s.rotation=-90,s.id=n,s.name="2",this.plateW<r){var o=this.setMask();s.addChild(o)}s.mask=o,this.yuanzu.push(s),this.yuanImg.addChild(s),egret.Tween.get(s).to({rotation:0},2*a*Math.PI/4*this.targetS).call(function(){for(var t=0;t<this.yuanzu.length;t++)if(this.yuanzu[t].id==n&&this.yuanzu[t].x==a&&this.yuanzu[t].y==a&&0==this.yuanzu[t].rotation&&"2"==this.yuanzu[t].name&&0!=this.mingshu&&this.bashuliang!=this.shootN){var e=new Plate;e.x=a-this.plateW,e.y=i,e.scaleX=this.targetV,e.anchorOffsetY=e.height,e.id=this.yuanzu[t].id,this.shuzu.push(e),this.tarImg.addChild(e),this.plateW<r&&(egret.Tween.removeTweens(this.yuanzu[t]),egret.Tween.get(this.yuanzu[t]).to({rotation:90},2*a*Math.PI/4*this.targetS))}},this)},t).to({y:a-t.plateW},t.plateW*t.targetS).call(function(){for(var t=0;t<this.shuzu.length;t++)if(this.shuzu[t].y==a-this.plateW&&this.shuzu[t].x==e&&90==this.shuzu[t].rotation){var i=this.shuzu[t].id;if(egret.Tween.removeTweens(this.shuzu[t]),this.shuzu[t].parent.removeChild(this.shuzu[t]),this.shuzu.splice(t,1),this.plateW>=r)for(var n=0;n<this.yuanzu.length;n++)this.yuanzu[n].id==i&&this.yuanzu[n].x==a&&this.yuanzu[n].y==a&&0==this.yuanzu[n].rotation&&"2"==this.yuanzu[n].name&&(egret.Tween.removeTweens(this.yuanzu[n]),egret.Tween.get(this.yuanzu[n]).to({rotation:90},2*a*Math.PI/4*this.targetS))}},t)):t.shuzu[h].y==i+s&&0==t.shuzu[h].rotation?t.shuzu[h].x==t.bgAll.width-a?(egret.Tween.removeTweens(t.shuzu[h]),egret.Tween.get(t.shuzu[h]).to({x:t.bgAll.width-a-t.plateW},t.plateW*t.targetS).call(function(){for(var t=0;t<this.shuzu.length;t++)if(this.shuzu[t].x==this.bgAll.width-a-this.plateW&&this.shuzu[t].y==i+s&&0==this.shuzu[t].rotation)for(var e=0;e<this.yuanzu.length;e++)this.yuanzu[e].id==this.shuzu[t].id&&this.yuanzu[e].x==this.bgAll.width-a&&this.yuanzu[e].y==this.bgAll.height-a&&this.yuanzu[e].rotation<=-90&&this.yuanzu[e].rotation>-180&&"4"==this.yuanzu[e].name&&0!=this.mingshu&&this.bashuliang!=this.shootN&&(egret.Tween.removeTweens(this.yuanzu[e]),this.yuanzu[e].parent.removeChild(this.yuanzu[e]),this.yuanzu.splice(e,1))},t)):t.shuzu[h].x<=t.bgAll.width-a-t.plateW&&"1"!=t.shuzu[h].name&&t.shuzu[h].x>a&&(t.shuzu[h].name="1",egret.Tween.removeTweens(t.shuzu[h]),egret.Tween.get(t.shuzu[h]).to({x:a},(t.shuzu[h].x-a)*t.targetS).call(function(){for(var t=0;t<this.shuzu.length;t++)if(this.shuzu[t].x==a&&this.shuzu[t].y==i+s&&0==this.shuzu[t].rotation)var n=this.shuzu[t].id;var o=new YuanJiao;if(o.x=a,o.y=this.bgAll.height-a,o.anchorOffsetX=a,o.anchorOffsetY=a,o.rotation=180,o.id=n,o.name="3",this.plateW<r){var h=this.setMask();o.addChild(h)}o.mask=h,this.yuanzu.push(o),this.yuanImg.addChild(o),egret.Tween.get(o).to({rotation:270},2*a*Math.PI/4*this.targetS).call(function(){for(var t=0;t<this.yuanzu.length;t++)if(this.yuanzu[t].id==n&&this.yuanzu[t].x==a&&this.yuanzu[t].y==this.bgAll.height-a&&-90==this.yuanzu[t].rotation&&"3"==this.yuanzu[t].name&&0!=this.mingshu&&this.bashuliang!=this.shootN){var i=new Plate;i.x=e,i.y=this.bgAll.height-a,i.scaleX=this.targetV,i.rotation=90,i.id=this.yuanzu[t].id,this.shuzu.push(i),this.tarImg.addChild(i),this.plateW<r&&(egret.Tween.removeTweens(this.yuanzu[t]),egret.Tween.get(this.yuanzu[t]).to({rotation:0},2*a*Math.PI/4*this.targetS))}},this)},t).to({x:a-t.plateW},t.plateW*t.targetS).call(function(){for(var t=0;t<this.shuzu.length;t++)if(this.shuzu[t].x==a-this.plateW&&this.shuzu[t].y==i+s&&0==this.shuzu[t].rotation){var e=this.shuzu[t].id;if(egret.Tween.removeTweens(this.shuzu[t]),this.shuzu[t].parent.removeChild(this.shuzu[t]),this.shuzu.splice(t,1),this.plateW>=r)for(var n=0;n<this.yuanzu.length;n++)this.yuanzu[n].id==e&&this.yuanzu[n].x==a&&this.yuanzu[n].y==this.bgAll.height-a&&-90==this.yuanzu[n].rotation&&"3"==this.yuanzu[n].name&&(egret.Tween.removeTweens(this.yuanzu[n]),egret.Tween.get(this.yuanzu[n]).to({rotation:0},2*a*Math.PI/4*this.targetS))}},t)):t.shuzu[h].x==e+n&&90==t.shuzu[h].rotation&&(t.shuzu[h].y==a-t.plateW?(egret.Tween.removeTweens(t.shuzu[h]),egret.Tween.get(t.shuzu[h]).to({y:a},t.plateW*t.targetS).call(function(){for(var t=0;t<this.shuzu.length;t++)if(this.shuzu[t].y==a&&this.shuzu[t].x==e+n&&90==this.shuzu[t].rotation)for(var i=0;i<this.yuanzu.length;i++)this.yuanzu[i].id==this.shuzu[t].id&&this.yuanzu[i].x==this.bgAll.width-a&&this.yuanzu[i].y==a&&this.yuanzu[i].rotation>90&&"1"==this.yuanzu[i].name&&0!=this.mingshu&&this.bashuliang!=this.shootN&&(egret.Tween.removeTweens(this.yuanzu[i]),this.yuanzu[i].parent.removeChild(this.yuanzu[i]),this.yuanzu.splice(i,1))},t)):t.shuzu[h].y>=a&&"1"!=t.shuzu[h].name&&t.shuzu[h].y<t.bgAll.height-a-t.plateW&&(t.shuzu[h].name="1",egret.Tween.removeTweens(t.shuzu[h]),egret.Tween.get(t.shuzu[h]).to({y:t.bgAll.height-a-t.plateW},(t.bgAll.height-a-t.plateW-t.shuzu[h].y)*t.targetS).call(function(){for(var t=0;t<this.shuzu.length;t++)if(this.shuzu[t].y==this.bgAll.height-a-this.plateW&&this.shuzu[t].x==e+n&&90==this.shuzu[t].rotation)var o=this.shuzu[t].id;var h=new YuanJiao;if(h.x=this.bgAll.width-a,h.y=this.bgAll.height-a,h.anchorOffsetX=a,h.anchorOffsetY=a,h.rotation=90,h.id=o,h.name="4",this.plateW<r){var u=this.setMask();h.addChild(u)}h.mask=u,this.yuanzu.push(h),this.yuanImg.addChild(h),egret.Tween.get(h).to({rotation:180},2*a*Math.PI/4*this.targetS).call(function(){for(var t=0;t<this.yuanzu.length;t++)if(this.yuanzu[t].id==o&&this.yuanzu[t].x==this.bgAll.width-a&&this.yuanzu[t].y==this.bgAll.height-a&&180==this.yuanzu[t].rotation&&"4"==this.yuanzu[t].name&&0!=this.mingshu&&this.bashuliang!=this.shootN){var e=new Plate;e.x=this.bgAll.width-a,e.y=i+s,e.scaleX=this.targetV,e.id=this.yuanzu[t].id,this.shuzu.push(e),this.tarImg.addChild(e),this.plateW<r&&(egret.Tween.removeTweens(this.yuanzu[t]),egret.Tween.get(this.yuanzu[t]).to({rotation:270},2*a*Math.PI/4*this.targetS))}},this)},t).to({y:t.bgAll.height-a},t.plateW*t.targetS).call(function(){for(var t=0;t<this.shuzu.length;t++)if(this.shuzu[t].y==this.bgAll.height-a&&this.shuzu[t].x==e+n&&90==this.shuzu[t].rotation){var i=this.shuzu[t].id;if(egret.Tween.removeTweens(this.shuzu[t]),this.shuzu[t].parent.removeChild(this.shuzu[t]),this.shuzu.splice(t,1),this.plateW>=r)for(var s=0;s<this.yuanzu.length;s++)this.yuanzu[s].id==i&&this.yuanzu[s].x==this.bgAll.width-a&&this.yuanzu[s].y==this.bgAll.height-a&&180==this.yuanzu[s].rotation&&"4"==this.yuanzu[s].name&&(egret.Tween.removeTweens(this.yuanzu[s]),egret.Tween.get(this.yuanzu[s]).to({rotation:270},2*a*Math.PI/4*this.targetS))}},t)))},this.targetS)},e.prototype.countJifen=function(t,e,i){t>=e+.3*(i-e)&&e+.7*(i-e)>=t&&(t>=e+.45*(i-e)&&e+.55*(i-e)>=t?this.jifenN=this.jifenN+2:this.jifenN=this.jifenN+1)},e.prototype.addImg=function(t,e,i){var n=this,s=45;(new YuanJiao).width;t==this.bg.x?t+=125:t==this.bgAll.width-this.bg.x?t-=25:e==this.bg.y?e+=s:e==this.bgAll.height-this.bg.y&&(e-=s),this.addFen.anchorOffsetX=this.addFen.width/2,this.addFen.anchorOffsetY=this.addFen.height/2,this.addFen.x=t,this.addFen.y=e,this.defen.text=i.toString(),this.addFen.visible=!0,setTimeout(function(){n.addFen.visible=!1},300)},e.prototype.shootTarget=function(){var t=this.bg.x,e=this.bg.y,i=this.bg.width,n=(this.bg.height,null),s=null,a=(new YuanJiao).height,o=a-e,r=this.jifenN;if(this.arrX>=a&&this.arrX<=this.bgAll.width-a||this.arrY>=a&&this.arrY<=this.bgAll.height-a)for(var h=0;h<this.shuzu.length;h++){var u=ZJ.ResManager.instance.loadDragonBones("hk");this.arrX>=this.shuzu[h].x&&this.arrX<=this.shuzu[h].x+this.plateW&&this.arrY==this.shuzu[h].y?(n=this.shuzu[h].id,egret.Tween.removeTweens(this.shuzu[h]),this.shuzu[h].parent.removeChild(this.shuzu[h]),u.x=this.shuzu[h].x+this.plateW/2,u.y=this.shuzu[h].y,this.bgAll.addChild(u),u.animation.play("guidao",1),ZJ.AudioManager.Instance.play("mingzhongbazi",1),this.arrX>=this.shuzu[h].x+.3*this.plateW&&this.arrX<=this.shuzu[h].x+.7*this.plateW?this.arrX>=this.shuzu[h].x+.45*this.plateW&&this.arrX<=this.shuzu[h].x+.55*this.plateW?this.jifenN=this.jifenN+3:this.jifenN=this.jifenN+2:this.jifenN++,this.addImg(u.x,u.y,this.jifenN-r),this.shuzu.splice(h,1),this.mingshu++,this.shootN=this.shootN+1):this.arrY>=this.shuzu[h].y&&this.arrY<=this.shuzu[h].y+this.plateW&&this.arrX==this.shuzu[h].x&&(n=this.shuzu[h].id,egret.Tween.removeTweens(this.shuzu[h]),this.shuzu[h].parent.removeChild(this.shuzu[h]),u.x=this.shuzu[h].x,u.y=this.shuzu[h].y+this.plateW/2,this.bgAll.addChild(u),u.animation.play("guidao",1),ZJ.AudioManager.Instance.play("mingzhongbazi",1),this.arrY>=this.shuzu[h].y+.3*this.plateW&&this.arrY<=this.shuzu[h].y+.7*this.plateW?this.arrY>=this.shuzu[h].y+.45*this.plateW&&this.arrY<=this.shuzu[h].y+.55*this.plateW?this.jifenN=this.jifenN+3:this.jifenN=this.jifenN+2:this.jifenN++,this.addImg(u.x,u.y,this.jifenN-r),this.shuzu.splice(h,1),this.mingshu++,this.shootN=this.shootN+1)}else for(var l=this.bgAll.width/2,c=this.bgAll.height/2,g=(e-c)/(a-l),d=(a-c)/(t-l),p=(e-c)/(this.bgAll.width-a-l),f=(a-c)/(this.bgAll.width-t-l),y=(this.bgAll.height-a-c)/(this.bgAll.width-t-l),m=(this.bgAll.height-t-c)/(this.bgAll.width-a-l),v=(this.bgAll.height-a-c)/(t-l),b=(this.bgAll.height-t-c)/(a-l),w=2*Math.PI*a/4,A=!1,_=0;_<this.yuanzu.length;_++){s=Math.abs(this.yuanzu[_].rotation)>90?180-Math.abs(this.yuanzu[_].rotation):Math.abs(this.yuanzu[_].rotation);var C=Math.abs(s*Math.PI/180),M=Math.abs(Math.cos(C))*o,I=Math.abs(Math.sin(C))*o;if(Math.abs(this.arrow.rotation)<90){if(this.yuanzu[_].x<i/2&&this.yuanzu[_].y<i/2){if(this.yuanzu[_].rotation<=0&&this.yuanzu[_].rotation>=-90){var T=a-M,S=a-I,D=(T-c)/(S-l);if(this.plateW<w&&this.yuanzu[_].rotation>this.jd-90&&this.yuanzu[_].rotation<0){var E=Math.abs((s+this.jd)*Math.PI/180),z=Math.abs(Math.cos(E))*o,R=Math.abs(Math.sin(E))*o,x=a-z,k=a-R;d=(x-c)/(k-l),this.countJifen(this.k,d,D)}this.k>=d&&this.k<=D&&(A=!0,-90==this.yuanzu[_].rotation&&this.countJifen(this.k,d,g))}else if(this.yuanzu[_].rotation>0&&this.yuanzu[_].rotation<=90){if(this.plateW<w){var E=Math.abs((s+(90-this.jd))*Math.PI/180);M=Math.abs(Math.cos(E))*o,I=Math.abs(Math.sin(E))*o}var T=a-I,S=a-M,D=(T-c)/(S-l);this.k>=D&&this.k<=g&&(A=!0)}}else if(this.yuanzu[_].x>i/2&&this.yuanzu[_].y<i/2)if(this.yuanzu[_].rotation>=0&&this.yuanzu[_].rotation<=90){var T=a-M,S=this.bgAll.width-a+I,D=(T-c)/(S-l);if(this.plateW<w&&this.yuanzu[_].rotation>this.jd&&this.yuanzu[_].rotation<90){var E=Math.abs((s-this.jd)*Math.PI/180),z=Math.abs(Math.cos(E))*o,R=Math.abs(Math.sin(E))*o,x=a-z,k=this.bgAll.width-a+R;p=(x-c)/(k-l),this.countJifen(this.k,p,D)}this.k>=p&&this.k<=D&&(A=!0,90==this.yuanzu[_].rotation&&this.countJifen(this.k,p,f))}else if(this.yuanzu[_].rotation>90&&this.yuanzu[_].rotation<=180){if(this.plateW<w){var E=Math.abs((s-(90-this.jd))*Math.PI/180);M=Math.abs(Math.cos(E))*o,I=Math.abs(Math.sin(E))*o}var T=a-I,S=this.bgAll.width-a+M,D=(T-c)/(S-l);this.k>=D&&this.k<=f&&(A=!0)}}else if(this.yuanzu[_].x>i/2&&this.yuanzu[_].y>i/2)if(this.yuanzu[_].rotation>=90&&this.yuanzu[_].rotation<=180){var S=this.bgAll.width-a+I,T=this.bgAll.height-a+M,D=(T-c)/(S-l);if(this.plateW<w&&this.yuanzu[_].rotation>90+this.jd&&this.yuanzu[_]<180){var E=Math.abs((s+this.jd)*Math.PI/180),z=Math.abs(Math.cos(E))*o,R=Math.abs(Math.sin(E))*o,k=this.bgAll.width-a+R,x=this.bgAll.height-a+z;y=(x-c)/(k-l),this.countJifen(this.k,y,D)}this.k>=y&&this.k<=D&&(A=!0,180==this.yuanzu[_].rotation&&this.countJifen(this.k,y,m))}else{var S=this.bgAll.width-a+M,T=this.bgAll.height-a+I,D=(T-c)/(S-l);if(this.plateW<w){var E=Math.abs((s+(90-this.jd))*Math.PI/180);M=Math.abs(Math.cos(E))*o,I=Math.abs(Math.sin(E))*o}S=this.bgAll.width-a+M,T=this.bgAll.height-a+I,D=(T-c)/(S-l),this.k>=D&&this.k<=m&&(A=!0)}else if(this.yuanzu[_].x<i/2&&this.yuanzu[_].y>i/2)if(this.yuanzu[_].rotation<=-90&&this.yuanzu[_].rotation>=-180){var S=a-I,T=this.bgAll.height-a+M,D=(T-c)/(S-l);if(this.plateW<w&&this.yuanzu[_]>-180+this.jd&&this.yuanzu[_].rotation<-90){var E=Math.abs((s-this.jd)*Math.PI/180),z=Math.abs(Math.cos(E))*o,R=Math.abs(Math.sin(E))*o,k=a-R,x=this.bgAll.height-a+z;b=(x-c)/(k-l),this.countJifen(this.k,b,D)}this.k>=b&&this.k<=D&&(A=!0,-180==this.yuanzu[_].rotation&&this.countJifen(this.k,b,v))}else{if(this.plateW<w){var E=Math.abs((s-(90-this.jd))*Math.PI/180);M=Math.abs(Math.cos(E))*o,I=Math.abs(Math.sin(E))*o}var S=a-M,T=this.bgAll.height-a+I,D=(T-c)/(S-l);this.k>=D&&this.k<=v&&(A=!0)}if(A){n=this.yuanzu[_].id,egret.Tween.removeTweens(this.yuanzu[_]),this.yuanzu[_].parent.removeChild(this.yuanzu[_]);var u=ZJ.ResManager.instance.loadDragonBones("hk");u.x=this.yuanzu[_].x,u.y=this.yuanzu[_].y,this.bgAll.addChild(u),u.animation.play("guidao",1),ZJ.AudioManager.Instance.play("mingzhongbazi",1),this.yuanzu.splice(_,1),this.mingshu++,this.jifenN=this.jifenN+1,this.addImg(u.x,u.y,this.jifenN-r),this.shootN=this.shootN+1;break}}for(var _=0;_<this.shuzu.length;_++)this.shuzu[_].id==n&&(egret.Tween.removeTweens(this.shuzu[_]),this.shuzu[_].parent.removeChild(this.shuzu[_]),this.shuzu.splice(_,1));if(this.yuanzu.length>0)for(var _=0;_<this.yuanzu.length;_++)this.yuanzu[_].id==n&&(egret.Tween.removeTweens(this.yuanzu[_]),this.yuanzu[_].parent.removeChild(this.yuanzu[_]),this.yuanzu.splice(_,1))},e.prototype.restart=function(t){var e=this;this.bgAll.removeEventListener("touchTap",this.setClick,this),this.i=0,this.djs.animation.play("djs",1),this.dituo.visible=!0,this.guidao.visible=!0,this.guidao1.visible=!0,this.guidao2.visible=!0,this.guidao3.visible=!0,this.guidao4.visible=!0,this.jifen.visible=!0,this.bardi.visible=!0,this.life.visible=!0,this.guanji=1,this.setConfigure(),this.mingshu=this.MING_SHU,this.jifenN=0,this.shootN=0,this.id=1,ModuleConfig.compile.danji||(ChushouDataModel.instance.getHighestScore11008(),ChushouDataModel.instance.playAgain11007()),this.createMain(),setTimeout(function(){e.createBar(),e.bgAll.addEventListener("touchTap",e.setClick,e)},2330)},e.prototype.reAnimation=function(){var t=this;clearInterval(this.dingshi),this.bar.removeChildren(),this.tarImg.removeChildren(),this.yuanImg.removeChildren(),this.shuzu.splice(0,this.shuzu.length),this.yuanzu.splice(0,this.yuanzu.length),ModuleConfig.compile.danji||ChushouDataModel.instance.sendGameResult11012({winPlayerId:ChushouDataModel.instance.myData.playerId});var e=ZJ.ResManager.instance.loadDragonBones("js");e.x=this.bgAll.width/2,e.y=this.bgAll.height/2,this.bgAll.addChild(e),e.animation.play("bazi",1),this.dituo.visible=!1,this.guidao.visible=!1,this.guidao1.visible=!1,this.guidao2.visible=!1,this.guidao3.visible=!1,this.guidao4.visible=!1,this.jifen.visible=!1,this.bardi.visible=!1,this.life.visible=!1;var i=ZJ.ResManager.instance.loadDragonBones("js");i.x=this.bgAll.width/2,this.bgAll.addChild(i),i.animation.play("guidao",1);var n=ZJ.ResManager.instance.loadDragonBones("js");n.y=this.bgAll.height/2,this.bgAll.addChild(n),n.animation.play("guidao",1);var s=ZJ.ResManager.instance.loadDragonBones("js");s.x=this.bgAll.width/2,s.y=this.bgAll.height,this.bgAll.addChild(s),s.animation.play("guidao",1);var a=ZJ.ResManager.instance.loadDragonBones("js");a.x=this.bgAll.width,a.y=this.bgAll.height/2,this.bgAll.addChild(a),a.animation.play("guidao",1);for(var o=0;o<this.shuzu.length;o++){var r=ZJ.ResManager.instance.loadDragonBones("hk");this.bgAll.addChild(r),r.x=this.shuzu[o].x,r.y=this.shuzu[o].y,this.shuzu[o].y==this.bg.y||this.shuzu[o].y==this.bg.y+this.bg.height?r.x=this.shuzu[o].x+this.plateW/2:r.y=this.shuzu[o].y+this.plateW/2,r.animation.play("guidao",1)}ModuleConfig.compile.danji&&(setTimeout(function(){var e=ZJ.UIManager.instance.openView(UIName.Settle);e.setData({score:t.jifenN})},1e3),ZJ.AudioManager.Instance.play("jiesuantanchu",1))},e.prototype.setLife=function(){2==this.mingshu?this.life3.source="lifeHui_png":1==this.mingshu?this.life2.source="lifeHui_png":0==this.mingshu?this.life1.source="lifeHui_png":this.mingshu>=3&&(this.life1.source="lifeRed_png",this.life2.source="lifeRed_png",this.life3.source="lifeRed_png")},e.prototype.setFen=function(){this.jifen.text=this.jifenN.toString()},e.prototype.setConfigure=function(){for(var t=/\d+/g,e=ZJ.TableManager.instance.tables[xlsx.cfg_c_xiaoli].TARGET_NUM[xlsx.c_xiaoli_data].match(t),i=0;i<e.length;i+=2)if(this.guanji>=e[i]){if(this.guanji>=e[i+2])continue;this.bashuliang=e[i+1]}for(var n=ZJ.TableManager.instance.tables[xlsx.cfg_c_xiaoli].TARGET_MOVE_TYPE[xlsx.c_xiaoli_data].match(t),i=0;i<n.length;i+=5)if(this.guanji>=n[i]){if(this.guanji>=n[i+5])continue;
if(Math.ceil(100*Math.random())<n[i+4]){this.plateRguan=this.guanji;for(var s=ZJ.TableManager.instance.tables[xlsx.cfg_c_xiaoli].TARGET_MOVE_SPEED[xlsx.c_xiaoli_data].match(t),a=0;a<s.length;a+=3)if(this.guanji>=s[a]){if(this.guanji>=s[a+3])continue;this.targetS=Math.ceil(parseInt(s[a+1])+Math.random()*(s[a+2]-s[a+1]))}}}for(var o=ZJ.TableManager.instance.tables[xlsx.cfg_c_xiaoli].TARGET_LENGTH[xlsx.c_xiaoli_data].match(t),i=0;i<o.length;i+=3)if(this.guanji>=o[i]){if(this.guanji>=o[i+3])continue;this.targetV=Math.ceil(parseInt(o[i+1])+Math.random()*(o[i+2]-o[i+1]))}for(var r=ZJ.TableManager.instance.tables[xlsx.cfg_c_xiaoli]["DARTS_ROTATE_DIREC "][xlsx.c_xiaoli_data].match(t),i=0;i<r.length;i+=3)this.guanji>=r[i]&&(Math.ceil(100*Math.random())<r[i+1]?this.arrowR=360:this.arrowR=-360);for(var h=ZJ.TableManager.instance.tables[xlsx.cfg_c_xiaoli].DARTS_ROTATE_SPEED[xlsx.c_xiaoli_data].match(t),i=0;i<h.length;i+=2)this.guanji>=h[i]&&(this.arrowV=h[i+1]);for(var u=ZJ.TableManager.instance.tables[xlsx.cfg_c_xiaoli].TIME_LIMIT[xlsx.c_xiaoli_data].match(t),i=0;i<u.length;i+=2)this.guanji>=u[i]&&(this.time=u[i+1])},e.prototype.getPoint=function(t,e,i,n,s){var a=(new YuanJiao).width,o=this.bg.x,r=1+Math.pow(t,2),h=2*t*(e-n)-2*i,u=Math.pow(i,2)+Math.pow(e-n,2)-Math.pow(a-o,2),l=Math.pow(h,2)-4*r*u;if(0==s)var c=(-h-Math.sqrt(l))/(2*r);else if(1==s)var c=(-h+Math.sqrt(l))/(2*r);return c},e}(ZJ.ViewBase);__reflect(GameView.prototype,"GameView");var LoadingView=function(t){function e(){var e=t.call(this)||this;return e.intervalID=0,e.ran1=0,e.ran2=0,e.skinName="resource/eui_skins/view/LoadingView.exml",e}return __extends(e,t),e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this);var e=ZJ.ShapeUtil.getRect(0,1,this.stage.stageWidth,this.stage.stageHeight);this.black.addChild(e)},e.prototype.onProgress=function(t,e){this.load1.text=Math.floor(t/e*100)+"%"},e.prototype.onDestroy=function(){return t.prototype.onDestroy.call(this),clearInterval(this.intervalID),0},e}(ZJ.ViewBase);__reflect(LoadingView.prototype,"LoadingView");var SettleView=function(t){function e(){var e=t.call(this)||this;return e.SHOW_TIME=3e3,e.toPlatform="",e.timeoutid=0,e.skinName="SettleViewSkin",e}return __extends(e,t),e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this);var e=ZJ.ShapeUtil.getRect(0,.4,this.stage.stageWidth,this.stage.stageHeight);this.gBg.addChild(e),this.game=ZJ.UIManager.instance.openView(UIName.Game),this.restart.addEventListener("touchTap",function(){var t=new egret.Event(EventName.Test);ZJ.EventManager.instance.dispatchEvent(t),ZJ.UIManager.instance.destroyView(UIName.Settle)},this),this.phb.addEventListener("touchTap",function(){ChushouSDK.instance.csExitGame()},this)},e.prototype.setData=function(t){ModuleConfig.compile.danji?ModuleConfig.compile.danji&&(this.score.text=t.score.toString()):(t.weekTop<t.score?(this.icon0.source="bzzj_png",this.icon3.visible=!1,this.score.text=t.score.toString()):t.weekTop>=t.score&&(this.icon0.source="bcdf_png",this.icon3.visible=!0,this.score.text=t.score.toString(),this.bzzj.text=t.weekTop.toString()),this.friend.text=t.friend.toString(),this.paiming.text=t.paiming.toString())},e.prototype.onDestroy=function(){return t.prototype.onDestroy.call(this),0},e}(ZJ.ViewBase);__reflect(SettleView.prototype,"SettleView");var ModuleUtil=function(){function t(){}return Object.defineProperty(t,"tables",{get:function(){return ZJ.TableManager.instance.tables},enumerable:!0,configurable:!0}),t.getProtoByID=function(t,e){var i="";if(e)switch(t){case 99999:i="ClientCmdData";break;case 1e3:i="CmdLoginGameReqMsg";break;case 1001:i="CmdPingReqMsg";break;case 1300:i="CmdJumperUploadAnswerReqMsg";break;case 1303:i="CmdJumperGameOverReqMsg"}else switch(t){case 99999:i="ServerCmdData";break;case 1e3:i="CmdLoginGameRspMsg";break;case 1001:i="CmdPingRspMsg";break;case 1300:i="CmdJumperUploadAnswerRspMsg";break;case 1303:i="CmdJumperGameOverRspMsg";break;case 1399:i="CmdBroadcastJumperBC"}var n=ZJ.SocketManager.instance.ProtoBufRoot,s=n.lookupType(i);return s},t}();__reflect(ModuleUtil.prototype,"ModuleUtil");var ZJ;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),Object.defineProperty(e,"instance",{get:function(){return this._instance},enumerable:!0,configurable:!0}),e.prototype.init=function(){return 0},e._instance=new e,e}(egret.EventDispatcher);t.EventManager=e,__reflect(e.prototype,"ZJ.EventManager")}(ZJ||(ZJ={}));var ZJ;!function(t){var e=function(){function e(){}return e.randomRange=function(e,i,n){null==n&&(n=t.Util.timeStamp());var s=this.randomSeed(n);return s/=233280,Math.floor(e+s*(i-e))},e.randomSeed=function(t){return t=(9301*t+49297)%233280},e.YiYuanErCi=function(t,e,i){var n,s,a,o=[];return n=e*e-4*t*i,0>n||(s=(-1*e+Math.sqrt(n))/(2*t),a=(-1*e-Math.sqrt(n))/(2*t),o.push(s),o.push(a)),o},e}();t.MathUtil=e,__reflect(e.prototype,"ZJ.MathUtil")}(ZJ||(ZJ={}));var ZJ;!function(t){var e=function(){function e(){this.aa=null,this.stage=null,this.dbFactory=dragonBones.EgretFactory.factory,this.dbFileNames=[]}return Object.defineProperty(e,"instance",{get:function(){return this._instance},enumerable:!0,configurable:!0}),e.prototype.init=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return this.stage=t,this.aa=new AssetAdapter,[4,this.loadConfig("resource/default.res.json","resource/")];case 1:return e.sent(),[4,this.loadTheme()];case 2:return e.sent(),[2]}})})},e.prototype.loadRes=function(t,e,i,n){this.aa.getAsset(t,e,i,n)},e.prototype.loadExistRes=function(t){return RES.getRes(t)},e.prototype.loadConfig=function(t,e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(i){switch(i.label){case 0:return[4,RES.loadConfig(t,e)];case 1:return i.sent(),[2]}})})},e.prototype.loadGroup=function(t,e,i){return void 0===e&&(e=0),void 0===i&&(i=null),__awaiter(this,void 0,void 0,function(){var n;return __generator(this,function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,RES.loadGroup(t,e,i)];case 1:return s.sent(),[3,3];case 2:return n=s.sent(),console.error(n),[3,3];case 3:return[2]}})})},e.prototype.loadTheme=function(){var t=this;return new Promise(function(e,i){var n=new eui.Theme("resource/default.thm.json",t.stage);n.addEventListener(eui.UIEvent.COMPLETE,function(){e()},t)})},e.prototype.loadMovieClip=function(e,i,n){t.ResManager.instance.loadRes(e+"_json",function(s,a){var o=s;t.ResManager.instance.loadRes(e+"_png",function(t,e){var s=t,a=new egret.MovieClipDataFactory(o,s),r=new egret.MovieClip(a.generateMovieClipData(i));n(r,a)},this)},this)},e.prototype.loadDragonBones=function(t,e){if(void 0===e&&(e=""),""==e&&(e=t),-1==this.dbFileNames.indexOf(t)){var i=this.loadExistRes(t+"_ske_json"),n=this.loadExistRes(t+"_tex_json"),s=this.loadExistRes(t+"_tex_png");this.dbFactory.parseDragonBonesData(i),this.dbFactory.parseTextureAtlasData(n,s),this.dbFileNames.push(t)}var a=this.dbFactory.buildArmatureDisplay(e);return a},e.prototype.replaceDBSlotDisplay=function(t,e,i,n,s){void 0===e&&(e=""),""==e&&(e=t),this.dbFactory.replaceSlotDisplay(t,e,i,n,s)},e._instance=new e,e}();t.ResManager=e,__reflect(e.prototype,"ZJ.ResManager")}(ZJ||(ZJ={}));var ZJ;!function(t){var e=function(){function t(){}return t.getRect=function(t,e,i,n,s,a){void 0===s&&(s=0),void 0===a&&(a=0);var o=new egret.Shape;return o.graphics.beginFill(t,e),o.graphics.drawRect(s,a,i,n),o.graphics.endFill(),o},t.getCircle=function(t,e,i,n,s){void 0===n&&(n=0),void 0===s&&(s=0);var a=new egret.Shape;return a.graphics.beginFill(t,e),a.graphics.drawCircle(n,s,i),a.graphics.endFill(),a},t.getLine=function(t,e,i,n,s,a,o){var r=new egret.Shape;return r.graphics.lineStyle(i,t,e),r.graphics.moveTo(n,s),r.graphics.lineTo(a,o),r.graphics.endFill(),r},t.getArc=function(t,e,i,n,s,a,o,r,h){void 0===o&&(o=!1),void 0===r&&(r=0),void 0===h&&(h=0);var u=new egret.Shape;return u.graphics.lineStyle(i,t,e),u.graphics.drawArc(r,h,n,Math.PI/180*s,Math.PI/180*a,o),u.graphics.endFill(),u},t.getArch=function(t,e,i,n,s,a,o,r){void 0===a&&(a=!1),void 0===o&&(o=0),void 0===r&&(r=0);var h=new egret.Shape;return h.graphics.beginFill(t,e),h.graphics.drawArc(o,r,i,Math.PI/180*n,Math.PI/180*s,a),h.graphics.endFill(),h},t.setArcMask=function(t,e,i,n,s,a,o){void 0===s&&(s=!1),void 0===a&&(a=t.x),void 0===o&&(o=t.y);var r;null!=t.mask?r=t.mask:(r=new egret.Shape,t.parent.addChild(r));var h=Math.round(i+360*n)*Math.PI/180;i*=Math.PI/180,r.graphics.clear(),r.graphics.beginFill(16711680,1),r.graphics.lineTo(e,0),r.graphics.drawArc(a,o,e,i,h,s),r.graphics.lineTo(a,o),r.graphics.endFill(),r.x=t.x,r.y=t.y,t.mask=r},t}();t.ShapeUtil=e,__reflect(e.prototype,"ZJ.ShapeUtil")}(ZJ||(ZJ={}));var ZJ;!function(t){var e=function(t){function e(e,i,n,s){var a=t.call(this,e,i,n,s)||this;return a.data=null,a}return __extends(e,t),e}(egret.Event);t.SocketDataEvent=e,__reflect(e.prototype,"ZJ.SocketDataEvent")}(ZJ||(ZJ={}));var ZJ;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.socket=null,t.ProtoBufRoot=new protobuf.Root,t.send=null,t.onSocketData=null,t.getProtoByID=null,t._company=1,t.clientIndex=0,t}return __extends(i,e),Object.defineProperty(i,"instance",{get:function(){return this._instance},enumerable:!0,configurable:!0}),i.prototype.init=function(){return this.parseProto(),this.socket=new egret.WebSocket,this.socket.type=egret.WebSocket.TYPE_BINARY,this.setCompany(1),this.socket.addEventListener(egret.ProgressEvent.SOCKET_DATA,this.onSocketData,this),this.socket.addEventListener(egret.Event.CONNECT,this.onSocketConnect,this),0},i.prototype.parseProto=function(){for(var t=this.ProtoBufRoot,e=ModuleConfig.protoFiles,i=0,n=e.length;n>i;++i){var s=RES.getRes(e[i]);protobuf.parse(s,t)}},i.prototype.setCompany=function(t){switch(this._company=t,t){case 2:this.send=this.sendYouai,this.onSocketData=this.onSocketDataYouai,this.getProtoByID=this.getProtoByIDYouai;break;case 3:this.send=this.sendAli,this.getProtoByID=this.getProtoByIDHuoshu;break;default:this.send=this.sendHuoshu,this.onSocketData=this.onSocketDataHuoshu,this.getProtoByID=this.getProtoByIDHuoshu}},i.prototype.connect=function(t,e){this.socket.connect(t,e)},i.prototype.connectByUrl=function(t){this.socket.connectByUrl(t)},i.prototype.close=function(){this.socket.close()},i.prototype.onSocketConnect=function(e){var i=new egret.Event(t.CommonEventName.SOCKET_CONNECTED);this.dispatchEvent(i)},i.prototype.buildSmallShitByID=function(t,e){var i=this.getProtoByID(t,!0),n=this.buildSmallShit(i,e);return n},i.prototype.decodeShitByID=function(t,e){var i=this.getProtoByID(t,!1),n=this.decodeShit(i,e);return n},i.prototype.buildSmallShit=function(t,e){var i=t.create(e),n=t.encode(i),s=n.finish();return s},i.prototype.decodeShit=function(t,e){var i=t.decode(e);return i},i.prototype.sendHuoshu=function(t,e){void 0===e&&(e={}),console.log("send: "+t),console.log(JSON.stringify(e));var i=this.buildSmallShitByID(t,e),n=new egret.ByteArray;n.writeInt(i.byteLength),n.writeShort(t),n._writeUint8Array(i),this.socket.writeBytes(n)},i.prototype.onSocketDataHuoshu=function(e){var i=new egret.ByteArray;this.socket.readBytes(i);var n=(i.readInt(),i.readShort()),s=this.decodeShitByID(n,i.bytes.subarray(6));console.log("receive: "+n),console.log(JSON.stringify(s));var a=new t.SocketDataEvent(t.CommonEventName.SOCKET_DATA);a.data={data:s,protoID:n},this.dispatchEvent(a)},i.prototype.getProtoByIDHuoshu=function(e,i){var n=(Math.floor(e/1e3),""),s="";s=i?"cs_":"sc_",n=s+e;var a=t.SocketManager.instance.ProtoBufRoot,o=a.lookupType(n);return o},i.prototype.sendYouai=function(t,e){void 0===e&&(e={});var i=this.buildSmallShitByID(t,e),n=this.buildSmallShitByID(99999,{messageId:t,clientIndex:this.clientIndex++,data:i}),s=new egret.ByteArray(n);this.socket.writeBytes(s)},i.prototype.onSocketDataYouai=function(e){var i=new egret.ByteArray;this.socket.readBytes(i);var n=this.decodeShitByID(99999,i.bytes),s="",a={},o=n.result,r=n.messageId;n.result?a=this.decodeShitByID(n.messageId,n.data):s=t.Util.Utf8ArrayToStr(n.data);var h=new t.SocketDataEvent(t.CommonEventName.SOCKET_DATA);h.data={data99999:n,error:s,result:o,data:a,protoID:r},this.dispatchEvent(h)},i.prototype.getProtoByIDYouai=function(e,i){var n="";if(i)switch(e){case 99999:n="ClientCmdData";break;case 1e3:n="CmdLoginGameReqMsg";break;case 1001:n="CmdPingReqMsg";break;case 1300:n="CmdJumperUploadAnswerReqMsg";break;case 1303:n="CmdJumperGameOverReqMsg"}else switch(e){case 99999:n="ServerCmdData";break;case 1e3:n="CmdLoginGameRspMsg";break;case 1001:n="CmdPingRspMsg";break;case 1300:n="CmdJumperUploadAnswerRspMsg";break;case 1303:n="CmdJumperGameOverRspMsg";break;case 1399:n="CmdBroadcastJumperBC"}var s=t.SocketManager.instance.ProtoBufRoot,a=s.lookupType(n);return a},i.prototype.sendAli=function(t,e){void 0===e&&(e={});var i=this.buildSmallShitByID(t,e),n=new egret.ByteArray;n.writeInt(i.byteLength),n.writeShort(t),n._writeUint8Array(i),ALISDK.CatcherSDK.instance().sendData(n.buffer)},i.prototype.onSocketDataAli=function(e){var i=new egret.ByteArray(e),n=(i.readInt(),i.readShort()),s=this.decodeShitByID(n,i.bytes.subarray(6));console.log("receive: "+n),console.log(s);var a=new t.SocketDataEvent(t.CommonEventName.SOCKET_DATA);a.data={data:s,protoID:n},this.dispatchEvent(a)},i.prototype.connectByUrlAli=function(e){var i=this;ALISDK.CatcherSDK.init({url:"ws://"+e.ip+":"+e.port+"/ws/game",gameVersion:"0.0.1",gameId:"123123",messageType:"ARRAYBUFFER"}),ALISDK.CatcherSDK.instance().on("CONNECT",function(e){var n=new t.ChannelDataEvent(t.CommonEventName.CHANNEL_DATA);n.data={eventName:"CONNECT",event:e},i.dispatchEvent(n)}).on("PROGRESS",function(e){var n=new t.ChannelDataEvent(t.CommonEventName.CHANNEL_DATA);n.data={eventName:"PROGRESS",event:e},i.dispatchEvent(n)}).on("READY",function(e){var n=new t.ChannelDataEvent(t.CommonEventName.CHANNEL_DATA);n.data={eventName:"READY",event:e},i.dispatchEvent(n)}).on("KICK",function(e){var n=new t.ChannelDataEvent(t.CommonEventName.CHANNEL_DATA);n.data={eventName:"KICK",event:e},i.dispatchEvent(n)}).on("GAMEOVER",function(e){var n=new t.ChannelDataEvent(t.CommonEventName.CHANNEL_DATA);n.data={eventName:"GAMEOVER",event:e},i.dispatchEvent(n)}).on("BREAK",function(e){var n=new t.ChannelDataEvent(t.CommonEventName.CHANNEL_DATA);n.data={eventName:"BREAK",event:e},i.dispatchEvent(n)}).on("CONTINUE",function(e){var n=new t.ChannelDataEvent(t.CommonEventName.CHANNEL_DATA);n.data={eventName:"CONTINUE",event:e},i.dispatchEvent(n)}).on("ERROR",function(e){var n=new t.ChannelDataEvent(t.CommonEventName.CHANNEL_DATA);n.data={eventName:"ERROR",event:e},i.dispatchEvent(n)}).on("MIC_CHANGE",function(e){var n=new t.ChannelDataEvent(t.CommonEventName.CHANNEL_DATA);n.data={eventName:"MIC_CHANGE",event:e},i.dispatchEvent(n)}).on("AUDIO_CHANGE",function(e){var n=new t.ChannelDataEvent(t.CommonEventName.CHANNEL_DATA);n.data={eventName:"AUDIO_CHANGE",event:e},i.dispatchEvent(n)}).on("MESSAGE",function(t){i.onSocketDataAli(t.data)}).start()},i._instance=new i,i}(egret.EventDispatcher);t.SocketManager=e,__reflect(e.prototype,"ZJ.SocketManager")}(ZJ||(ZJ={}));var ZJ;!function(t){var e=function(){function e(){this._tables={}}return Object.defineProperty(e,"instance",{get:function(){return this._instance},enumerable:!0,configurable:!0}),e.prototype.init=function(){return this.load("bg_djw_png"),0},Object.defineProperty(e.prototype,"tables",{get:function(){return this._tables},enumerable:!0,configurable:!0}),e.prototype.load=function(e){t.ResManager.instance.loadRes(e,function(e){for(var i=new JSZip(e),n=i.file(/^[tc].*/),s=0,a=n.length;a>s;s++){var o=n[s],r=t.Util.strFormat("shared/{0}",o.name);this._tables[r]=JSON.parse(o.asText())}t.EventManager.instance.dispatchEvent(new egret.Event(t.CommonEventName.TABLE_LOADED))},this)},e._instance=new e,e}();t.TableManager=e,__reflect(e.prototype,"ZJ.TableManager")}(ZJ||(ZJ={}));var ThemeAdapter=function(){function t(){}return t.prototype.getTheme=function(t,e,i,n){function s(t){e.call(n,t)}function a(e){e.resItem.url==t&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,a,null),i.call(n))}"undefined"!=typeof generateEUI?egret.callLater(function(){e.call(n,generateEUI)},this):(RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,a,null),RES.getResByUrl(t,s,this,RES.ResourceItem.TYPE_TEXT))},t}();__reflect(ThemeAdapter.prototype,"ThemeAdapter",["eui.IThemeAdapter"]);var AssetAdapter=function(){function t(){}return t.prototype.getAsset=function(t,e,i,n){function s(n){e.call(i,n,t)}if(void 0===n&&(n=RES.ResourceItem.TYPE_IMAGE),RES.hasRes(t)){var a=RES.getRes(t);a?s(a):RES.getResAsync(t,s,this)}else RES.getResByUrl(t,s,this,n)},t}();__reflect(AssetAdapter.prototype,"AssetAdapter",["eui.IAssetAdapter"]);var ZJ;!function(t){var e=function(){function t(){this._uiLayers=[],this.uiDatas={},this.uiroot=null,this.views={}}return Object.defineProperty(t,"instance",{get:function(){return this._instance},enumerable:!0,configurable:!0}),t.prototype.init=function(t){return this.uiroot=t,0},Object.defineProperty(t.prototype,"uiLayers",{set:function(t){if(this._uiLayers.length>0)egret.warn("uiLayers已经设定。");else{this._uiLayers=t;for(var e=0,i=this._uiLayers.length;i>e;++e){var n=new eui.Group;n.name="layer"+e,n.touchEnabled=!1,this.uiroot.addChild(n),n.percentWidth=100,n.percentHeight=100}}},enumerable:!0,configurable:!0}),t.prototype.getUIData=function(t){return this.uiDatas[t]},t.prototype.getView=function(t){return this.views[t]},t.prototype.openView=function(t){var e=this.getUIData(t);if(void 0==e)return egret.log("ModuleConfig没有界面配置: "+t),null;var i=this.getView(t);if(void 0!=i);else{if(i=new e.viewClass,void 0==i)return console.warn("viewClass不存在 请检查ModuleConfig.uiDatas"),null;i.percentWidth=100,i.percentHeight=100,this.views[t]=i;var n=0;e.layer<this.uiroot.numChildren&&(n=e.layer),this.uiroot.getChildAt(n).addChild(i)}return i.visible=!0,i.parent.setChildIndex(i,9999),i.show(),i},t.prototype.destroyView=function(t){var e=this.getView(t);return void 0!=e&&null!=e&&(e.onDestroy(),e.parent.removeChild(e),this.views[t]=null),0},t._instance=new t,t}();t.UIManager=e,__reflect(e.prototype,"ZJ.UIManager")}(ZJ||(ZJ={}));var ZJ;!function(t){var e=function(){function t(){}return t.getChar=function(t,e){var i=new egret.ByteArray;return i.writeUTFBytes(t),i.length<e?t:(i.position=0,i.readUTFBytes(e)+"...")},t.strFormat=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];return t.replace(/\{(\d+)\}/g,function(t,i){return e[i]})},t.timeStamp=function(t){return t=t||(new Date).toString(),Date.parse(t)/1e3},t.Utf8ArrayToStr=function(t){var e,i,n,s,a,o;for(e="",n=t.length,i=0;n>i;)switch(s=t[i++],s>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:e+=String.fromCharCode(s);break;case 12:case 13:a=t[i++],e+=String.fromCharCode((31&s)<<6|63&a);break;case 14:a=t[i++],o=t[i++],e+=String.fromCharCode((15&s)<<12|(63&a)<<6|(63&o)<<0)}return e},t.getClassName=function(t){if(t&&t.constructor&&t.constructor.toString()){if(t.constructor.name)return t.constructor.name;var e=t.constructor.toString();if("["==e.charAt(0))var i=e.match(/\[\w+\s*(\w+)\]/);else var i=e.match(/function\s*(\w+)/);if(i&&2==i.length)return i[1]}},t.objToByteArray=function(t){var e=JSON.stringify(t),i=new egret.ByteArray;return i.writeUTF(e),i},t.bytesToObj=function(t){var e=new egret.ByteArray(t),i=JSON.parse(e.readUTF());return i},t.rmArrayObj=function(t,e){return-1!=t.indexOf(e)?t.splice(t.indexOf(e),1):void 0},t}();t.Util=e,__reflect(e.prototype,"ZJ.Util")}(ZJ||(ZJ={}));var ZJ;!function(t){var e=function(){function t(t,e,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),this.x=0,this.y=0,this.z=0,this.x=t,this.y=e,this.z=i}return t}();t.Vector3=e,__reflect(e.prototype,"ZJ.Vector3")}(ZJ||(ZJ={}));var ZJ;!function(t){var e=function(){function e(){this.bgm="bgm",this._isMute=!1,this.sounds={},this.soundsChannel={}}return Object.defineProperty(e,"Instance",{get:function(){return this._instance},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isMute",{get:function(){return this._isMute},set:function(t){this._isMute=t,this._isMute?this.stopAll():(this.stopBgm(),this.playBgm())},enumerable:!0,configurable:!0}),e.prototype.playBgm=function(t,e){void 0===t&&(t=0),void 0===e&&(e=1),this._isMute||null!=this.bgm&&""!=this.bgm&&this.play(this.bgm,t,e)},e.prototype.stopBgm=function(){this.stop(this.bgm)},e.prototype.play=function(e,i,n){var s=this;void 0===i&&(i=1),void 0===n&&(n=1);var a=e+"_mp3";if(!this._isMute)if(null!=this.sounds[e]){var o=this.sounds[e].play(0,i);this.soundsChannel[e]=o,o.volume=n}else t.ResManager.instance.loadRes(a,function(t,a){var o=t,r=o.play(0,i);r.volume=n,s.sounds[e]=o,s.soundsChannel[e]=r},this)},e.prototype.stop=function(t){null!=this.soundsChannel[t]&&(this.soundsChannel[t].stop(),this.soundsChannel[t]=null)},e.prototype.stopAll=function(){for(var t in this.soundsChannel)this.stop(t)},e.prototype.getSound=function(t){return this.sounds[t]},e.prototype.getChannel=function(t){return this.soundsChannel[t]},e.prototype.init=function(e){e.addEventListener(egret.Event.ACTIVATE,function(){t.AudioManager.Instance.playBgm(0)},this),e.addEventListener(egret.Event.DEACTIVATE,function(){t.AudioManager.Instance.stopAll()},this)},e._instance=new e,e}();t.AudioManager=e,__reflect(e.prototype,"ZJ.AudioManager")}(ZJ||(ZJ={}));var ZJ;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.cb=null,t.leftSecond=0,t.intervalID=0,t.isPause=!1,t.skinName="CountDownSkin",t}return __extends(i,e),i.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},i.prototype.start=function(t){var e=this;this.stop(),this.isPause=!1,this.leftSecond=t,this.count(),this.intervalID=setInterval(function(){e.count()},1e3)},i.prototype.pause=function(){this.isPause=!0},i.prototype.resume=function(){this.isPause=!1},i.prototype.stop=function(){clearInterval(this.intervalID)},i.prototype.setSecond=function(e){var i=Math.floor(e/60)%60,n=e%60,s=this.checkTime(i),a=this.checkTime(n);this.label.text=t.Util.strFormat("{0}:{1}",s,a)},i.prototype.count=function(){return this.setSecond(this.leftSecond),0==this.leftSecond?(this.stop(),void(null!=this.cb&&this.cb())):void(this.isPause||this.leftSecond--)},i.prototype.checkTime=function(t){return 10>t&&(t="0"+t),t},i.prototype.OnDestroy=function(){this.cb=null,this.stop()},i}(eui.Component);t.CountDown=e,__reflect(e.prototype,"ZJ.CountDown",["eui.UIComponent","egret.DisplayObject"])}(ZJ||(ZJ={}));var ZJ;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.INTERVAL=60,i.DISTANCE=20,i.pastTime=0,i.lastPos=new t.Vector3,i.nowPos=new t.Vector3,i.isBegin=!1,i.intervalID=0,i}return __extends(i,e),i.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},i.prototype.childrenCreated=function(){var t=this;e.prototype.childrenCreated.call(this),this.layer.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this),this.layer.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this),this.layer.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this),this.intervalID=setInterval(function(){t.onInterval()},this.INTERVAL)},i.prototype.onInterval=function(){if(this.isBegin){var e=this.nowPos.x-this.lastPos.x,i=this.nowPos.y-this.lastPos.y,n=Math.abs(e),s=Math.abs(i),a={};if(n>s?n>this.DISTANCE&&(e>0?a.direct=t.CommonConfig.RIGHT:a.direct=t.CommonConfig.LEFT,this.isBegin=!1):s>this.DISTANCE&&(i>0?a.direct=t.CommonConfig.DOWN:a.direct=t.CommonConfig.UP,this.isBegin=!1),!this.isBegin){var o=new egret.Event(t.CommonEventName.GESTURE_DIRECT);o.data=a,t.EventManager.instance.dispatchEvent(o)}this.lastPos.x=this.nowPos.x,this.lastPos.y=this.nowPos.y}},i.prototype.onTouchBegin=function(t){this.pastTime=0,this.nowPos.x=t.stageX,this.nowPos.y=t.stageY,this.lastPos.x=t.stageX,this.lastPos.y=t.stageY,this.isBegin=!0},i.prototype.onTouchEnd=function(t){this.isBegin=!1},i.prototype.onTouchMove=function(t){this.nowPos.x=t.stageX,this.nowPos.y=t.stageY},i.prototype.OnDestroy=function(){return clearInterval(this.intervalID),0},i}(t.ComponentBase);t.Gesture=e,__reflect(e.prototype,"ZJ.Gesture")}(ZJ||(ZJ={}));var ImgAnim=function(t){function e(e){var i=t.call(this)||this;return i.interval=0,i.loop=!0,i.index=0,i.imgArray=e,i.source=e[0],i}return __extends(e,t),e.prototype.play=function(){var t=this;this.id=setInterval(function(){t.index++,t.index>=t.imgArray.length&&(t.loop?t.index=0:t.stop()),t.source=t.imgArray[t.index]},this.interval,this)},e.prototype.replay=function(){this.index=0,clearInterval(this.id),this.play()},e.prototype.pause=function(){clearInterval(this.id)},e.prototype.stop=function(){this.index=0,clearInterval(this.id)},e}(eui.Image);__reflect(ImgAnim.prototype,"ImgAnim");var UILayer=function(){function t(){}return t.View=0,t.Pop=1,t.SDK=2,t}();__reflect(UILayer.prototype,"UILayer");var UIName=function(){function t(){}return t.Test="Test",t.Game="Game",t.Settle="Settle",t.Loading="Loading",t}();__reflect(UIName.prototype,"UIName");var ModuleConfig=function(){function t(){}return t.WIN_INDEX=31,t.uiLayers=[UILayer.View,UILayer.Pop,UILayer.SDK],t.uiDatas=(_a={},_a[UIName.Game]=new ZJ.UIData(UIName.Game,UILayer.View,GameView),_a[UIName.Settle]=new ZJ.UIData(UIName.Settle,UILayer.View,SettleView),_a[UIName.Loading]=new ZJ.UIData(UIName.Loading,UILayer.View,LoadingView),_a),t.compile={need_loading:!0,chushou:!0,danji:!0,single:!0},t.ip="dev-game.u17games.com",t.singlePort="12061",t.doublePort="12062",t.ws="ws",t.port="20301",t.protoFiles=["p10_proto","p11_proto"],t}();__reflect(ModuleConfig.prototype,"ModuleConfig");var EventName=function(){function t(){}return t.Test="Test",t.GAME_RESTART="GAME_RESTART",t.PLAYER_DIE="PLAYER_DIE",t.PLAYER_FUHUO="PLAYER_FUHUO",t.PLAYER_WIN="PLAYER_WIN",t.PLAYER_JUMP_END="PLAYER_JUMP_END",t}();__reflect(EventName.prototype,"EventName");var _a,ModuleStartUp=function(){function t(){}return t.init=function(){return ZJ.SocketManager.instance.setCompany(1),ZJ.AudioManager.Instance.bgm="bg",ZJ.AudioManager.Instance.playBgm(),ModuleConfig.compile.single&&(ModuleConfig.uiDatas[UIName.Settle].viewClass=SettleView),ZJ.UIManager.instance.openView(UIName.Game),0},t}();__reflect(ModuleStartUp.prototype,"ModuleStartUp");var DebugPlatform=function(){function t(){}return t.prototype.getUserInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,{nickName:"username"}]})})},t.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t.prototype.share=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t}();__reflect(DebugPlatform.prototype,"DebugPlatform",["Platform"]),window.platform||(window.platform=new DebugPlatform);var Arrow=function(t){function e(){var e=t.call(this)||this;return e.skinName="ArrowSkin",e}return __extends(e,t),e.prototype.childrenCreated=function(){},e}(eui.Component);__reflect(Arrow.prototype,"Arrow",["eui.UIComponent","egret.DisplayObject"]);var ArrowHui=function(t){function e(){var e=t.call(this)||this;return e.skinName="ArrowHuiSkin",e}return __extends(e,t),e.prototype.childrenCreated=function(){},e}(eui.Component);__reflect(ArrowHui.prototype,"ArrowHui",["eui.UIComponent","egret.DisplayObject"]);var BarBlack=function(t){function e(){var e=t.call(this)||this;return e.skinName="BarBlackSkin",e}return __extends(e,t),e.prototype.childrenCreated=function(){},e}(eui.Component);__reflect(BarBlack.prototype,"BarBlack",["eui.UIComponent","egret.DisplayObject"]);var BarRed=function(t){function e(){var e=t.call(this)||this;return e.skinName="BarRedSkin",e}return __extends(e,t),e.prototype.childrenCreated=function(){},e}(eui.Component);__reflect(BarRed.prototype,"BarRed",["eui.UIComponent","egret.DisplayObject"]);var MyCountDown=function(t){function e(){var e=t.call(this)||this;return e.cb=null,e.leftSecond=0,e.intervalID=0,e.isPause=!1,e.skinName="MyCountDownSkin",e}return __extends(e,t),e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e.prototype.start=function(t){var e=this;this.stop(),this.isPause=!1,this.leftSecond=t,this.count(),this.intervalID=setInterval(function(){e.count()},1e3)},e.prototype.pause=function(){this.isPause=!0},e.prototype.resume=function(){this.isPause=!1},e.prototype.stop=function(){clearInterval(this.intervalID)},e.prototype.setSecond=function(t){var e=Math.floor(t/60)%60,i=t%60,n=this.checkTime(e),s=this.checkTime(i);this.label.text=ZJ.Util.strFormat("{0}:{1}",n,s)},e.prototype.count=function(){return this.setSecond(this.leftSecond),0==this.leftSecond?(this.stop(),void(null!=this.cb&&this.cb())):void(this.isPause||this.leftSecond--)},e.prototype.checkTime=function(t){return 10>t&&(t="0"+t),t},e.prototype.OnDestroy=function(){this.cb=null,this.stop()},e}(eui.Component);__reflect(MyCountDown.prototype,"MyCountDown",["eui.UIComponent","egret.DisplayObject"]);var NumCountDown=function(t){function e(){var e=t.call(this)||this;return e.cb=null,e.leftSecond=0,e.intervalID=0,e.isPause=!1,e.skinName="NumCountDownSkin",e}return __extends(e,t),e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e.prototype.start=function(t){var e=this;this.stop(),this.isPause=!1,this.leftSecond=t,this.count(),this.intervalID=setInterval(function(){e.count()},1e3)},e.prototype.pause=function(){this.isPause=!0},e.prototype.stop=function(){this.label.text="",clearInterval(this.intervalID)},e.prototype.count=function(){return this.label.text=this.leftSecond.toString(),0==this.leftSecond?(this.stop(),void(null!=this.cb&&this.cb())):void(this.isPause||this.leftSecond--)},e.prototype.OnDestroy=function(){this.cb=null,this.stop()},e}(eui.Component);__reflect(NumCountDown.prototype,"NumCountDown",["eui.UIComponent","egret.DisplayObject"]);var Plate=function(t){function e(){var e=t.call(this)||this;return e.id=0,e.skinName="PlateSkin",e}return __extends(e,t),e}(eui.Component);__reflect(Plate.prototype,"Plate",["eui.UIComponent","egret.DisplayObject"]);var Player=function(t){function e(){var e=t.call(this)||this;return e.G=8500,e.V0_X=400,e.V0_Y=-1800,e.PLAYER_SCALE_MIN=.5,e.PLAYER_TIME_MIN=1e3,e.PLAYER_FORCE_MAX=2.22,e.FLOOR_Y=1510,e.JUMP_WIDTH_FIX=10,e.JUMP_FIRM=.4,e.DROP_ROTATION_TIME=500,e.FUHUO_TIME=2e3,e.LUODI_SCALE=[.7,4.4],e.PLAYER_LUODI=400,e.img=null,e.gMC=null,e.gUp=null,e.beginX=0,e.beginY=0,e._isWin=!1,e.isPlayer1=!1,e.endX=0,e.endY=0,e.force=0,e.halfTime=0,e.rotateDirect=0,e.playerData=new PlayerData,e._curPlateIndex=0,e.intervalID=0,e.timeoutFuhuo=0,e.pastTime=0,e._isPlaying=!1,e._isGameOver=!1,e.time=0,e.isPlayingAnim=!1,e.imgScaleY=1,e._state=1,e._headName=["头落后_","头准备","头领先"],e.skinName="PlayerSkin",e}return __extends(e,t),e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},Object.defineProperty(e.prototype,"scoreX",{get:function(){return this.beginX},set:function(t){this.beginX=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scoreY",{get:function(){return this.beginY},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isWin",{get:function(){return this._isWin},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"curPlateIndex",{get:function(){return this._curPlateIndex},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isPlaying",{get:function(){return this._isPlaying},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isGameOver",{get:function(){return this._isGameOver},set:function(t){this._isGameOver=t
},enumerable:!0,configurable:!0}),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.img.visible=!0,egret.startTick(this.onTick,this)},e.prototype.onTick=function(t){if(this.isPlaying&&!this.isGameOver){var e=t-this.time;this.pastTime+=e;var i=this.pastTime/1e3,n=this.V0_Y*this.force,s=this.V0_X*this.force,a=n*i+.5*this.G*i*i,o=s*i;if(this.y=Math.min(this.FLOOR_Y,this.beginY+a),this.x=this.beginX+o,0!=this.endX&&0!=this.endY){if(this.x>this.endX){if(this.y=this.endY,this.x=this.endX,0==this.rotateDirect&&(this.beginX=this.x,this.beginY=this.y,this.curPlateIndex==ModuleConfig.WIN_INDEX-1)){this._isWin=!0;var r=new egret.Event(EventName.PLAYER_WIN);this.dispatchEvent(r)}this.stopJump(),this.playLuodi()}}else this.y>=this.FLOOR_Y&&(0!=this.endX&&(this.x=Math.min(this.x,this.endX+100)),this.stopJump(),this.gameOver(),this.playGhostAnim())}return this.time=t,!0},e.prototype.resetPos=function(){clearTimeout(this.timeoutFuhuo),this._isWin=!1,this.isPlayingAnim=!1,this._isPlaying=!1,this.isGameOver=!1,this.gMC.rotation=0,this.gMC.y=this.height,this.gMC.alpha=1,this._state=0,this.stopJump(!1),this.stopDieAnim(),this.playBreath()},e.prototype.restart=function(){this.resetPos(),this._curPlateIndex=0},e.prototype.gameOver=function(){var t=this;this.isGameOver=!0,this.stopAnim(),this.timeoutFuhuo=setTimeout(function(){egret.Tween.removeTweens(t.gMC),t.resetPos(),t.x=t.beginX,t.y=t.beginY;var e=new egret.Event(EventName.PLAYER_FUHUO);t.dispatchEvent(e)},this.FUHUO_TIME)},e.prototype.stopJump=function(t){var e=this;if(void 0===t&&(t=!0),this.pastTime=0,this._isPlaying=!1,0!=this.rotateDirect){var i=0;1==this.rotateDirect?i=-90:2==this.rotateDirect&&(i=90),this.rotateDirect=0,this.gameOver(),egret.Tween.get(this.gMC).wait(100).to({rotation:i,y:this.gMC.globalToLocal(0,this.FLOOR_Y+.7*this.height).y},this.DROP_ROTATION_TIME).call(function(){e.playGhostAnim()},this)}else this.playBreath();if(t){var n=new egret.Event(EventName.PLAYER_JUMP_END);this.dispatchEvent(n)}},e.prototype.setData=function(t){this.playerData=t},e.prototype.jump=function(t,e,i){void 0===e&&(e=-1),void 0===i&&(i=-1),this.playJump(),this._isPlaying=!0,this.beginX=this.x,this.beginY=this.y,this.endX=0,this.endY=0,this.force=.1+(1-t)/(1-this.PLAYER_SCALE_MIN)*this.PLAYER_FORCE_MAX;var n=this.V0_Y*this.force,s=this.V0_X*this.force;this.halfTime=-2*n/this.G*.5;for(var a=2*this.halfTime,o=this.playerData.plates.length,r=this._curPlateIndex;o>r;++r){for(var h=this.playerData.plates[r].y,u=ZJ.MathUtil.YiYuanErCi(.5*this.G,n,this.beginY+this.height-h),l=!1,c=0;c<u.length;++c)if(u[c]>this.halfTime){var g=this.beginX+s*u[c];if(g>this.playerData.plates[r].x-this.width+this.JUMP_WIDTH_FIX&&g<this.playerData.plates[r].x+this.playerData.plates[r].width-this.JUMP_WIDTH_FIX){g<this.playerData.plates[r].x-(1-this.JUMP_FIRM)*this.width+this.JUMP_WIDTH_FIX?this.rotateDirect=1:g>this.playerData.plates[r].x+this.playerData.plates[r].width-this.JUMP_FIRM*this.width-this.JUMP_WIDTH_FIX?this.rotateDirect=2:this._curPlateIndex=r,this.endX=Math.floor(g),this.endY=Math.floor(h-this.height),a=u[c],l=!0;break}}if(l)break}var d=this.endY;if(0==this.endX)for(var h=this.FLOOR_Y,u=ZJ.MathUtil.YiYuanErCi(.5*this.G,n,this.beginY+this.height-h),l=!1,c=0;c<u.length;++c)if(u[c]>this.halfTime){var g=this.beginX+s*u[c];this.endX=Math.floor(g);break}-1!=e&&(this.endX=e),-1!=i&&(this.endY=i);var p={endX:this.endX,endY:d,bgTime:a,V0_X:s,V0_Y:n};return p},e.prototype.playAnim=function(){this.isPlayingAnim||this._isWin||(this.isPlayingAnim=!0,this.isPlayer1&&ZJ.AudioManager.Instance.play("xuli",0),this.playYasuo(),this.playXuli())},e.prototype.stopAnim=function(){this.isPlayer1&&ZJ.AudioManager.Instance.stop("xuli");var t=this.dbScaler.scaleY;return egret.Tween.removeTweens(this.dbScaler),this.dbScaler.scaleY=1,this.stopXuli(),this.isPlayingAnim=!1,this.imgScaleY=t,t},e.prototype.playYasuo=function(){egret.Tween.get(this.dbScaler,{loop:!0}).to({scaleY:this.PLAYER_SCALE_MIN},this.PLAYER_TIME_MIN).to({scaleY:1},this.PLAYER_TIME_MIN),this.db.animation.fadeIn(this.getAniNameByState("xuli")).timeScale=1250/this.PLAYER_TIME_MIN},e.prototype.onDestroy=function(){egret.stopTick(this.onTick,this)},e.prototype.playXuli=function(){var t=this;null==this.xuliTw?ZJ.ResManager.instance.loadMovieClip("xuli","xuli",function(e){t.xuliTw=e,t.xuliTw.x=t.width/2,t.xuliTw.y=t.height,t.addChild(t.xuliTw),t.xuliTw.visible=!0,t.xuliTw.play(-1)}):(this.xuliTw.visible=!0,this.xuliTw.play(-1))},e.prototype.stopXuli=function(){null!=this.xuliTw&&(this.xuliTw.stop(),this.xuliTw.visible=!1)},e.prototype.playLuodi=function(){null==this.luodi&&(this.luodi=new eui.Image,this.luodi.source="luodi_png",this.luodi.width=202,this.luodi.height=22,this.luodi.anchorOffsetX=this.luodi.width/2,this.luodi.anchorOffsetY=this.luodi.height/2,this.luodi.x=this.width/2,this.luodi.y=this.height,this.addChildAt(this.luodi,0));var t=this.LUODI_SCALE[0],e=this.LUODI_SCALE[1];this.luodi.visible=!0,this.luodi.scaleX=t,this.luodi.scaleY=t,this.luodi.alpha=1;var i=t+(e-t)*(1-this.imgScaleY)/(1-this.PLAYER_SCALE_MIN);egret.Tween.get(this.luodi).to({scaleY:i,scaleX:i,alpha:0},this.PLAYER_LUODI,egret.Ease.sineOut),this.isWin?this.db.animation.fadeIn("shengli"):this.db.animation.fadeIn(this.getAniNameByState("luodi"),-1,1).timeScale=2.5,this.isPlayer1&&ZJ.AudioManager.Instance.stop("jump")},e.prototype.playGhostAnim=function(){null==this.ghost&&(this.ghost=new eui.Image,this.ghost.source="linghun_png",this.ghost.width=142,this.ghost.height=165,this.ghost.scaleX=1.5,this.ghost.scaleY=1.5,this.ghost.anchorOffsetX=this.ghost.width/2,this.ghost.anchorOffsetY=this.ghost.height/2,this.gUp.addChildAt(this.ghost,2)),null==this.qilang&&(this.qilang=new eui.Image,this.qilang.source="qilang_png",this.qilang.width=272,this.qilang.height=89,this.qilang.anchorOffsetX=this.qilang.width/2,this.qilang.anchorOffsetY=this.qilang.height/2,this.qilang.scaleX=1.5,this.qilang.scaleY=1.5,this.gUp.addChildAt(this.qilang,3)),this.ghost.x=this.gMC.x,this.ghost.y=this.gMC.y,this.qilang.x=this.gMC.x,this.qilang.y=this.gMC.y,this.ghost.visible=!0,this.qilang.visible=!0,this.ghost.alpha=1,egret.Tween.get(this.ghost).to({y:this.gMC.y-150,alpha:0},500,egret.Ease.sineIn),this.qilang.alpha=1,egret.Tween.get(this.qilang).to({alpha:0},200),this.db.animation.fadeIn("daku"),this.isPlayer1&&ZJ.AudioManager.Instance.play("tiaodaoci")},e.prototype.stopDieAnim=function(){this.ghost&&(this.ghost.visible=!1),this.qilang&&(this.qilang.visible=!1)},e.prototype.initDB=function(t){var e=this,i="",n="";1==t?(i="bao1",n="bao1"):(i="bao2",n="bao2"),this.db=ZJ.ResManager.instance.loadDragonBones(i,n),this.gMC.addChild(this.db),this.db.addEventListener(dragonBones.FrameEvent.FRAME_EVENT,function(t){switch(t.frameLabel){case"luodi_end":e.playBreath()}},this)},e.prototype.playBreath=function(){if(null!=this.db){var t=this.getAniNameByState("stand");this.db.animation.fadeIn(t)}},e.prototype.playJump=function(){null!=this.db&&this.db.animation.fadeIn(this.getAniNameByState("jumppose"))},e.prototype.updateDB=function(t){t!=this._state&&(this._state=t,this.isGameOver||this.updateDBInternal())},e.prototype.updateDBInternal=function(){if(this.db.animation.lastAnimationState){var t=this.db.animation.lastAnimationName.split("_")[0];this.db.animation.gotoAndPlayByTime(this.getAniNameByState(t),this.db.animation.lastAnimationState.currentTime)}},e.prototype.getAniNameByState=function(t){var e="";switch(this._state){case 2:e="_lingxian";break;case 0:e="_luohou"}return t+e},e}(eui.Component);__reflect(Player.prototype,"Player",["eui.UIComponent","egret.DisplayObject"]);var ReadyGo=function(t){function e(){var e=t.call(this)||this;return e.READY_TIME=2e3,e.GO_TIME=500,e.cb=null,e.skinName="ReadyGoSkin",e}return __extends(e,t),e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e.prototype.start=function(){var t=this;this.stop(),egret.Tween.get(this.ready).to({alpha:1,scaleX:1,scaleY:1},400).wait(500).to({alpha:0},500).call(function(){egret.Tween.get(t.go).to({alpha:1,scaleX:1,scaleY:1},200).wait(300).to({alpha:0},300).call(function(){null!=t.cb&&t.cb()},t)},this)},e.prototype.stop=function(){egret.Tween.removeTweens(this.ready),egret.Tween.removeTweens(this.go),this.ready.alpha=0,this.ready.scaleX=.8,this.ready.scaleY=.8,this.go.alpha=0,this.go.scaleX=2,this.go.scaleY=2},e.prototype.OnDestroy=function(){this.cb=null,this.stop()},e}(eui.Component);__reflect(ReadyGo.prototype,"ReadyGo",["eui.UIComponent","egret.DisplayObject"]);var testbtn=function(t){function e(){var e=t.call(this)||this;return e.skinName="testbtnSkin",e}return __extends(e,t),e}(ZJ.ComponentBase);__reflect(testbtn.prototype,"testbtn");var YuanJiao=function(t){function e(){var e=t.call(this)||this;return e.id=0,e.skinName="YuanJiaoSkin",e}return __extends(e,t),e}(eui.Component);__reflect(YuanJiao.prototype,"YuanJiao",["eui.UIComponent","egret.DisplayObject"]);var PlayerData=function(){function t(){this.plates=[]}return t}();__reflect(PlayerData.prototype,"PlayerData");var SettleData=function(){function t(){this.score=0}return t}();__reflect(SettleData.prototype,"SettleData");var ZJ;!function(t){var e=function(t){function e(e,i,n,s){var a=t.call(this,e,i,n,s)||this;return a.data=null,a}return __extends(e,t),e}(egret.Event);t.ChannelDataEvent=e,__reflect(e.prototype,"ZJ.ChannelDataEvent")}(ZJ||(ZJ={}));var ZJ;!function(t){var e=function(){function t(){}return t.FRAME=30,t.UP=0,t.DOWN=1,t.LEFT=2,t.RIGHT=3,t}();t.CommonConfig=e,__reflect(e.prototype,"ZJ.CommonConfig");var i=function(){function t(){}return t.TABLE_LOADED="TABLE_LOADED",t.SOCKET_CONNECTED="SOCKET_CONNECTED",t.SOCKET_DATA="SOCKET_DATA",t.GESTURE_DIRECT="GESTURE_DIRECT",t.CHANNEL_DATA="CHANNEL_DATA",t}();t.CommonEventName=i,__reflect(i.prototype,"ZJ.CommonEventName")}(ZJ||(ZJ={}));var Main=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this),egret.lifecycle.addLifecycleListener(function(t){}),egret.lifecycle.onPause=function(){egret.ticker.pause()},egret.lifecycle.onResume=function(){egret.ticker.resume()},egret.registerImplementation("eui.IAssetAdapter",new AssetAdapter),egret.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),this.runGame()["catch"](function(t){console.log(t)})},e.prototype.runGame=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){switch(e.label){case 0:return[4,this.createGameScene()];case 1:return e.sent(),[4,platform.login()];case 2:return e.sent(),[4,platform.getUserInfo()];case 3:return t=e.sent(),console.log(t),[2]}})})},e.prototype.createGameScene=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){switch(e.label){case 0:return egret.ImageLoader.crossOrigin="anonymous",ModuleConfig.compile.yy&&onPKLoading(),ZJ.AudioManager.Instance.init(this.stage),[4,ZJ.ResManager.instance.init(this.stage)];case 1:return e.sent(),[4,ZJ.ResManager.instance.loadGroup("realpreload")];case 2:return e.sent(),ZJ.UIManager.instance.init(this),ZJ.UIManager.instance.uiLayers=ModuleConfig.uiLayers,ZJ.UIManager.instance.uiDatas=ModuleConfig.uiDatas,t=this.GetLoadingView(),[4,ZJ.ResManager.instance.loadGroup("preload",0,t)];case 3:return e.sent(),ZJ.TableManager.instance.init(),ZJ.SocketManager.instance.init(),1==ModuleConfig.compile.yy&&onPKFinishLoading(),ModuleStartUp.init(),1==ModuleConfig.compile.yy&&onPKStart(),[2]}})})},e.prototype.GetLoadingView=function(){var t=null,e=null;return ModuleConfig.compile.need_loading&&(ModuleConfig.compile.danji?e=LoadingView:ModuleConfig.compile.yy?e=YYLoadingView:ModuleConfig.compile.ali?e=AliLoadingView:ModuleConfig.compile.chushou&&(e=ChushouLoadingView)),null!=e&&(ModuleConfig.uiDatas[UIName.Loading].viewClass=e,t=ZJ.UIManager.instance.openView(UIName.Loading)),t},e.prototype.onEnterFrame=function(){},e}(eui.UILayer);__reflect(Main.prototype,"Main");var TestView=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),ZJ.UIManager.instance.destroyView(UIName.Loading),this.initChushouTest()},e.prototype.initFeibiao=function(){new eui.Image},e.prototype.initHitTest=function(){var t=this,e=new eui.Button;this.addChild(e),e.x=0,e.y=100;var i=new eui.Button;this.addChild(i),i.x=20,i.y=100,setTimeout(function(){console.log(t.myHitTest(e,i))},1e3)},e.prototype.myHitTest=function(t,e){var i=t.getBounds(),n=e.getBounds();return i.x=t.x,i.y=t.y,n.x=e.x,n.y=e.y,i.intersects(n)},e.prototype.onSocketConnected=function(){console.log("onSocketConnected")},e.prototype.onSocketData=function(t){console.log("onSocketData")},e.prototype.initChushouTest=function(){for(var t=100,e=200,i=600,n=250,s=3,a=["csAuthRequest","csJoinRoom","csQuitRoom","csInviteToGame","csKickOutUser","csShareRoom","csShareRecord","csGetFriendList","csGetUserRelationship","csFollowUser","csEnableMic","csEnableAudioOutput","onUserVolumeUpdate","csExitGame","onNetworkStatusChange","csGetAPIVersionInfo","cs_10000","cs_10001","无视，进入游戏"],o=[this.csAuthRequest,this.csJoinRoom,this.csQuitRoom,this.csInviteToGame,this.csKickOutUser,this.csShareRoom,this.csShareRecord,this.csGetFriendList,this.csGetUserRelationship,this.csFollowUser,this.csEnableMic,this.csEnableAudioOutput,this.onUserVolumeUpdate,this.csExitGame,this.onNetworkStatusChange,this.csGetAPIVersionInfo,this.cs_10000,this.cs_10001,this.enterGame],r=0,h=a.length;h>r;++r){var u=this.getChushouBtn();u.x=t+r%s*i,u.y=e+Math.floor(r/s)*n,u.label=a[r],u.addEventListener(egret.TouchEvent.TOUCH_TAP,o[r],this)}},e.prototype.getChushouBtn=function(){var t=new eui.Button;return this.addChild(t),t.width=400,t.height=150,t.labelDisplay.size=40,t},e.prototype.csAuthRequest=function(){console.log("csAuthRequest"),csAuthRequest('{"h5AppName" : "五⼦棋","launchMode" : "10","inviteMode" : "10","gameRoomId" : "1084"}',function(t){console.log("cb csAuthRequest")})},e.prototype.csJoinRoom=function(){console.log("csJoinRoom"),csJoinRoom('{"accessToken" : "89d57e62acg45b33","gameRoomId" : "1084","role" : "0"}',function(t){console.log("cb csJoinRoom")})},e.prototype.csQuitRoom=function(){console.log("csQuitRoom"),csQuitRoom('{"accessToken" : "89d57e62acg45b33","gameRoomId" : "1084"}',function(t){console.log("cb csQuitRoom")})},e.prototype.csInviteToGame=function(){console.log("csInviteToGame"),csInviteToGame('{"accessToken" : "89d57e62acg45b33","gameRoomId" : "1084","inviteMode" : "10","title" : "触⼿五⼦棋","description" : "我正在触⼿玩五⼦棋，快来围观吧","image" : "/9j/4RMQRXhpZgAATU0AKgAAA"}',function(t){console.log("cb csInviteToGame")})},e.prototype.csKickOutUser=function(){console.log("csKickOutUser"),csKickOutUser('{"accessToken" : "89d57e62acg45b33","targetUid" : "sl23859","gameRoomId" : "1084"}',function(t){console.log("cb csKickOutUser")})},e.prototype.csShareRoom=function(){console.log("csShareRoom"),csShareRoom('{"accessToken" : "89d57e62acg45b33","gameRoomId" : "1084","title" : "触⼿五⼦棋","description" : "我正在触⼿玩五⼦棋，快来围观吧","image" : "/9j/4RMQRXhpZgAATU0AKgAAA"}',function(t){console.log("cb csShareRoom")})},e.prototype.csShareRecord=function(){console.log("csShareRecord"),csShareRecord('{"accessToken" : "89d57e62acg45b33","gameRecordId" : "119844","title" : "触⼿五⼦棋","description" : "我在触⼿五⼦棋获得了最强王者称号","image" : "/9j/4RMQRXhpZgAATU0AKgAAA"}',function(t){console.log("cb csShareRecord")})},e.prototype.csGetFriendList=function(){console.log("csGetFriendList"),csGetFriendList('{"accessToken" : "89d57e62acg45b33","numPerPage" : "10","breakpoint" : "18823-ffgh-cc08"}',function(t){console.log("cb csGetFriendList")})},e.prototype.csGetUserRelationship=function(){console.log("csGetUserRelationship"),csGetUserRelationship('{"accessToken" : "89d57e62acg45b33","users" : "10785,491721"}',function(t){console.log("cb csGetUserRelationship")})},e.prototype.csFollowUser=function(){console.log("csFollowUser"),csFollowUser('{"accessToken" : "89d57e62acg45b33","targetUid" : "sl10785"}',function(t){console.log("cb csFollowUser")})},e.prototype.csEnableMic=function(){console.log("csEnableMic"),csEnableMic('{"accessToken" : "89d57e62acg45b33","enableMic" : "1"}',function(t){console.log("cb csEnableMic")})},e.prototype.csEnableAudioOutput=function(){console.log("csEnableAudioOutput"),csEnableAudioOutput('{"accessToken" : "89d57e62acg45b33","enableAudioOutput" : "1"}',function(t){console.log("cb csEnableAudioOutput")})},e.prototype.onUserVolumeUpdate=function(){console.log("onUserVolumeUpdate"),onUserVolumeUpdate(function(t){console.log("cb onUserVolumeUpdate")})},e.prototype.csExitGame=function(){console.log("csExitGame"),csExitGame('{"accessToken" : "89d57e62acg45b33"}')},e.prototype.onNetworkStatusChange=function(){console.log("onNetworkStatusChange"),onNetworkStatusChange(function(t){console.log("cb onNetworkStatusChange")})},e.prototype.csGetAPIVersionInfo=function(){console.log("csGetAPIVersionInfo"),csGetAPIVersionInfo('{"h5AppName" : "五⼦棋","launchMode" : "10","inviteMode" : "10","gameRoomId" : "1084"}',function(t){console.log("cb csGetAPIVersionInfo")})},e.prototype.cs_10000=function(){console.log("cs_10000"),ZJ.SocketManager.instance.send(1e4,{openId:"2333",sign:"sign",timestamp:ZJ.Util.timeStamp(),appId:1234,params:"params"})},e.prototype.cs_10001=function(){console.log("cs_10001"),ZJ.SocketManager.instance.send(10001,{gameMode:1,matchType:1,matchId:3})},e.prototype.enterGame=function(){ZJ.UIManager.instance.openView(UIName.Game),ZJ.UIManager.instance.destroyView(UIName.Test)},e.prototype.onDestroy=function(){return t.prototype.onDestroy.call(this),0},e}(ZJ.ViewBase);__reflect(TestView.prototype,"TestView");var AliLoadingView=function(t){function e(){var e=t.call(this)||this;return e.intervalID=0,e.ran1=0,e.ran2=0,e.SEND_PROGRESS=6,e.progressIndex=0,e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this);var e=ZJ.ShapeUtil.getRect(0,1,this.stage.stageWidth,this.stage.stageHeight);this.addChild(e);var i=500,n=new eui.ProgressBar;n.skinName="YYLoadingPBSkin",this.progress=n,this.progress.width=450,this.progress.height=62,this.progress.minimum=0,this.progress.maximum=100,this.progress.horizontalCenter=0,this.progress.y=i+435,this.progress.scaleX=1.3,this.progress.scaleY=1.3,this.progress.labelFunction=function(t,e){return t+"%"},this.addChild(this.progress);var s=new eui.Image;s.source="load_img03_png",s.horizontalCenter=0,s.y=i+630,s.width=510,s.height=100,s.alpha=.2,this.addChild(s),this.load3=new eui.Label,this.load3.text="等待对手加入游戏...",this.load3.horizontalCenter=0,this.load3.y=i+660,this.load3.size=40,this.load3.textColor=16777215,this.addChild(this.load3),this.startCount(),ZJ.SocketManager.instance.connectByUrlAli({ip:ModuleConfig.ip,port:ModuleConfig.port})},e.prototype.startCount=function(){var t=this;this.intervalID=setInterval(function(){t.ran2=Math.min(t.ran2+8*Math.random()+2,99),t.progress.value=Math.floor((t.ran1+t.ran2)/2)},200)},e.prototype.onProgress=function(t,e){this.ran1=Math.floor(t/e*100);var i=Math.floor(t/e*100);100==i?ALISDK.CatcherSDK.instance().updateProgress(ALISDK.CatcherSDK.ProgressState.COMPLETED,i):(this.progressIndex==this.SEND_PROGRESS-1&&ALISDK.CatcherSDK.instance().updateProgress(ALISDK.CatcherSDK.ProgressState.PROGRESSING,i),this.progressIndex=++this.progressIndex%this.SEND_PROGRESS)},e.prototype.onDestroy=function(){return t.prototype.onDestroy.call(this),0},e}(ZJ.ViewBase);__reflect(AliLoadingView.prototype,"AliLoadingView");var ChushouDataModel=function(){function t(){this.INTERVAL_PING=3e4,this.gameStyle=0,this.sbIsFriend=!1,this.intervalPing=0,ZJ.SocketManager.instance.addEventListener(ZJ.CommonEventName.SOCKET_CONNECTED,this.onConnect,this),ZJ.SocketManager.instance.addEventListener(ZJ.CommonEventName.SOCKET_DATA,this.onData,this),"20"==chushouGameConfig.launchMode?(this.gameStyle=1,ZJ.SocketManager.instance.connectByUrl(ModuleConfig.ws+"://"+ModuleConfig.ip+":"+ModuleConfig.singlePort)):"30"==chushouGameConfig.launchMode&&(this.gameStyle=2,ZJ.SocketManager.instance.connectByUrl(ModuleConfig.ws+"://"+ModuleConfig.ip+":"+ModuleConfig.doublePort))}return Object.defineProperty(t,"instance",{get:function(){return this._instance||(this._instance=new t),this._instance},enumerable:!0,configurable:!0}),t.prototype.onConnect=function(){var t=this;ChushouSDK.instance.csAuthRequest(function(e){egret.log(),t.login10000(),t.ping11004(),t.csAuthRequestCallBack()})},t.prototype.onData=function(t){var e=this,i=t.data.data;switch(console.log(JSON.stringify(i)),t.data.protoID){case 1e4:0==i.result?(this.match10001(),this.doAction(this.onData10000,i)):ChushouSDK.instance.csExitGame();break;case 10001:0==i.result?(this.doAction(this.onData10001,i),2==this.gameStyle?(ChushouSDK.instance.gameRoomId=i.roomId,ChushouSDK.instance.csJoinRoom(function(t){0==t.code?e.gamePreStart11002():ChushouSDK.instance.csExitGame()})):1==this.gameStyle&&this.gamePreStart11002()):2==i.result?ChushouSDK.instance.csExitGame():ChushouSDK.instance.csExitGame();break;case 11002:0==i.result?this.doAction(this.onData11002,i):ChushouSDK.instance.csExitGame();break;case 11003:2==this.gameStyle?(i.playerInfos[0].openId==ChushouSDK.instance.csAuthRequestData.openUid?(this.myData=i.playerInfos[0],this.sbData=i.playerInfos[1]):(this.myData=i.playerInfos[1],this.sbData=i.playerInfos[0]),ChushouSDK.instance.csGetUserRelationship([this.sbData.openId],function(t){e.sbIsFriend=!1,0==t.code&&0!=t.users[0].relationship&&(e.sbIsFriend=!0)})):1==this.gameStyle&&(this.myData=i.playerInfos[0]),this.doAction(this.onData11003,i);break;case 11005:this.doAction(this.onData11005,i);break;case 11006:this.doAction(this.onData11006,i);break;case 11007:this.doAction(this.onData11007,i);break;case 11008:this.doAction(this.onData11008,i);break;case 11009:this.doAction(this.onData11009,i);break;case 11010:this.doAction(this.onData11010,i);break;case 11011:this.doAction(this.onData11011,i);break;case 11012:this.doAction(this.onData11012,i)}},t.prototype.doAction=function(t,e){t&&t(e)},t.prototype.login10000=function(){egret.log("do Login"),ZJ.SocketManager.instance.send(1e4,{openId:ChushouSDK.instance.csAuthRequestData.openUid,sign:"sign",timestamp:ZJ.Util.timeStamp(),appId:ModuleConfig.compile.chushou_appid,params:[ChushouSDK.instance.csAuthRequestData.nickname,ChushouSDK.instance.csAuthRequestData.gender,ChushouSDK.instance.csAuthRequestData.avatar]})},t.prototype.match10001=function(){egret.log("do Match"),1==this.gameStyle?ZJ.SocketManager.instance.send(10001,{gameMode:this.gameStyle,matchType:1}):2==this.gameStyle&&ZJ.SocketManager.instance.send(10001,{gameMode:this.gameStyle,matchType:2,matchId:ChushouSDK.instance.csAuthRequestData.csGroupId.toString()})},t.prototype.gamePreStart11002=function(){egret.log("do Ready"),ZJ.SocketManager.instance.send(11002)},t.prototype.ping11004=function(){egret.log("do Ping"),this.intervalPing=setInterval(function(){ZJ.SocketManager.instance.send(11004)},this.INTERVAL_PING)},t.prototype.getGameState11005=function(){0!=this.gameStyle&&(egret.log("get game state"),ZJ.SocketManager.instance.send(11005))},t.prototype.getPlayerData11006=function(){0!=this.gameStyle&&(egret.log("get player data"),ZJ.SocketManager.instance.send(11006))},t.prototype.playAgain11007=function(){0!=this.gameStyle&&(egret.log("play again"),ZJ.SocketManager.instance.send(11007))},t.prototype.getHighestScore11008=function(){0!=this.gameStyle&&(egret.log("get highest score"),ZJ.SocketManager.instance.send(11008))},t.prototype.sendProcessData11010=function(t){0!=this.gameStyle&&(egret.log("send process data"),ZJ.SocketManager.instance.send(11010,{processData:ZJ.Util.objToByteArray(t.processData).bytes}))},t.prototype.sendScoredData11011=function(t){0!=this.gameStyle&&(egret.log("do Upload Score : "+t.score),ZJ.SocketManager.instance.send(11011,{score:t.score,resultData:ZJ.Util.objToByteArray(t.resultData).bytes}))},t.prototype.sendGameResult11012=function(t){0!=this.gameStyle&&(egret.log("win id : "+t.winPlayerId),ZJ.SocketManager.instance.send(11012,{winPlayerId:t.winPlayerId}))},t.prototype.sendFriendList=function(t){0!=this.gameStyle&&(egret.log("send friendList : "+t.openId),ZJ.SocketManager.instance.send(11014,{openId:t.openId}))},t}();__reflect(ChushouDataModel.prototype,"ChushouDataModel");var ChushouLoadingView=function(t){function e(){var e=t.call(this)||this;return e.intervalID=0,e.ran1=0,e.ran2=0,e.SEND_PROGRESS=10,e.progressIndex=0,e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this);var e=ZJ.ShapeUtil.getRect(0,1,this.stage.stageWidth,this.stage.stageHeight);this.addChild(e)},e.prototype.startCount=function(){var t=this;this.intervalID=setInterval(function(){t.ran2=Math.min(t.ran2+8*Math.random()+2,99),t.progress.value=Math.floor((t.ran1+t.ran2)/2)},200)},e.prototype.onProgress=function(t,e){this.progressIndex==this.SEND_PROGRESS-1&&ChushouSDK.instance.csNotifyLoadProgress(t/e*100),this.progressIndex=++this.progressIndex%this.SEND_PROGRESS},e.prototype.onDestroy=function(){return t.prototype.onDestroy.call(this),0},e}(ZJ.ViewBase);__reflect(ChushouLoadingView.prototype,"ChushouLoadingView");var ChushouSDK=function(){function t(){this.gameRoomId="",this.role="",this.title="分享标题",this.image="/resource/assets/egret_icon.png",this.description="分享描述",this.enableMic="1",this.enableAudioOutput="1",this.csAuthRequestData=null}return Object.defineProperty(t,"instance",{get:function(){return this._instance||(this._instance=new t),this._instance},enumerable:!0,configurable:!0}),t.prototype.csAuthRequest=function(t){var e=this;console.log("csAuthRequest"),csAuthRequest('{"h5AppName" : "'+ModuleConfig.compile.chushou_h5AppName+'","launchMode" : "'+chushouGameConfig.launchMode+'","inviteMode" : "'+chushouGameConfig.inviteMode+'","gameRoomId" : "'+chushouGameConfig.gameRoomId+'"}',function(i){console.log("cb csAuthRequest"),console.log(i);var n=JSON.parse(i);e.csAuthRequestData=n,t&&t(n)})},t.prototype.csJoinRoom=function(t){console.log("csJoinRoom "+this.gameRoomId),csJoinRoom('{"accessToken" : "'+this.csAuthRequestData.accessToken+'","gameRoomId" : "'+this.gameRoomId+'","role" : "'+this.csAuthRequestData.role+'"}',function(e){console.log("cb csJoinRoom"),console.log(e.toString()),t&&t(JSON.parse(e))})},t.prototype.csQuitRoom=function(t){console.log("csQuitRoom"),csQuitRoom('{"accessToken" : "'+this.csAuthRequestData.accessToken+'","gameRoomId" : "'+this.gameRoomId+'"}',function(e){console.log("cb csQuitRoom"),t&&t(JSON.parse(e))})},t.prototype.csInviteToGame=function(t){console.log("csInviteToGame"),csInviteToGame('{"accessToken" : "'+this.csAuthRequestData.accessToken+'","gameRoomId" : "'+this.gameRoomId+'","inviteMode" : "'+chushouGameConfig.inviteMode+'","title" : "'+this.title+'","description" : "'+this.description+'","image" : "'+this.image+'"}',function(e){console.log("cb csInviteToGame"),t&&t(JSON.parse(e))})},t.prototype.csKickOutUser=function(t){console.log("csKickOutUser"),csKickOutUser('{"accessToken" : "'+this.csAuthRequestData.accessToken+'","targetUid" : "sl23859","gameRoomId" : "'+this.gameRoomId+'"}',function(e){console.log("cb csKickOutUser"),t&&t(JSON.parse(e))})},t.prototype.csShareRoom=function(t){console.log("csShareRoom"),csShareRoom('{"accessToken" : "'+this.csAuthRequestData.accessToken+'","gameRoomId" : "'+this.gameRoomId+'","title" : "'+this.title+'","description" : "'+this.description+'","image" : "'+this.image+'"}',function(e){console.log("cb csShareRoom"),t&&t(JSON.parse(e))})},t.prototype.csShareRecord=function(t){console.log("csShareRecord"),csShareRecord('{"accessToken" : "'+this.csAuthRequestData.accessToken+'","gameRecordId" : "119844","title" : "'+this.title+'","description" : "'+this.description+'","image" : "'+this.image+'"}',function(e){console.log("cb csShareRecord"),t&&t(JSON.parse(e))})},t.prototype.csGetFriendList=function(t){console.log("csGetFriendList"),csGetFriendList('{"accessToken" : "'+this.csAuthRequestData.accessToken+'","numPerPage" : "10","breakpoint" : "18823-ffgh-cc08"}',function(e){console.log("cb csGetFriendList"),t&&t(JSON.parse(e))})},t.prototype.csGetUserRelationship=function(t,e){for(var i="",n=0;n<t.length;n++)i+=t[n],n!=t.length-1&&(i+=",");console.log("csGetUserRelationship"),csGetUserRelationship('{"accessToken" : "'+this.csAuthRequestData.accessToken+'","users" : "'+i+'"}',function(t){console.log("cb csGetUserRelationship"),e&&e(JSON.parse(t))})},t.prototype.csFollowUser=function(t,e){console.log("csFollowUser"),csFollowUser('{"accessToken" : "'+this.csAuthRequestData.accessToken+'","targetUid" : "'+t+'"}',function(t){console.log("cb csFollowUser"),e&&e(JSON.parse(t))})},t.prototype.csEnableMic=function(t){console.log("csEnableMic"),csEnableMic('{"accessToken" : "'+this.csAuthRequestData.accessToken+'","enableMic" : '+this.enableMic+"}",function(e){console.log("cb csEnableMic"),t&&t(JSON.parse(e))})},t.prototype.csEnableAudioOutput=function(t){console.log("csEnableAudioOutput"),csEnableAudioOutput('{"accessToken" : "'+this.csAuthRequestData.accessToken+'","enableAudioOutput" : "'+this.enableAudioOutput+'"}',function(e){console.log("cb csEnableAudioOutput"),t&&t(JSON.parse(e))})},t.prototype.onUserVolumeUpdate=function(t){console.log("onUserVolumeUpdate"),onUserVolumeUpdate(function(e){console.log("cb onUserVolumeUpdate"),t&&t(JSON.parse(e))})},t.prototype.csExitGame=function(t){console.log("csExitGame "+this.csAuthRequestData.accessToken),this.csQuitRoom(),csExitGame('{"accessToken" : "'+this.csAuthRequestData.accessToken+'"}')},t.prototype.csNotifyLoadProgress=function(t,e){console.log("csNotifyLoadProgress"),csNotifyLoadProgress('{"total" : "100","progress" : "'+t+'"}')},t.prototype.onNetworkStatusChange=function(t){console.log("onNetworkStatusChange"),onNetworkStatusChange(function(e){console.log("cb onNetworkStatusChange"),t&&t(JSON.parse(e))})},t.prototype.csGetAPIVersionInfo=function(t){console.log("csGetAPIVersionInfo"),csGetAPIVersionInfo('{"h5AppName" : "'+ModuleConfig.compile.chushou_h5AppName+'","launchMode" : "'+chushouGameConfig.launchMode+'","inviteMode" : "'+chushouGameConfig.inviteMode+'","gameRoomId" : "'+this.gameRoomId+'"}',function(e){console.log("cb csGetAPIVersionInfo"),t&&t(JSON.parse(e))})},t.prototype.csInvokeRecharge=function(t){console.log("csInvokeRecharge"),csInvokeRecharge('{"accessToken" : "'+this.csAuthRequestData.accessToken+'","paymentScene" : "1"}',function(e){console.log("cb csInvokeRecharge"),t&&t(JSON.parse(e))})},t.prototype.onBalanceChanged=function(t){console.log("onBalanceChanged")},t.prototype.csPurchaseProps=function(t){console.log("csPurchaseProps"),csPurchaseProps('{"accessToken" : "'+this.csAuthRequestData.accessToken+'","cpOrderId" : "prop7865421","cpPropName" : "双倍积分卡","cpPropId" : "1","payAmount" : "500"}',function(e){console.log("cb csPurchaseProps"),t&&t(JSON.parse(e))})},t.prototype.csPayEntryFee=function(t,e,i,n){console.log("csPayEntryFee"),csPayEntryFee('{"accessToken" : "'+this.csAuthRequestData.accessToken+'","cpOrderId" : "'+t+'","cpPropName" : "'+i+'","cpPropId" : "'+e+'"}',function(t){console.log("cb csPayEntryFee"),n&&n(JSON.parse(t))})},t.prototype.csCheckEntryFee=function(t){console.log("csCheckEntryFee"),csCheckEntryFee('{"accessToken" : "'+this.csAuthRequestData.accessToken+'"}',function(e){console.log("cb csCheckEntryFee"),t&&t(JSON.parse(e))})},t}();__reflect(ChushouSDK.prototype,"ChushouSDK");var YYLoadingView=function(t){function e(){var e=t.call(this)||this;return e.intervalID=0,e.ran1=0,e.ran2=0,e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this);var e=ZJ.ShapeUtil.getRect(0,1,this.stage.stageWidth,this.stage.stageHeight);this.addChild(e);var i=new eui.Image;i.source="loading_bg_png",i.height=1920,i.percentWidth=100,this.addChild(i),i.horizontalCenter=0;
var n=500,s=new eui.Group;this.addChild(s),s.horizontalCenter=0,s.y=n,ZJ.ResManager.instance.loadMovieClip("yylangren","yylangren",function(t){s.addChild(t),t.scaleX=1.5,t.scaleY=1.5,t.x=-195,t.gotoAndPlay("tiao",-1)});var a=new eui.ProgressBar;a.skinName="YYLoadingPBSkin",this.progress=a,this.progress.width=450,this.progress.height=62,this.progress.minimum=0,this.progress.maximum=100,this.progress.horizontalCenter=0,this.progress.y=n+435,this.progress.scaleX=1.3,this.progress.scaleY=1.3,this.progress.labelFunction=function(t,e){return t+"%"},this.addChild(this.progress);var o=new eui.Image;o.source="load_img03_png",o.horizontalCenter=0,o.y=n+630,o.width=510,o.height=100,o.alpha=.2,this.addChild(o),this.load3=new eui.Label,this.load3.text="等待对手加入游戏...",this.load3.horizontalCenter=0,this.load3.y=n+660,this.load3.size=40,this.load3.textColor=16777215,this.addChild(this.load3),this.startCount()},e.prototype.startCount=function(){var t=this;this.intervalID=setInterval(function(){t.ran2=Math.min(t.ran2+8*Math.random()+2,99),t.progress.value=Math.floor((t.ran1+t.ran2)/2)},200)},e.prototype.onProgress=function(t,e){this.ran1=Math.floor(t/e*100),this.progress.value=Math.floor((this.ran1+this.ran2)/2)},e.prototype.onDestroy=function(){return t.prototype.onDestroy.call(this),clearInterval(this.intervalID),0},e}(ZJ.ViewBase);__reflect(YYLoadingView.prototype,"YYLoadingView");var xlsx;!function(t){t.cfg_c_xiaoli="shared/c_xiaoli.json",t.c_xiaoli_id="A",t.c_xiaoli_data="B"}(xlsx||(xlsx={}));