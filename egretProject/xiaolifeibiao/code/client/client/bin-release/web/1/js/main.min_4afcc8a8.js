var __reflect=this&&this.__reflect||function(t,e,i){t.__class__=e,i?i.push(e):i=[e],t.__types__=t.__types__?i.concat(t.__types__):i},__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},__awaiter=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))(function(a,s){function o(t){try{h(n.next(t))}catch(e){s(e)}}function r(t){try{h(n["throw"](t))}catch(e){s(e)}}function h(t){t.done?a(t.value):new i(function(e){e(t.value)}).then(o,r)}h((n=n.apply(t,e||[])).next())})},__generator=this&&this.__generator||function(t,e){function i(t){return function(e){return n([t,e])}}function n(i){if(a)throw new TypeError("Generator is already executing.");for(;h;)try{if(a=1,s&&(o=s[2&i[0]?"return":i[0]?"throw":"next"])&&!(o=o.call(s,i[1])).done)return o;switch(s=0,o&&(i=[0,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return h.label++,{value:i[1],done:!1};case 5:h.label++,s=i[1],i=[0];continue;case 7:i=h.ops.pop(),h.trys.pop();continue;default:if(o=h.trys,!(o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){h=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){h.label=i[1];break}if(6===i[0]&&h.label<o[1]){h.label=o[1],o=i;break}if(o&&h.label<o[2]){h.label=o[2],h.ops.push(i);break}o[2]&&h.ops.pop(),h.trys.pop();continue}i=e.call(t,h)}catch(n){i=[6,n],s=0}finally{a=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}var a,s,o,r,h={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:i(0),"throw":i(1),"return":i(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r},ZJ;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.skinName=t.Util.getClassName(i)+"Skin",i}return __extends(i,e),i.prototype.onDestroy=function(){return 0},i}(eui.Component);t.ComponentBase=e,__reflect(e.prototype,"ZJ.ComponentBase",["eui.UIComponent","egret.DisplayObject"])}(ZJ||(ZJ={}));var ZJ;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e.prototype.setData=function(t){},e.prototype.show=function(){},e.prototype.onProgress=function(t,e){},e.prototype.onDestroy=function(){return t.prototype.onDestroy.call(this)},e}(t.ComponentBase);t.ViewBase=e,__reflect(e.prototype,"ZJ.ViewBase",["RES.PromiseTaskReporter"])}(ZJ||(ZJ={}));var ZJ;!function(t){var e=function(){function t(t,e,i){void 0===e&&(e=0),void 0===i&&(i=null),this.viewName="",this.layer=0,this.viewClass=null,this.viewName=t,this.layer=e,this.viewClass=i}return t}();t.UIData=e,__reflect(e.prototype,"ZJ.UIData")}(ZJ||(ZJ={}));var GameView=function(t){function e(){var e=t.call(this)||this;return e.guanji=1,e.shootN=0,e.jifenN=0,e.MING_SHU=3,e.mingshu=e.MING_SHU,e.shuzu=[],e.yuanzu=[],e.id=1,e.rota=0,e.i=0,e.skinName="GameViewSkin",e}return __extends(e,t),e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){var e=this;t.prototype.childrenCreated.call(this),ZJ.UIManager.instance.destroyView(UIName.Loading);var i=ZJ.ResManager.instance.loadDragonBones("shou");i.x=this.bgAll.width/2,i.y=this.bgAll.height/4,this.bgAll.addChild(i),i.animation.play(),this.djs=ZJ.ResManager.instance.loadDragonBones("djs"),this.djs.x=this.bgAll.width/2,this.djs.y=this.bgAll.height/2,this.bgAll.addChild(this.djs),this.djs.animation.play("djs",1),this.createMain(),setTimeout(function(){e.bgAll.removeChild(i),e.createBar(),e.bgAll.addEventListener("touchTap",e.setClick,e)},2330)},e.prototype.createMain=function(){this.setConfigure(),this.arrow=this.createArrow(),this.createTarget(),this.setLife(),this.setFen()},e.prototype.setClick=function(){0==this.i&&(ZJ.AudioManager.Instance.play("targetFei",1),this.rota=this.arrow.rotation,egret.Tween.removeTweens(this.arrow),this.arrowHui=this.createArrowHui(),this.arrHuiImg.addChild(this.arrowHui),this.runArrow(),this.i++)},e.prototype.createBar=function(){this.barB=new BarBlack,this.bar.addChild(this.barB),this.barR=new BarRed,this.bar.addChild(this.barR),this.barR.visible=!1,egret.Tween.get(this.barR,{loop:!0}).to({alpha:.5},60).to({alpha:1},60);var t=new egret.Timer(this.time,1);t.start(),egret.startTick(this.moveBar,this)},e.prototype.moveBar=function(t){var e=this.barB.width*(1e3/60)/this.time,i=e/this.barB.width,n=e/this.barR.width;this.barB.scaleX=this.barB.scaleX-i;var a=this.barB.width*this.barB.scaleX;if(a<=this.barR.width){this.barB.visible=!1,this.barR.visible=!0,this.barR.scaleX=this.barR.scaleX-n;var s=this.barR.width*this.barR.scaleX;if(10>=s&&(egret.stopTick(this.moveBar,this),this.bar.removeChildren(),0==this.i))if(this.mingshu=this.mingshu-1,this.setLife(),0==this.mingshu){this.arrImg.removeChildren(),this.arrHuiImg.removeChildren(),ZJ.AudioManager.Instance.play("shibai",1);var o=ZJ.ResManager.instance.loadDragonBones("js");o.x=this.bgAll.width/2,o.y=this.bgAll.height/2,this.bgAll.addChild(o),o.animation.play("feibiao",1),this.reAnimation(),ZJ.EventManager.instance.addEventListener("Test",this.restart,this)}else this.mingshu>0&&this.createBar()}return!0},e.prototype.createTarget=function(){for(var t=this.bg.x,e=this.bg.y,i=this.bg.width,n=this.bg.height,a=(new YuanJiao).width,s=[0,1,2,3],o=[4,5,6,7],r=4,h=4,u=0;u<this.bashuliang;u++){var l=new Plate;if(l.scaleX=this.targetV,4>u){var c=Math.floor(Math.random()*r),d=s[c];s.splice(c,1),r--}else if(u>=4&&8>u){var c=Math.floor(Math.random()*h),d=o[c];o.splice(c,1),h--}this.plateW=l.width*l.scaleX;var p=this.bgAll.width-this.plateW-a-a-10,g=this.bgAll.height-this.plateW-a-a-10,f=Math.ceil(Math.random()*p+a+5),y=Math.ceil(Math.random()*g+a+5);if(0==d)l.x=f,l.y=e,l.anchorOffsetY=l.height,l.id=this.id,this.id++;else if(1==d)l.rotation=90,l.x=t,l.y=y,l.id=this.id,this.id++;else if(2==d)l.x=f,l.y=e+n,l.id=this.id,this.id++;else if(3==d)l.x=t+i,l.y=y,l.rotation=90,l.anchorOffsetY=l.height,l.id=this.id,this.id++;else if(4==d){for(var v=0;4>v;v++)this.shuzu[v].y==e&&(this.shuzu[v].x>=p/2+a?l.x=Math.ceil(Math.random()*(p/2-this.plateW)+a):l.x=Math.ceil(Math.random()*(p/2-this.plateW)+a+p/2+this.plateW));l.y=e,l.anchorOffsetY=l.height,l.id=this.id,this.id++}else if(5==d){for(var v=0;4>v;v++)this.shuzu[v].x==t&&(this.shuzu[v].y>=g/2+a?l.y=Math.ceil(Math.random()*(g/2-this.plateW)+a):l.y=Math.ceil(Math.random()*(g/2-this.plateW)+a+g/2+this.plateW));l.rotation=90,l.x=t,l.id=this.id,this.id++}else if(6==d){for(var v=0;4>v;v++)this.shuzu[v].y==e+n&&(this.shuzu[v].x>=(i-this.plateW)/2+t?l.x=Math.ceil(Math.random()*(p/2-this.plateW)+a):l.x=Math.ceil(Math.random()*(p/2-this.plateW)+a+p/2+this.plateW));l.y=e+n,l.id=this.id,this.id++}else if(7==d){for(var v=0;4>v;v++)this.shuzu[v].x==t+i&&(this.shuzu[v].y>=g/2+a?l.y=Math.ceil(Math.random()*(g/2-this.plateW)+a):l.y=Math.ceil(Math.random()*(g/2-this.plateW)+a+g/2+this.plateW));l.x=t+i,l.rotation=90,l.anchorOffsetY=l.height,l.id=this.id,this.id++}this.tarImg.addChild(l),this.shuzu.push(l)}},e.prototype.createArrow=function(){var t=new Arrow;return t.x=this.bgAll.width/2,t.y=this.bgAll.height/2,t.anchorOffsetX=t.width/2,t.anchorOffsetY=t.height-18,t.rotation=this.rota,egret.Tween.get(t,{loop:!0}).to({rotation:this.rota+this.arrowR},this.arrowV),this.arrImg.addChild(t),t},e.prototype.createArrowHui=function(){var t=new ArrowHui;return t.x=this.bgAll.width/2,t.y=this.bgAll.height/2,t.anchorOffsetX=t.width/2,t.anchorOffsetY=t.height-18,t.rotation=this.rota,egret.Tween.get(t,{loop:!0}).to({rotation:this.rota+this.arrowR},this.arrowV),this.arrImg.addChild(t),t},e.prototype.runArrow=function(){var t=this.arrow.x,e=this.arrow.y,i=this.arrow.height,n=this.bg.x,a=this.bg.y,s=this.bg.width,o=this.bg.height,r=this.arrow.rotation,h=(new YuanJiao).width,u=(180*Math.atan((s/2-h+n)/(o/2))/Math.PI,180*Math.atan(this.bgAll.width/2/(this.bgAll.height/2))/Math.PI),l=0,c=0,d=0,p=0,g=0,f=0,y=0,v=Math.abs(r-90),m=Math.abs(v*Math.PI/180);l=Math.abs(Math.tan(m));var b=Math.abs(Math.cos(m))*(i-18),_=Math.abs(Math.sin(m))*(i-18);this.bgAll.width-h-h,this.bgAll.height-h-h;r>-180&&-90>r&&(l=-l),r>0&&90>r&&(l=-l),c=e-l*t,r>-u&&u>=r?(p=a,d=(p-c)/l,f=p+_,g=(f-c)/l,(h>d||d>this.bgAll.width-h)&&(h>d?(g=this.getPoint(l,c,h,h,0),f=l*g+c):(g=this.getPoint(l,c,this.bgAll.width-h,h,1),f=l*g+c),f+=_,g=(f-c)/l)):r>u&&180-u>=r?(d=n+s,p=l*d+c,g=d-b,f=l*g+c,(h>p||p>this.bgAll.height-h)&&(h>p?(g=this.getPoint(l,c,this.bgAll.width-h,h,1),f=l*g+c):(g=this.getPoint(l,c,this.bgAll.width-h,this.bgAll.height-h,1),f=l*g+c),g-=b,f=l*g+c)):r>180-u&&180>=r?(p=a+o,d=(p-c)/l,f=p-_,g=(f-c)/l,d>this.bgAll.width-h&&(g=this.getPoint(l,c,this.bgAll.width-h,this.bgAll.height-h,1),f=l*g+c,f-=_,g=(f-c)/l)):r>-180&&-180+u>=r?(p=a+o,d=(p-c)/l,f=p-_,g=(f-c)/l,h>d&&(g=this.getPoint(l,c,h,this.bgAll.height-h,0),f=l*g+c,f-=_,g=(f-c)/l)):r>-180+u&&-u>=r&&(d=n,p=l*d+c,g=d+b,f=l*g+c,(h>p||p>this.bgAll.height-h)&&(h>p?(g=this.getPoint(l,c,h,h,0),f=l*g+c):(g=this.getPoint(l,c,h,this.bgAll.height-h,0),f=l*g+c),g+=b,f=l*g+c)),this.k=l,this.arrX=d,this.arrY=p,y=Math.sqrt((g-t)*(g-t)+(f-e)*(f-e)),egret.Tween.get(this.arrow).to({x:g,y:f},y).call(function(){this.mingshu--,this.shootTarget(),egret.Tween.get(this.arrow).to({alpha:0},150).call(function(){var t=this;if(this.setLife(),this.setFen(),egret.stopTick(this.moveBar,this),this.bar.removeChildren(),0==this.mingshu){this.arrImg.removeChildren(),this.arrHuiImg.removeChildren(),ZJ.AudioManager.Instance.play("shibai",1);var e=ZJ.ResManager.instance.loadDragonBones("js");e.x=g,e.y=f,this.bgAll.addChild(e),e.animation.play("feibiao",1),this.reAnimation(),ZJ.EventManager.instance.addEventListener("Test",this.restart,this)}else this.arrImg.removeChildren(),this.rota=this.arrowHui.rotation,this.arrHuiImg.removeChildren(),this.bashuliang!=this.shootN&&(this.arrow=this.createArrow(),this.createBar()),this.bashuliang==this.shootN&&(this.tarImg.removeChildren(),this.yuanImg.removeChildren(),this.shuzu.splice(0,this.shuzu.length),this.yuanzu.splice(0,this.yuanzu.length),this.id=1,this.guanji++,this.createBar(),this.setConfigure(),this.shootN=0,this.arrow=this.createArrow(),setTimeout(function(){t.createTarget(),t.guanji==t.plateRguan&&(clearInterval(t.dingshi),t.runTarget())},300)),this.i=0},this)},this)},e.prototype.setMask=function(){var t=(new YuanJiao).width,e=new egret.Shape;return e.x=t,e.y=t,e.graphics.beginFill(16777215),e.graphics.drawRect(0,0,t,t),e.graphics.endFill(),e.anchorOffsetX=t,e.anchorOffsetY=t,e.rotation=90-this.jd,e},e.prototype.runTarget=function(){var t=this,e=this.bg.x,i=this.bg.y,n=this.bg.width,a=this.bg.height,s=(new YuanJiao).width,o=(new YuanJiao).height,r=((new Plate).height,(new Plate).width,2*Math.PI*o/4);this.jd=Math.floor(this.plateW/r*90);var h=(90-this.jd)*Math.PI/180;Math.tan(h)*s;this.dingshi=setInterval(function(){for(var h,h,h,h,u=function(){if(t.shuzu[l].y==i&&0==t.shuzu[l].rotation){if(t.shuzu[l].x++,Math.ceil(t.shuzu[l].x)==Math.ceil(t.bgAll.width-s-t.plateW)){var u=new YuanJiao,c=t.shuzu[l].id;u.x=t.bgAll.width-s,u.y=o,u.anchorOffsetX=s,u.anchorOffsetY=s,u.id=c,t.plateW<r&&(h=t.setMask(),u.addChild(h)),u.mask=h,t.yuanzu.push(u),t.yuanImg.addChild(u),egret.Tween.get(u).to({rotation:90},2*s*Math.PI/4*t.targetS).call(function(){for(var t=0;t<this.yuanzu.length;t++){if(this.yuanzu[t].id==c&&this.yuanzu[t].x==this.bgAll.width-s&&this.yuanzu[t].y==s&&90==this.yuanzu[t].rotation&&0!=this.mingshu&&this.bashuliang!=this.shootN){var i=new Plate;i.x=e+n,i.y=s-this.plateW,i.scaleX=this.targetV,i.rotation=90,i.anchorOffsetY=i.height,i.id=c,this.shuzu.push(i),this.tarImg.addChild(i)}if(this.plateW<r)for(var a=0;a<this.yuanzu.length;a++)this.yuanzu[a].id==c&&this.yuanzu[a].x==this.bgAll.width-s&&this.yuanzu[a].y==s&&90==this.yuanzu[a].rotation&&egret.Tween.get(this.yuanzu[a]).to({rotation:180},(2*s*Math.PI/4-.1*this.plateW)*this.targetS).call(function(){for(var t=0;t<this.yuanzu.length;t++)this.yuanzu[t].id==c&&this.yuanzu[t].x==this.bgAll.width-s&&this.yuanzu[t].y==s&&180==this.yuanzu[t].rotation&&0!=this.mingshu&&this.bashuliang!=this.shootN&&(this.yuanzu[t].parent.removeChild(this.yuanzu[t]),this.yuanzu.splice(t,1))},this)}},t)}if(Math.ceil(t.shuzu[l].x)==Math.ceil(t.bgAll.width-s)){var d=t.shuzu[l].id;if(t.shuzu[l].parent.removeChild(t.shuzu[l]),t.shuzu.splice(l,1),t.plateW>=r)for(var p=0;p<t.yuanzu.length;p++)t.yuanzu[p].id==d&&t.yuanzu[p].x==t.bgAll.width-s&&t.yuanzu[p].y==s&&90==t.yuanzu[p].rotation&&egret.Tween.get(t.yuanzu[p]).to({rotation:180},2*s*Math.PI/4*t.targetS).call(function(){for(var t=0;t<this.yuanzu.length;t++)this.yuanzu[t].id==d&&this.yuanzu[t].x==this.bgAll.width-s&&this.yuanzu[t].y==s&&180==this.yuanzu[t].rotation&&0!=this.mingshu&&this.bashuliang!=this.shootN&&(this.yuanzu[t].parent.removeChild(this.yuanzu[t]),this.yuanzu.splice(t,1))},t)}}else if(t.shuzu[l].x==e&&90==t.shuzu[l].rotation){if(t.shuzu[l].y--,Math.ceil(t.shuzu[l].y)==s){var u=new YuanJiao,g=t.shuzu[l].id;u.x=s,u.y=s,u.anchorOffsetX=s,u.anchorOffsetY=s,u.rotation=-90,u.id=g,t.plateW<r&&(h=t.setMask(),u.addChild(h)),u.mask=h,t.yuanzu.push(u),t.yuanImg.addChild(u),egret.Tween.get(u).to({rotation:0},2*s*Math.PI/4*t.targetS).call(function(){for(var t=0;t<this.yuanzu.length;t++){if(this.yuanzu[t].id==g&&this.yuanzu[t].x==s&&this.yuanzu[t].y==s&&0==this.yuanzu[t].rotation&&0!=this.mingshu&&this.bashuliang!=this.shootN){var e=new Plate;e.x=s-this.plateW,e.y=i,e.scaleX=this.targetV,e.anchorOffsetY=e.height,e.id=g,this.shuzu.push(e),this.tarImg.addChild(e)}if(this.plateW<r)for(var n=0;n<this.yuanzu.length;n++)this.yuanzu[n].id==g&&this.yuanzu[n].x==s&&this.yuanzu[n].y==s&&0==this.yuanzu[n].rotation&&egret.Tween.get(this.yuanzu[n]).to({rotation:90},(2*s*Math.PI/4-.1*this.plateW)*this.targetS).call(function(){for(var t=0;t<this.yuanzu.length;t++)this.yuanzu[t].id==g&&this.yuanzu[t].x==s&&this.yuanzu[t].y==s&&90==this.yuanzu[t].rotation&&0!=this.mingshu&&this.bashuliang!=this.shootN&&(this.yuanzu[t].parent.removeChild(this.yuanzu[t]),this.yuanzu.splice(t,1))},this)}},t)}if(Math.ceil(t.shuzu[l].y)==s-t.plateW){var f=t.shuzu[l].id;if(t.shuzu[l].parent.removeChild(t.shuzu[l]),t.shuzu.splice(l,1),t.plateW>=r)for(var p=0;p<t.yuanzu.length;p++)t.yuanzu[p].id==f&&t.yuanzu[p].x==s&&t.yuanzu[p].y==s&&0==t.yuanzu[p].rotation&&egret.Tween.get(t.yuanzu[p]).to({rotation:90},2*s*Math.PI/4*t.targetS).call(function(){for(var t=0;t<this.yuanzu.length;t++)this.yuanzu[t].id==f&&this.yuanzu[t].x==s&&this.yuanzu[t].y==s&&90==this.yuanzu[t].rotation&&0!=this.mingshu&&this.bashuliang!=this.shootN&&(this.yuanzu[t].parent.removeChild(this.yuanzu[t]),this.yuanzu.splice(t,1))},t)}}else if(t.shuzu[l].y==i+a&&0==t.shuzu[l].rotation){if(t.shuzu[l].x--,Math.ceil(t.shuzu[l].x)==Math.ceil(s)){var u=new YuanJiao,y=t.shuzu[l].id;u.x=s,u.y=t.bgAll.height-s,u.anchorOffsetX=s,u.anchorOffsetY=s,u.rotation=180,u.id=y,t.plateW<r&&(h=t.setMask(),u.addChild(h)),u.mask=h,t.yuanzu.push(u),t.yuanImg.addChild(u),egret.Tween.get(u).to({rotation:270},2*s*Math.PI/4*t.targetS).call(function(){for(var t=0;t<this.yuanzu.length;t++){if(this.yuanzu[t].id==y&&this.yuanzu[t].x==s&&this.yuanzu[t].y==this.bgAll.height-s&&-90==this.yuanzu[t].rotation&&0!=this.mingshu&&this.bashuliang!=this.shootN){var i=new Plate;i.x=e,i.y=this.bgAll.height-s,i.scaleX=this.targetV,i.rotation=90,i.id=y,this.shuzu.push(i),this.tarImg.addChild(i)}if(this.plateW<r)for(var n=0;n<this.yuanzu.length;n++)this.yuanzu[n].id==y&&this.yuanzu[n].x==s&&this.yuanzu[n].y==this.bgAll.height-s&&-90==this.yuanzu[n].rotation&&egret.Tween.get(this.yuanzu[n]).to({rotation:0},(2*s*Math.PI/4-.1*this.plateW)*this.targetS).call(function(){for(var t=0;t<this.yuanzu.length;t++)this.yuanzu[t].id==y&&this.yuanzu[t].x==s&&this.yuanzu[t].y==this.bgAll.height-s&&0==this.yuanzu[t].rotation&&0!=this.mingshu&&this.bashuliang!=this.shootN&&(this.yuanzu[t].parent.removeChild(this.yuanzu[t]),this.yuanzu.splice(t,1))},this)}},t)}if(Math.ceil(t.shuzu[l].x)==s-t.plateW){var v=t.shuzu[l].id;if(t.shuzu[l].parent.removeChild(t.shuzu[l]),t.shuzu.splice(l,1),t.plateW>=r)for(var p=0;p<t.yuanzu.length;p++)t.yuanzu[p].id==v&&t.yuanzu[p].x==s&&t.yuanzu[p].y==t.bgAll.height-s&&-90==t.yuanzu[p].rotation&&egret.Tween.get(t.yuanzu[p]).to({rotation:0},2*s*Math.PI/4*t.targetS).call(function(){for(var t=0;t<this.yuanzu.length;t++)this.yuanzu[t].id==v&&this.yuanzu[t].x==s&&this.yuanzu[t].y==this.bgAll.height-s&&0==this.yuanzu[t].rotation&&0!=this.mingshu&&this.bashuliang!=this.shootN&&(this.yuanzu[t].parent.removeChild(this.yuanzu[t]),this.yuanzu.splice(t,1))},t)}}else if(t.shuzu[l].x==e+n&&90==t.shuzu[l].rotation){if(t.shuzu[l].y++,Math.ceil(t.shuzu[l].y)==Math.ceil(t.bgAll.height-s-t.plateW)){var u=new YuanJiao,m=t.shuzu[l].id;u.x=t.bgAll.width-s,u.y=t.bgAll.height-s,u.anchorOffsetX=s,u.anchorOffsetY=s,u.rotation=90,u.id=m,t.plateW<r&&(h=t.setMask(),u.addChild(h)),u.mask=h,t.yuanzu.push(u),t.yuanImg.addChild(u),egret.Tween.get(u).to({rotation:180},2*s*Math.PI/4*t.targetS).call(function(){for(var t=0;t<this.yuanzu.length;t++){if(this.yuanzu[t].id==m&&this.yuanzu[t].x==this.bgAll.width-s&&this.yuanzu[t].y==this.bgAll.height-s&&180==this.yuanzu[t].rotation&&0!=this.mingshu&&this.bashuliang!=this.shootN){var e=new Plate;e.x=this.bgAll.width-s,e.y=i+a,e.scaleX=this.targetV,e.id=m,this.shuzu.push(e),this.tarImg.addChild(e)}if(this.plateW<r)for(var n=0;n<this.yuanzu.length;n++)this.yuanzu[n].id==m&&this.yuanzu[n].x==this.bgAll.width-s&&this.yuanzu[n].y==this.bgAll.height-s&&180==this.yuanzu[n].rotation&&egret.Tween.get(this.yuanzu[n]).to({rotation:270},(2*s*Math.PI/4-.1*this.plateW)*this.targetS).call(function(){for(var t=0;t<this.yuanzu.length;t++)this.yuanzu[t].id==m&&this.yuanzu[t].x==this.bgAll.width-s&&this.yuanzu[t].y==this.bgAll.height-s&&-90==this.yuanzu[t].rotation&&0!=this.mingshu&&this.bashuliang!=this.shootN&&(this.yuanzu[t].parent.removeChild(this.yuanzu[t]),this.yuanzu.splice(t,1))},this)}},t)}if(Math.ceil(t.shuzu[l].y)==Math.ceil(t.bgAll.height-s)){var b=t.shuzu[l].id;if(t.shuzu[l].parent.removeChild(t.shuzu[l]),t.shuzu.splice(l,1),t.plateW>=r)for(var p=0;p<t.yuanzu.length;p++)t.yuanzu[p].id==b&&t.yuanzu[p].x==t.bgAll.width-s&&t.yuanzu[p].y==t.bgAll.height-s&&180==t.yuanzu[p].rotation&&egret.Tween.get(t.yuanzu[p]).to({rotation:270},2*s*Math.PI/4*t.targetS).call(function(){for(var t=0;t<this.yuanzu.length;t++)this.yuanzu[t].id==b&&this.yuanzu[t].x==this.bgAll.width-s&&this.yuanzu[t].y==this.bgAll.height-s&&-90==this.yuanzu[t].rotation&&0!=this.mingshu&&this.bashuliang!=this.shootN&&(this.yuanzu[t].parent.removeChild(this.yuanzu[t]),this.yuanzu.splice(t,1))},t)}}},l=0;l<t.shuzu.length;l++)u()},this.targetS)},e.prototype.countJifen=function(t,e,i){t>=e+.3*(i-e)&&e+.7*(i-e)>=t&&(t>=e+.45*(i-e)&&e+.55*(i-e)>=t?this.jifenN=this.jifenN+2:this.jifenN=this.jifenN+1)},e.prototype.shootTarget=function(){var t=this.bg.x,e=this.bg.y,i=this.bg.width,n=(this.bg.height,null),a=null,s=(new YuanJiao).height,o=s-e;if(this.arrX>=s&&this.arrX<=this.bgAll.width-s||this.arrY>=s&&this.arrY<=this.bgAll.height-s)for(var r=0;r<this.shuzu.length;r++){var h=ZJ.ResManager.instance.loadDragonBones("hk");this.arrX>=this.shuzu[r].x&&this.arrX<=this.shuzu[r].x+this.plateW&&this.arrY==this.shuzu[r].y?(n=this.shuzu[r].id,this.shuzu[r].parent.removeChild(this.shuzu[r]),h.x=this.shuzu[r].x+this.plateW/2,h.y=this.shuzu[r].y,this.bgAll.addChild(h),h.animation.play("guidao",1),ZJ.AudioManager.Instance.play("mingzhongbazi",1),this.arrX>=this.shuzu[r].x+.3*this.plateW&&this.arrX<=this.shuzu[r].x+.7*this.plateW?this.arrX>=this.shuzu[r].x+.45*this.plateW&&this.arrX<=this.shuzu[r].x+.55*this.plateW?this.jifenN=this.jifenN+3:this.jifenN=this.jifenN+2:this.jifenN++,this.shuzu.splice(r,1),this.mingshu++,this.shootN=this.shootN+1):this.arrY>=this.shuzu[r].y&&this.arrY<=this.shuzu[r].y+this.plateW&&this.arrX==this.shuzu[r].x&&(n=this.shuzu[r].id,this.shuzu[r].parent.removeChild(this.shuzu[r]),h.x=this.shuzu[r].x,h.y=this.shuzu[r].y+this.plateW/2,this.bgAll.addChild(h),h.animation.play("guidao",1),ZJ.AudioManager.Instance.play("mingzhongbazi",1),this.arrY>=this.shuzu[r].y+.3*this.plateW&&this.arrY<=this.shuzu[r].y+.7*this.plateW?this.arrY>=this.shuzu[r].y+.45*this.plateW&&this.arrY<=this.shuzu[r].y+.55*this.plateW?this.jifenN=this.jifenN+3:this.jifenN=this.jifenN+2:this.jifenN++,this.shuzu.splice(r,1),this.mingshu++,this.shootN=this.shootN+1)}else for(var u=this.bgAll.width/2,l=this.bgAll.height/2,c=(e-l)/(s-u),d=(s-l)/(t-u),p=(e-l)/(this.bgAll.width-s-u),g=(s-l)/(this.bgAll.width-t-u),f=(this.bgAll.height-s-l)/(this.bgAll.width-t-u),y=(this.bgAll.height-t-l)/(this.bgAll.width-s-u),v=(this.bgAll.height-s-l)/(t-u),m=(this.bgAll.height-t-l)/(s-u),b=2*Math.PI*s/4,_=!1,w=0;w<this.yuanzu.length;w++){a=Math.abs(this.yuanzu[w].rotation)>90?180-Math.abs(this.yuanzu[w].rotation):Math.abs(this.yuanzu[w].rotation);var A=Math.abs(a*Math.PI/180),C=Math.abs(Math.cos(A))*o,M=Math.abs(Math.sin(A))*o;if(Math.abs(this.arrow.rotation)<90){if(this.yuanzu[w].x<i/2&&this.yuanzu[w].y<i/2){if(this.yuanzu[w].rotation<=0&&this.yuanzu[w].rotation>=-90){var I=s-C,E=s-M,z=(I-l)/(E-u);if(this.plateW<b&&this.yuanzu[w].rotation>this.jd-90&&this.yuanzu[w].rotation<0){var S=Math.abs((a+this.jd)*Math.PI/180),T=Math.abs(Math.cos(S))*o,D=Math.abs(Math.sin(S))*o,x=s-T,R=s-D;d=(x-l)/(R-u),this.countJifen(this.k,d,z)}this.k>=d&&this.k<=z&&(_=!0,-90==this.yuanzu[w].rotation&&this.countJifen(this.k,d,c))}else if(this.yuanzu[w].rotation>0&&this.yuanzu[w].rotation<=90){if(this.plateW<b){var S=Math.abs((a+(90-this.jd))*Math.PI/180);C=Math.abs(Math.cos(S))*o,M=Math.abs(Math.sin(S))*o}var I=s-M,E=s-C,z=(I-l)/(E-u);this.k>=z&&this.k<=c&&(_=!0)}}else if(this.yuanzu[w].x>i/2&&this.yuanzu[w].y<i/2)if(this.yuanzu[w].rotation>=0&&this.yuanzu[w].rotation<=90){var I=s-C,E=this.bgAll.width-s+M,z=(I-l)/(E-u);if(this.plateW<b&&this.yuanzu[w].rotation>this.jd&&this.yuanzu[w].rotation<90){var S=Math.abs((a-this.jd)*Math.PI/180),T=Math.abs(Math.cos(S))*o,D=Math.abs(Math.sin(S))*o,x=s-T,R=this.bgAll.width-s+D;p=(x-l)/(R-u),this.countJifen(this.k,p,z)}this.k>=p&&this.k<=z&&(_=!0,90==this.yuanzu[w].rotation&&this.countJifen(this.k,p,g))}else if(this.yuanzu[w].rotation>90&&this.yuanzu[w].rotation<=180){if(this.plateW<b){var S=Math.abs((a-(90-this.jd))*Math.PI/180);C=Math.abs(Math.cos(S))*o,M=Math.abs(Math.sin(S))*o}var I=s-M,E=this.bgAll.width-s+C,z=(I-l)/(E-u);this.k>=z&&this.k<=g&&(_=!0)}}else if(this.yuanzu[w].x>i/2&&this.yuanzu[w].y>i/2)if(this.yuanzu[w].rotation>=90&&this.yuanzu[w].rotation<=180){var E=this.bgAll.width-s+M,I=this.bgAll.height-s+C,z=(I-l)/(E-u);if(this.plateW<b&&this.yuanzu[w].rotation>90+this.jd&&this.yuanzu[w]<180){var S=Math.abs((a+this.jd)*Math.PI/180),T=Math.abs(Math.cos(S))*o,D=Math.abs(Math.sin(S))*o,R=this.bgAll.width-s+D,x=this.bgAll.height-s+T;f=(x-l)/(R-u),this.countJifen(this.k,f,z)}this.k>=f&&this.k<=z&&(_=!0,180==this.yuanzu[w].rotation&&this.countJifen(this.k,f,y))}else{var E=this.bgAll.width-s+C,I=this.bgAll.height-s+M,z=(I-l)/(E-u);if(this.plateW<b){var S=Math.abs((a+(90-this.jd))*Math.PI/180);C=Math.abs(Math.cos(S))*o,M=Math.abs(Math.sin(S))*o}E=this.bgAll.width-s+C,I=this.bgAll.height-s+M,z=(I-l)/(E-u),this.k>=z&&this.k<=y&&(_=!0)}else if(this.yuanzu[w].x<i/2&&this.yuanzu[w].y>i/2)if(this.yuanzu[w].rotation<=-90&&this.yuanzu[w].rotation>=-180){var E=s-M,I=this.bgAll.height-s+C,z=(I-l)/(E-u);if(this.plateW<b&&this.yuanzu[w]>-180+this.jd&&this.yuanzu[w].rotation<-90){var S=Math.abs((a-this.jd)*Math.PI/180),T=Math.abs(Math.cos(S))*o,D=Math.abs(Math.sin(S))*o,R=s-D,x=this.bgAll.height-s+T;m=(x-l)/(R-u),this.countJifen(this.k,m,z)}this.k>=m&&this.k<=z&&(_=!0,-180==this.yuanzu[w].rotation&&this.countJifen(this.k,m,v))}else{if(this.plateW<b){var S=Math.abs((a-(90-this.jd))*Math.PI/180);C=Math.abs(Math.cos(S))*o,M=Math.abs(Math.sin(S))*o}var E=s-C,I=this.bgAll.height-s+M,z=(I-l)/(E-u);this.k>=z&&this.k<=v&&(_=!0)}if(_){n=this.yuanzu[w].id,this.yuanzu[w].parent.removeChild(this.yuanzu[w]);var h=ZJ.ResManager.instance.loadDragonBones("hk");h.x=this.yuanzu[w].x,h.y=this.yuanzu[w].y,this.bgAll.addChild(h),h.animation.play("guidao",1),this.yuanzu.splice(w,1),this.mingshu++,this.jifenN=this.jifenN+1,this.shootN=this.shootN+1;break}}for(var w=0;w<this.shuzu.length;w++)this.shuzu[w].id==n&&(this.shuzu[w].parent.removeChild(this.shuzu[w]),this.shuzu.splice(w,1));for(var w=0;w<this.yuanzu.length;w++)if(this.yuanzu[w].id==n){var h="yuan"+this.yuanzu[w].name;this[h]=0,this.yuanzu[w].parent.removeChild(this.yuanzu[w]),this.yuanzu.splice(w,1)}},e.prototype.restart=function(t){var e=this;this.bgAll.removeEventListener("touchTap",this.setClick,this),this.i=0,this.djs.animation.play("djs",1),this.dituo.visible=!0,this.guidao.visible=!0,this.guidao1.visible=!0,this.guidao2.visible=!0,this.guidao3.visible=!0,this.guidao4.visible=!0,this.jifen.visible=!0,this.bardi.visible=!0,this.life.visible=!0,this.guanji=1,this.setConfigure(),this.mingshu=this.MING_SHU,this.jifenN=0,this.shootN=0,this.id=1,this.createMain(),setTimeout(function(){e.createBar(),e.bgAll.addEventListener("touchTap",e.setClick,e)},2330)},e.prototype.reAnimation=function(){var t=this;clearInterval(this.dingshi),egret.stopTick(this.moveBar,this),this.bar.removeChildren(),this.tarImg.removeChildren(),this.yuanImg.removeChildren(),this.shuzu.splice(0,this.shuzu.length),this.yuanzu.splice(0,this.yuanzu.length);var e=ZJ.ResManager.instance.loadDragonBones("js");e.x=this.bgAll.width/2,e.y=this.bgAll.height/2,this.bgAll.addChild(e),e.animation.play("bazi",1),this.dituo.visible=!1,this.guidao.visible=!1,this.guidao1.visible=!1,this.guidao2.visible=!1,this.guidao3.visible=!1,this.guidao4.visible=!1,this.jifen.visible=!1,this.bardi.visible=!1,this.life.visible=!1;var i=ZJ.ResManager.instance.loadDragonBones("js");i.x=this.bgAll.width/2,this.bgAll.addChild(i),i.animation.play("guidao",1);var n=ZJ.ResManager.instance.loadDragonBones("js");n.y=this.bgAll.height/2,this.bgAll.addChild(n),n.animation.play("guidao",1);var a=ZJ.ResManager.instance.loadDragonBones("js");a.x=this.bgAll.width/2,a.y=this.bgAll.height,this.bgAll.addChild(a),a.animation.play("guidao",1);var s=ZJ.ResManager.instance.loadDragonBones("js");s.x=this.bgAll.width,s.y=this.bgAll.height/2,this.bgAll.addChild(s),s.animation.play("guidao",1);for(var o=0;o<this.shuzu.length;o++){var r=ZJ.ResManager.instance.loadDragonBones("hk");this.bgAll.addChild(r),r.x=this.shuzu[o].x,r.y=this.shuzu[o].y,this.shuzu[o].y==this.bg.y||this.shuzu[o].y==this.bg.y+this.bg.height?r.x=this.shuzu[o].x+this.plateW/2:r.y=this.shuzu[o].y+this.plateW/2,r.animation.play("guidao",1)}setTimeout(function(){var e=ZJ.UIManager.instance.openView(UIName.Settle);e.setData({score:t.jifenN}),ZJ.AudioManager.Instance.play("jiesuantanchu",1)},1e3)},e.prototype.setLife=function(){2==this.mingshu?this.life3.source="lifeHui_png":1==this.mingshu?this.life2.source="lifeHui_png":0==this.mingshu?this.life1.source="lifeHui_png":3==this.mingshu&&(this.life1.source="lifeRed_png",this.life2.source="lifeRed_png",this.life3.source="lifeRed_png")},e.prototype.setFen=function(){if(this.jifenN<10)this.jifen1.visible=!1,this.jifen2.visible=!1,this.jifen3.source=this.jifenN+"_png";else if(this.jifenN>=10&&this.jifenN<100){var t=this.jifenN%10,e=(this.jifenN-t)/10;this.jifen1.visible=!1,this.jifen2.visible=!0,this.jifen2.source=e+"_png",this.jifen3.source=t+"_png"}else if(this.jifenN>=100&&this.jifenN<1e3){var t=this.jifenN%10,e=(this.jifenN-t)%100/10,i=(this.jifenN-10*e-t)/100;this.jifen1.visible=!0,this.jifen2.visible=!0,this.jifen1.source=i+"_png",this.jifen2.source=e+"_png",this.jifen3.source=t+"_png"}},e.prototype.setConfigure=function(){for(var t=/\d+/g,e=ZJ.TableManager.instance.tables[xlsx.cfg_c_xiaoli].TARGET_NUM[xlsx.c_xiaoli_data].match(t),i=0;i<e.length;i+=2)if(this.guanji>=e[i]){if(this.guanji>=e[i+2])continue;this.bashuliang=e[i+1]}for(var n=ZJ.TableManager.instance.tables[xlsx.cfg_c_xiaoli].TARGET_MOVE_TYPE[xlsx.c_xiaoli_data].match(t),i=0;i<n.length;i+=5)if(this.guanji>=n[i]){if(this.guanji>=n[i+5])continue;if(Math.ceil(100*Math.random())<n[i+4]){this.plateRguan=this.guanji;for(var a=ZJ.TableManager.instance.tables[xlsx.cfg_c_xiaoli].TARGET_MOVE_SPEED[xlsx.c_xiaoli_data].match(t),s=0;s<a.length;s+=3)if(this.guanji>=a[s]){if(this.guanji>=a[s+3])continue;this.targetS=Math.ceil(parseInt(a[s+1])+Math.random()*(a[s+2]-a[s+1]))}}}for(var o=ZJ.TableManager.instance.tables[xlsx.cfg_c_xiaoli].TARGET_LENGTH[xlsx.c_xiaoli_data].match(t),i=0;i<o.length;i+=3)if(this.guanji>=o[i]){if(this.guanji>=o[i+3])continue;this.targetV=Math.ceil(parseInt(o[i+1])+Math.random()*(o[i+2]-o[i+1]))}for(var r=ZJ.TableManager.instance.tables[xlsx.cfg_c_xiaoli]["DARTS_ROTATE_DIREC "][xlsx.c_xiaoli_data].match(t),i=0;i<r.length;i+=3)this.guanji>=r[i]&&(Math.ceil(100*Math.random())<r[i+1]?this.arrowR=360:this.arrowR=-360);for(var h=ZJ.TableManager.instance.tables[xlsx.cfg_c_xiaoli].DARTS_ROTATE_SPEED[xlsx.c_xiaoli_data].match(t),i=0;i<h.length;i+=2)this.guanji>=h[i]&&(this.arrowV=h[i+1]);for(var u=ZJ.TableManager.instance.tables[xlsx.cfg_c_xiaoli].TIME_LIMIT[xlsx.c_xiaoli_data].match(t),i=0;i<u.length;i+=2)this.guanji>=u[i]&&(this.time=u[i+1])},e.prototype.getPoint=function(t,e,i,n,a){var s=(new YuanJiao).width,o=this.bg.x,r=1+Math.pow(t,2),h=2*t*(e-n)-2*i,u=Math.pow(i,2)+Math.pow(e-n,2)-Math.pow(s-o,2),l=Math.pow(h,2)-4*r*u;if(0==a)var c=(-h-Math.sqrt(l))/(2*r);else if(1==a)var c=(-h+Math.sqrt(l))/(2*r);return c},e}(ZJ.ViewBase);__reflect(GameView.prototype,"GameView");var LoadingView=function(t){function e(){var e=t.call(this)||this;return e.intervalID=0,e.ran1=0,e.ran2=0,e.skinName="resource/eui_skins/view/LoadingView.exml",e}return __extends(e,t),e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this);var e=ZJ.ShapeUtil.getRect(0,1,this.stage.stageWidth,this.stage.stageHeight);this.black.addChild(e)},e.prototype.onProgress=function(t,e){this.load1.text=Math.floor(t/e*100)+"%"},e.prototype.onDestroy=function(){return t.prototype.onDestroy.call(this),clearInterval(this.intervalID),0},e}(ZJ.ViewBase);__reflect(LoadingView.prototype,"LoadingView");var SettleView=function(t){function e(){var e=t.call(this)||this;return e.SHOW_TIME=3e3,e.toPlatform="",e.timeoutid=0,e.skinName="SettleViewSkin",e}return __extends(e,t),e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this);var e=ZJ.ShapeUtil.getRect(16777215,0,this.stage.stageWidth,this.stage.stageHeight);this.gBg.addChild(e),this.game=ZJ.UIManager.instance.openView(UIName.Game),this.restart.addEventListener("touchTap",function(){var t=new egret.Event(EventName.Test);ZJ.EventManager.instance.dispatchEvent(t),ZJ.UIManager.instance.destroyView(UIName.Settle)},this)},e}(ZJ.ViewBase);__reflect(SettleView.prototype,"SettleView");var ModuleStartUp=function(){function t(){}return t.init=function(){return ZJ.SocketManager.instance.setCompany(1),ZJ.AudioManager.Instance.bgm="bg",ZJ.AudioManager.Instance.playBgm(),ModuleConfig.compile.single&&(ModuleConfig.uiDatas[UIName.Settle].viewClass=SettleSingleView),ZJ.UIManager.instance.openView(UIName.Game),0},t}();__reflect(ModuleStartUp.prototype,"ModuleStartUp");var ZJ;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),Object.defineProperty(e,"instance",{get:function(){return this._instance},enumerable:!0,configurable:!0}),e.prototype.init=function(){return 0},e._instance=new e,e}(egret.EventDispatcher);t.EventManager=e,__reflect(e.prototype,"ZJ.EventManager")}(ZJ||(ZJ={}));var ZJ;!function(t){var e=function(){function e(){}return e.randomRange=function(e,i,n){null==n&&(n=t.Util.timeStamp());var a=this.randomSeed(n);return a/=233280,Math.floor(e+a*(i-e))},e.randomSeed=function(t){return t=(9301*t+49297)%233280},e.YiYuanErCi=function(t,e,i){var n,a,s,o=[];return n=e*e-4*t*i,0>n||(a=(-1*e+Math.sqrt(n))/(2*t),s=(-1*e-Math.sqrt(n))/(2*t),o.push(a),o.push(s)),o
},e}();t.MathUtil=e,__reflect(e.prototype,"ZJ.MathUtil")}(ZJ||(ZJ={}));var ZJ;!function(t){var e=function(){function e(){this.aa=null,this.stage=null,this.dbFactory=dragonBones.EgretFactory.factory,this.dbFileNames=[]}return Object.defineProperty(e,"instance",{get:function(){return this._instance},enumerable:!0,configurable:!0}),e.prototype.init=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return this.stage=t,this.aa=new AssetAdapter,[4,this.loadConfig("resource/default.res.json","resource/")];case 1:return e.sent(),[4,this.loadTheme()];case 2:return e.sent(),[2]}})})},e.prototype.loadRes=function(t,e,i,n){this.aa.getAsset(t,e,i,n)},e.prototype.loadExistRes=function(t){return RES.getRes(t)},e.prototype.loadConfig=function(t,e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(i){switch(i.label){case 0:return[4,RES.loadConfig(t,e)];case 1:return i.sent(),[2]}})})},e.prototype.loadGroup=function(t,e,i){return void 0===e&&(e=0),void 0===i&&(i=null),__awaiter(this,void 0,void 0,function(){var n;return __generator(this,function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,RES.loadGroup(t,e,i)];case 1:return a.sent(),[3,3];case 2:return n=a.sent(),console.error(n),[3,3];case 3:return[2]}})})},e.prototype.loadTheme=function(){var t=this;return new Promise(function(e,i){var n=new eui.Theme("resource/default.thm.json",t.stage);n.addEventListener(eui.UIEvent.COMPLETE,function(){e()},t)})},e.prototype.loadMovieClip=function(e,i,n){t.ResManager.instance.loadRes(e+"_json",function(a,s){var o=a;t.ResManager.instance.loadRes(e+"_png",function(t,e){var a=t,s=new egret.MovieClipDataFactory(o,a),r=new egret.MovieClip(s.generateMovieClipData(i));n(r,s)},this)},this)},e.prototype.loadDragonBones=function(t,e){if(void 0===e&&(e=""),""==e&&(e=t),-1==this.dbFileNames.indexOf(t)){var i=this.loadExistRes(t+"_ske_json"),n=this.loadExistRes(t+"_tex_json"),a=this.loadExistRes(t+"_tex_png");this.dbFactory.parseDragonBonesData(i),this.dbFactory.parseTextureAtlasData(n,a),this.dbFileNames.push(t)}var s=this.dbFactory.buildArmatureDisplay(e);return s},e.prototype.replaceDBSlotDisplay=function(t,e,i,n,a){void 0===e&&(e=""),""==e&&(e=t),this.dbFactory.replaceSlotDisplay(t,e,i,n,a)},e._instance=new e,e}();t.ResManager=e,__reflect(e.prototype,"ZJ.ResManager")}(ZJ||(ZJ={}));var ZJ;!function(t){var e=function(){function t(){}return t.getRect=function(t,e,i,n,a,s){void 0===a&&(a=0),void 0===s&&(s=0);var o=new egret.Shape;return o.graphics.beginFill(t,e),o.graphics.drawRect(a,s,i,n),o.graphics.endFill(),o},t.getCircle=function(t,e,i,n,a){void 0===n&&(n=0),void 0===a&&(a=0);var s=new egret.Shape;return s.graphics.beginFill(t,e),s.graphics.drawCircle(n,a,i),s.graphics.endFill(),s},t.getLine=function(t,e,i,n,a,s,o){var r=new egret.Shape;return r.graphics.lineStyle(i,t,e),r.graphics.moveTo(n,a),r.graphics.lineTo(s,o),r.graphics.endFill(),r},t.getArc=function(t,e,i,n,a,s,o,r,h){void 0===o&&(o=!1),void 0===r&&(r=0),void 0===h&&(h=0);var u=new egret.Shape;return u.graphics.lineStyle(i,t,e),u.graphics.drawArc(r,h,n,Math.PI/180*a,Math.PI/180*s,o),u.graphics.endFill(),u},t.getArch=function(t,e,i,n,a,s,o,r){void 0===s&&(s=!1),void 0===o&&(o=0),void 0===r&&(r=0);var h=new egret.Shape;return h.graphics.beginFill(t,e),h.graphics.drawArc(o,r,i,Math.PI/180*n,Math.PI/180*a,s),h.graphics.endFill(),h},t.setArcMask=function(t,e,i,n,a,s,o){void 0===a&&(a=!1),void 0===s&&(s=t.x),void 0===o&&(o=t.y);var r;null!=t.mask?r=t.mask:(r=new egret.Shape,t.parent.addChild(r));var h=Math.round(i+360*n)*Math.PI/180;i*=Math.PI/180,r.graphics.clear(),r.graphics.beginFill(16711680,1),r.graphics.lineTo(e,0),r.graphics.drawArc(s,o,e,i,h,a),r.graphics.lineTo(s,o),r.graphics.endFill(),r.x=t.x,r.y=t.y,t.mask=r},t}();t.ShapeUtil=e,__reflect(e.prototype,"ZJ.ShapeUtil")}(ZJ||(ZJ={}));var ZJ;!function(t){var e=function(t){function e(e,i,n,a){var s=t.call(this,e,i,n,a)||this;return s.data=null,s}return __extends(e,t),e}(egret.Event);t.SocketDataEvent=e,__reflect(e.prototype,"ZJ.SocketDataEvent")}(ZJ||(ZJ={}));var ZJ;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.socket=null,t.ProtoBufRoot=new protobuf.Root,t.send=null,t.onSocketData=null,t.getProtoByID=null,t._company=1,t.clientIndex=0,t}return __extends(i,e),Object.defineProperty(i,"instance",{get:function(){return this._instance},enumerable:!0,configurable:!0}),i.prototype.init=function(){return this.parseProto(),this.socket=new egret.WebSocket,this.socket.type=egret.WebSocket.TYPE_BINARY,this.setCompany(1),this.socket.addEventListener(egret.ProgressEvent.SOCKET_DATA,this.onSocketData,this),this.socket.addEventListener(egret.Event.CONNECT,this.onSocketConnect,this),0},i.prototype.parseProto=function(){for(var t=this.ProtoBufRoot,e=ModuleConfig.protoFiles,i=0,n=e.length;n>i;++i){var a=RES.getRes(e[i]);protobuf.parse(a,t)}},i.prototype.setCompany=function(t){switch(this._company=t,t){case 2:this.send=this.sendYouai,this.onSocketData=this.onSocketDataYouai,this.getProtoByID=this.getProtoByIDYouai;break;case 3:this.send=this.sendAli,this.getProtoByID=this.getProtoByIDHuoshu;break;default:this.send=this.sendHuoshu,this.onSocketData=this.onSocketDataHuoshu,this.getProtoByID=this.getProtoByIDHuoshu}},i.prototype.connect=function(t,e){this.socket.connect(t,e)},i.prototype.connectByUrl=function(t){this.socket.connectByUrl(t)},i.prototype.close=function(){this.socket.close()},i.prototype.onSocketConnect=function(e){var i=new egret.Event(t.CommonEventName.SOCKET_CONNECTED);this.dispatchEvent(i)},i.prototype.buildSmallShitByID=function(t,e){var i=this.getProtoByID(t,!0),n=this.buildSmallShit(i,e);return n},i.prototype.decodeShitByID=function(t,e){var i=this.getProtoByID(t,!1),n=this.decodeShit(i,e);return n},i.prototype.buildSmallShit=function(t,e){var i=t.create(e),n=t.encode(i),a=n.finish();return a},i.prototype.decodeShit=function(t,e){var i=t.decode(e);return i},i.prototype.sendHuoshu=function(t,e){void 0===e&&(e={}),console.log("send: "+t),console.log(e);var i=this.buildSmallShitByID(t,e),n=new egret.ByteArray;n.writeInt(i.byteLength),n.writeShort(t),n._writeUint8Array(i),this.socket.writeBytes(n)},i.prototype.onSocketDataHuoshu=function(e){var i=new egret.ByteArray;this.socket.readBytes(i);var n=(i.readInt(),i.readShort()),a=this.decodeShitByID(n,i.bytes.subarray(6));console.log("receive: "+n),console.log(a);var s=new t.SocketDataEvent(t.CommonEventName.SOCKET_DATA);s.data={data:a,protoID:n},this.dispatchEvent(s)},i.prototype.getProtoByIDHuoshu=function(e,i){var n=(Math.floor(e/1e3),""),a="";a=i?"cs_":"sc_",n=a+e;var s=t.SocketManager.instance.ProtoBufRoot,o=s.lookupType(n);return o},i.prototype.sendYouai=function(t,e){void 0===e&&(e={});var i=this.buildSmallShitByID(t,e),n=this.buildSmallShitByID(99999,{messageId:t,clientIndex:this.clientIndex++,data:i}),a=new egret.ByteArray(n);this.socket.writeBytes(a)},i.prototype.onSocketDataYouai=function(e){var i=new egret.ByteArray;this.socket.readBytes(i);var n=this.decodeShitByID(99999,i.bytes),a="",s={},o=n.result,r=n.messageId;n.result?s=this.decodeShitByID(n.messageId,n.data):a=t.Util.Utf8ArrayToStr(n.data);var h=new t.SocketDataEvent(t.CommonEventName.SOCKET_DATA);h.data={data99999:n,error:a,result:o,data:s,protoID:r},this.dispatchEvent(h)},i.prototype.getProtoByIDYouai=function(e,i){var n="";if(i)switch(e){case 99999:n="ClientCmdData";break;case 1e3:n="CmdLoginGameReqMsg";break;case 1001:n="CmdPingReqMsg";break;case 1300:n="CmdJumperUploadAnswerReqMsg";break;case 1303:n="CmdJumperGameOverReqMsg"}else switch(e){case 99999:n="ServerCmdData";break;case 1e3:n="CmdLoginGameRspMsg";break;case 1001:n="CmdPingRspMsg";break;case 1300:n="CmdJumperUploadAnswerRspMsg";break;case 1303:n="CmdJumperGameOverRspMsg";break;case 1399:n="CmdBroadcastJumperBC"}var a=t.SocketManager.instance.ProtoBufRoot,s=a.lookupType(n);return s},i.prototype.sendAli=function(t,e){void 0===e&&(e={});var i=this.buildSmallShitByID(t,e),n=new egret.ByteArray;n.writeInt(i.byteLength),n.writeShort(t),n._writeUint8Array(i),ALISDK.CatcherSDK.instance().sendData(n.buffer)},i.prototype.onSocketDataAli=function(e){var i=new egret.ByteArray(e),n=(i.readInt(),i.readShort()),a=this.decodeShitByID(n,i.bytes.subarray(6));console.log("receive: "+n),console.log(a);var s=new t.SocketDataEvent(t.CommonEventName.SOCKET_DATA);s.data={data:a,protoID:n},this.dispatchEvent(s)},i.prototype.connectByUrlAli=function(e){var i=this;ALISDK.CatcherSDK.init({url:"ws://"+e.ip+":"+e.port+"/ws/game",gameVersion:"0.0.1",gameId:"123123",messageType:"ARRAYBUFFER"}),ALISDK.CatcherSDK.instance().on("CONNECT",function(e){var n=new t.ChannelDataEvent(t.CommonEventName.CHANNEL_DATA);n.data={eventName:"CONNECT",event:e},i.dispatchEvent(n)}).on("PROGRESS",function(e){var n=new t.ChannelDataEvent(t.CommonEventName.CHANNEL_DATA);n.data={eventName:"PROGRESS",event:e},i.dispatchEvent(n)}).on("READY",function(e){var n=new t.ChannelDataEvent(t.CommonEventName.CHANNEL_DATA);n.data={eventName:"READY",event:e},i.dispatchEvent(n)}).on("KICK",function(e){var n=new t.ChannelDataEvent(t.CommonEventName.CHANNEL_DATA);n.data={eventName:"KICK",event:e},i.dispatchEvent(n)}).on("GAMEOVER",function(e){var n=new t.ChannelDataEvent(t.CommonEventName.CHANNEL_DATA);n.data={eventName:"GAMEOVER",event:e},i.dispatchEvent(n)}).on("BREAK",function(e){var n=new t.ChannelDataEvent(t.CommonEventName.CHANNEL_DATA);n.data={eventName:"BREAK",event:e},i.dispatchEvent(n)}).on("CONTINUE",function(e){var n=new t.ChannelDataEvent(t.CommonEventName.CHANNEL_DATA);n.data={eventName:"CONTINUE",event:e},i.dispatchEvent(n)}).on("ERROR",function(e){var n=new t.ChannelDataEvent(t.CommonEventName.CHANNEL_DATA);n.data={eventName:"ERROR",event:e},i.dispatchEvent(n)}).on("MIC_CHANGE",function(e){var n=new t.ChannelDataEvent(t.CommonEventName.CHANNEL_DATA);n.data={eventName:"MIC_CHANGE",event:e},i.dispatchEvent(n)}).on("AUDIO_CHANGE",function(e){var n=new t.ChannelDataEvent(t.CommonEventName.CHANNEL_DATA);n.data={eventName:"AUDIO_CHANGE",event:e},i.dispatchEvent(n)}).on("MESSAGE",function(t){i.onSocketDataAli(t.data)}).start()},i._instance=new i,i}(egret.EventDispatcher);t.SocketManager=e,__reflect(e.prototype,"ZJ.SocketManager")}(ZJ||(ZJ={}));var ZJ;!function(t){var e=function(){function e(){this._tables={}}return Object.defineProperty(e,"instance",{get:function(){return this._instance},enumerable:!0,configurable:!0}),e.prototype.init=function(){return this.load("bg_djw_png"),0},Object.defineProperty(e.prototype,"tables",{get:function(){return this._tables},enumerable:!0,configurable:!0}),e.prototype.load=function(e){t.ResManager.instance.loadRes(e,function(e){for(var i=new JSZip(e),n=i.file(/^[tc].*/),a=0,s=n.length;s>a;a++){var o=n[a],r=t.Util.strFormat("shared/{0}",o.name);this._tables[r]=JSON.parse(o.asText())}t.EventManager.instance.dispatchEvent(new egret.Event(t.CommonEventName.TABLE_LOADED))},this)},e._instance=new e,e}();t.TableManager=e,__reflect(e.prototype,"ZJ.TableManager")}(ZJ||(ZJ={}));var ThemeAdapter=function(){function t(){}return t.prototype.getTheme=function(t,e,i,n){function a(t){e.call(n,t)}function s(e){e.resItem.url==t&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,s,null),i.call(n))}"undefined"!=typeof generateEUI?egret.callLater(function(){e.call(n,generateEUI)},this):(RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,s,null),RES.getResByUrl(t,a,this,RES.ResourceItem.TYPE_TEXT))},t}();__reflect(ThemeAdapter.prototype,"ThemeAdapter",["eui.IThemeAdapter"]);var AssetAdapter=function(){function t(){}return t.prototype.getAsset=function(t,e,i,n){function a(n){e.call(i,n,t)}if(void 0===n&&(n=RES.ResourceItem.TYPE_IMAGE),RES.hasRes(t)){var s=RES.getRes(t);s?a(s):RES.getResAsync(t,a,this)}else RES.getResByUrl(t,a,this,n)},t}();__reflect(AssetAdapter.prototype,"AssetAdapter",["eui.IAssetAdapter"]);var ZJ;!function(t){var e=function(){function t(){this._uiLayers=[],this.uiDatas={},this.uiroot=null,this.views={}}return Object.defineProperty(t,"instance",{get:function(){return this._instance},enumerable:!0,configurable:!0}),t.prototype.init=function(t){return this.uiroot=t,0},Object.defineProperty(t.prototype,"uiLayers",{set:function(t){if(this._uiLayers.length>0)egret.warn("uiLayers已经设定。");else{this._uiLayers=t;for(var e=0,i=this._uiLayers.length;i>e;++e){var n=new eui.Group;n.name="layer"+e,n.touchEnabled=!1,this.uiroot.addChild(n),n.percentWidth=100,n.percentHeight=100}}},enumerable:!0,configurable:!0}),t.prototype.getUIData=function(t){return this.uiDatas[t]},t.prototype.getView=function(t){return this.views[t]},t.prototype.openView=function(t){var e=this.getUIData(t);if(void 0==e)return egret.log("ModuleConfig没有界面配置: "+t),null;var i=this.getView(t);if(void 0!=i);else{if(i=new e.viewClass,void 0==i)return console.warn("viewClass不存在 请检查ModuleConfig.uiDatas"),null;i.percentWidth=100,i.percentHeight=100,this.views[t]=i;var n=0;e.layer<this.uiroot.numChildren&&(n=e.layer),this.uiroot.getChildAt(n).addChild(i)}return i.visible=!0,i.parent.setChildIndex(i,9999),i.show(),i},t.prototype.destroyView=function(t){var e=this.getView(t);return void 0!=e&&null!=e&&(e.onDestroy(),e.parent.removeChild(e),this.views[t]=null),0},t._instance=new t,t}();t.UIManager=e,__reflect(e.prototype,"ZJ.UIManager")}(ZJ||(ZJ={}));var ZJ;!function(t){var e=function(){function t(){}return t.getChar=function(t,e){var i=new egret.ByteArray;return i.writeUTFBytes(t),i.length<e?t:(i.position=0,i.readUTFBytes(e)+"...")},t.strFormat=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];return t.replace(/\{(\d+)\}/g,function(t,i){return e[i]})},t.timeStamp=function(t){return t=t||(new Date).toString(),Date.parse(t)/1e3},t.Utf8ArrayToStr=function(t){var e,i,n,a,s,o;for(e="",n=t.length,i=0;n>i;)switch(a=t[i++],a>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:e+=String.fromCharCode(a);break;case 12:case 13:s=t[i++],e+=String.fromCharCode((31&a)<<6|63&s);break;case 14:s=t[i++],o=t[i++],e+=String.fromCharCode((15&a)<<12|(63&s)<<6|(63&o)<<0)}return e},t.getClassName=function(t){if(t&&t.constructor&&t.constructor.toString()){if(t.constructor.name)return t.constructor.name;var e=t.constructor.toString();if("["==e.charAt(0))var i=e.match(/\[\w+\s*(\w+)\]/);else var i=e.match(/function\s*(\w+)/);if(i&&2==i.length)return i[1]}},t.objToByteArray=function(t){var e=JSON.stringify(t),i=new egret.ByteArray;return i.writeUTF(e),i},t.bytesToObj=function(t){var e=new egret.ByteArray(t),i=JSON.parse(e.readUTF());return i},t.rmArrayObj=function(t,e){return-1!=t.indexOf(e)?t.splice(t.indexOf(e),1):void 0},t}();t.Util=e,__reflect(e.prototype,"ZJ.Util")}(ZJ||(ZJ={}));var ZJ;!function(t){var e=function(){function t(t,e,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),this.x=0,this.y=0,this.z=0,this.x=t,this.y=e,this.z=i}return t}();t.Vector3=e,__reflect(e.prototype,"ZJ.Vector3")}(ZJ||(ZJ={}));var ZJ;!function(t){var e=function(){function e(){this.bgm="bgm",this._isMute=!1,this.sounds={},this.soundsChannel={}}return Object.defineProperty(e,"Instance",{get:function(){return this._instance},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isMute",{get:function(){return this._isMute},set:function(t){this._isMute=t,this._isMute?this.stopAll():(this.stopBgm(),this.playBgm())},enumerable:!0,configurable:!0}),e.prototype.playBgm=function(t,e){void 0===t&&(t=0),void 0===e&&(e=1),this._isMute||null!=this.bgm&&""!=this.bgm&&this.play(this.bgm,t,e)},e.prototype.stopBgm=function(){this.stop(this.bgm)},e.prototype.play=function(e,i,n){var a=this;void 0===i&&(i=1),void 0===n&&(n=1);var s=e+"_mp3";if(!this._isMute)if(null!=this.sounds[e]){var o=this.sounds[e].play(0,i);this.soundsChannel[e]=o,o.volume=n}else t.ResManager.instance.loadRes(s,function(t,s){var o=t,r=o.play(0,i);r.volume=n,a.sounds[e]=o,a.soundsChannel[e]=r},this)},e.prototype.stop=function(t){null!=this.soundsChannel[t]&&(this.soundsChannel[t].stop(),this.soundsChannel[t]=null)},e.prototype.stopAll=function(){for(var t in this.soundsChannel)this.stop(t)},e.prototype.getSound=function(t){return this.sounds[t]},e.prototype.getChannel=function(t){return this.soundsChannel[t]},e.prototype.init=function(e){e.addEventListener(egret.Event.ACTIVATE,function(){t.AudioManager.Instance.playBgm(0)},this),e.addEventListener(egret.Event.DEACTIVATE,function(){t.AudioManager.Instance.stopAll()},this)},e._instance=new e,e}();t.AudioManager=e,__reflect(e.prototype,"ZJ.AudioManager")}(ZJ||(ZJ={}));var ZJ;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.cb=null,t.leftSecond=0,t.intervalID=0,t.isPause=!1,t.skinName="CountDownSkin",t}return __extends(i,e),i.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},i.prototype.start=function(t){var e=this;this.stop(),this.isPause=!1,this.leftSecond=t,this.count(),this.intervalID=setInterval(function(){e.count()},1e3)},i.prototype.pause=function(){this.isPause=!0},i.prototype.resume=function(){this.isPause=!1},i.prototype.stop=function(){clearInterval(this.intervalID)},i.prototype.setSecond=function(e){var i=Math.floor(e/60)%60,n=e%60,a=this.checkTime(i),s=this.checkTime(n);this.label.text=t.Util.strFormat("{0}:{1}",a,s)},i.prototype.count=function(){return this.setSecond(this.leftSecond),0==this.leftSecond?(this.stop(),void(null!=this.cb&&this.cb())):void(this.isPause||this.leftSecond--)},i.prototype.checkTime=function(t){return 10>t&&(t="0"+t),t},i.prototype.OnDestroy=function(){this.cb=null,this.stop()},i}(eui.Component);t.CountDown=e,__reflect(e.prototype,"ZJ.CountDown",["eui.UIComponent","egret.DisplayObject"])}(ZJ||(ZJ={}));var ZJ;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.INTERVAL=60,i.DISTANCE=20,i.pastTime=0,i.lastPos=new t.Vector3,i.nowPos=new t.Vector3,i.isBegin=!1,i.intervalID=0,i}return __extends(i,e),i.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},i.prototype.childrenCreated=function(){var t=this;e.prototype.childrenCreated.call(this),this.layer.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this),this.layer.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this),this.layer.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this),this.intervalID=setInterval(function(){t.onInterval()},this.INTERVAL)},i.prototype.onInterval=function(){if(this.isBegin){var e=this.nowPos.x-this.lastPos.x,i=this.nowPos.y-this.lastPos.y,n=Math.abs(e),a=Math.abs(i),s={};if(n>a?n>this.DISTANCE&&(e>0?s.direct=t.CommonConfig.RIGHT:s.direct=t.CommonConfig.LEFT,this.isBegin=!1):a>this.DISTANCE&&(i>0?s.direct=t.CommonConfig.DOWN:s.direct=t.CommonConfig.UP,this.isBegin=!1),!this.isBegin){var o=new egret.Event(t.CommonEventName.GESTURE_DIRECT);o.data=s,t.EventManager.instance.dispatchEvent(o)}this.lastPos.x=this.nowPos.x,this.lastPos.y=this.nowPos.y}},i.prototype.onTouchBegin=function(t){this.pastTime=0,this.nowPos.x=t.stageX,this.nowPos.y=t.stageY,this.lastPos.x=t.stageX,this.lastPos.y=t.stageY,this.isBegin=!0},i.prototype.onTouchEnd=function(t){this.isBegin=!1},i.prototype.onTouchMove=function(t){this.nowPos.x=t.stageX,this.nowPos.y=t.stageY},i.prototype.OnDestroy=function(){return clearInterval(this.intervalID),0},i}(t.ComponentBase);t.Gesture=e,__reflect(e.prototype,"ZJ.Gesture")}(ZJ||(ZJ={}));var ImgAnim=function(t){function e(e){var i=t.call(this)||this;return i.interval=0,i.loop=!0,i.index=0,i.imgArray=e,i.source=e[0],i}return __extends(e,t),e.prototype.play=function(){var t=this;this.id=setInterval(function(){t.index++,t.index>=t.imgArray.length&&(t.loop?t.index=0:t.stop()),t.source=t.imgArray[t.index]},this.interval,this)},e.prototype.replay=function(){this.index=0,clearInterval(this.id),this.play()},e.prototype.pause=function(){clearInterval(this.id)},e.prototype.stop=function(){this.index=0,clearInterval(this.id)},e}(eui.Image);__reflect(ImgAnim.prototype,"ImgAnim");var UILayer=function(){function t(){}return t.View=0,t.Pop=1,t.SDK=2,t}();__reflect(UILayer.prototype,"UILayer");var UIName=function(){function t(){}return t.Test="Test",t.Game="Game",t.Settle="Settle",t.Loading="Loading",t}();__reflect(UIName.prototype,"UIName");var ModuleConfig=function(){function t(){}return t.WIN_INDEX=31,t.uiLayers=[UILayer.View,UILayer.Pop,UILayer.SDK],t.uiDatas=(_a={},_a[UIName.Game]=new ZJ.UIData(UIName.Game,UILayer.View,GameView),_a[UIName.Settle]=new ZJ.UIData(UIName.Settle,UILayer.View,SettleView),_a[UIName.Loading]=new ZJ.UIData(UIName.Loading,UILayer.View,LoadingView),_a),t.compile={need_loading:!0,chushou:!0,danji:!0,single:!0},t.ip="47.100.46.134",t.port="10018",t.protoFiles=[],t}();__reflect(ModuleConfig.prototype,"ModuleConfig");var EventName=function(){function t(){}return t.Test="Test",t.GAME_RESTART="GAME_RESTART",t.PLAYER_DIE="PLAYER_DIE",t.PLAYER_FUHUO="PLAYER_FUHUO",t.PLAYER_WIN="PLAYER_WIN",t.PLAYER_JUMP_END="PLAYER_JUMP_END",t}();__reflect(EventName.prototype,"EventName");var _a,DebugPlatform=function(){function t(){}return t.prototype.getUserInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,{nickName:"username"}]})})},t.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t.prototype.share=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t}();__reflect(DebugPlatform.prototype,"DebugPlatform",["Platform"]),window.platform||(window.platform=new DebugPlatform);var ModuleUtil=function(){function t(){}return Object.defineProperty(t,"tables",{get:function(){return ZJ.TableManager.instance.tables},enumerable:!0,configurable:!0}),t.getProtoByID=function(t,e){var i="";if(e)switch(t){case 99999:i="ClientCmdData";break;case 1e3:i="CmdLoginGameReqMsg";break;case 1001:i="CmdPingReqMsg";break;case 1300:i="CmdJumperUploadAnswerReqMsg";break;case 1303:i="CmdJumperGameOverReqMsg"}else switch(t){case 99999:i="ServerCmdData";break;case 1e3:i="CmdLoginGameRspMsg";break;case 1001:i="CmdPingRspMsg";break;case 1300:i="CmdJumperUploadAnswerRspMsg";break;case 1303:i="CmdJumperGameOverRspMsg";break;case 1399:i="CmdBroadcastJumperBC"}var n=ZJ.SocketManager.instance.ProtoBufRoot,a=n.lookupType(i);return a},t}();__reflect(ModuleUtil.prototype,"ModuleUtil");var Arrow=function(t){function e(){var e=t.call(this)||this;return e.skinName="ArrowSkin",e}return __extends(e,t),e.prototype.childrenCreated=function(){},e}(eui.Component);__reflect(Arrow.prototype,"Arrow",["eui.UIComponent","egret.DisplayObject"]);var ArrowHui=function(t){function e(){var e=t.call(this)||this;return e.skinName="ArrowHuiSkin",e}return __extends(e,t),e.prototype.childrenCreated=function(){},e}(eui.Component);__reflect(ArrowHui.prototype,"ArrowHui",["eui.UIComponent","egret.DisplayObject"]);var BarBlack=function(t){function e(){var e=t.call(this)||this;return e.skinName="BarBlackSkin",e}return __extends(e,t),e.prototype.childrenCreated=function(){},e}(eui.Component);__reflect(BarBlack.prototype,"BarBlack",["eui.UIComponent","egret.DisplayObject"]);var BarRed=function(t){function e(){var e=t.call(this)||this;return e.skinName="BarRedSkin",e}return __extends(e,t),e.prototype.childrenCreated=function(){},e}(eui.Component);__reflect(BarRed.prototype,"BarRed",["eui.UIComponent","egret.DisplayObject"]);var MyCountDown=function(t){function e(){var e=t.call(this)||this;return e.cb=null,e.leftSecond=0,e.intervalID=0,e.isPause=!1,e.skinName="MyCountDownSkin",e}return __extends(e,t),e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e.prototype.start=function(t){var e=this;this.stop(),this.isPause=!1,this.leftSecond=t,this.count(),this.intervalID=setInterval(function(){e.count()},1e3)},e.prototype.pause=function(){this.isPause=!0},e.prototype.resume=function(){this.isPause=!1},e.prototype.stop=function(){clearInterval(this.intervalID)},e.prototype.setSecond=function(t){var e=Math.floor(t/60)%60,i=t%60,n=this.checkTime(e),a=this.checkTime(i);this.label.text=ZJ.Util.strFormat("{0}:{1}",n,a)},e.prototype.count=function(){return this.setSecond(this.leftSecond),0==this.leftSecond?(this.stop(),void(null!=this.cb&&this.cb())):void(this.isPause||this.leftSecond--)},e.prototype.checkTime=function(t){return 10>t&&(t="0"+t),t},e.prototype.OnDestroy=function(){this.cb=null,this.stop()},e}(eui.Component);__reflect(MyCountDown.prototype,"MyCountDown",["eui.UIComponent","egret.DisplayObject"]);var NumCountDown=function(t){function e(){var e=t.call(this)||this;return e.cb=null,e.leftSecond=0,e.intervalID=0,e.isPause=!1,e.skinName="NumCountDownSkin",e}return __extends(e,t),e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e.prototype.start=function(t){var e=this;this.stop(),this.isPause=!1,this.leftSecond=t,this.count(),this.intervalID=setInterval(function(){e.count()},1e3)},e.prototype.pause=function(){this.isPause=!0},e.prototype.stop=function(){this.label.text="",clearInterval(this.intervalID)},e.prototype.count=function(){return this.label.text=this.leftSecond.toString(),0==this.leftSecond?(this.stop(),void(null!=this.cb&&this.cb())):void(this.isPause||this.leftSecond--)},e.prototype.OnDestroy=function(){this.cb=null,this.stop()},e}(eui.Component);__reflect(NumCountDown.prototype,"NumCountDown",["eui.UIComponent","egret.DisplayObject"]);var Plate=function(t){function e(){var e=t.call(this)||this;return e.id=0,e.skinName="PlateSkin",e}return __extends(e,t),e}(eui.Component);__reflect(Plate.prototype,"Plate",["eui.UIComponent","egret.DisplayObject"]);var Player=function(t){function e(){var e=t.call(this)||this;return e.G=8500,e.V0_X=400,e.V0_Y=-1800,e.PLAYER_SCALE_MIN=.5,e.PLAYER_TIME_MIN=1e3,e.PLAYER_FORCE_MAX=2.22,e.FLOOR_Y=1510,e.JUMP_WIDTH_FIX=10,e.JUMP_FIRM=.4,e.DROP_ROTATION_TIME=500,e.FUHUO_TIME=2e3,e.LUODI_SCALE=[.7,4.4],e.PLAYER_LUODI=400,e.img=null,e.gMC=null,e.gUp=null,e.beginX=0,e.beginY=0,e._isWin=!1,e.isPlayer1=!1,e.endX=0,e.endY=0,e.force=0,e.halfTime=0,e.rotateDirect=0,e.playerData=new PlayerData,e._curPlateIndex=0,e.intervalID=0,e.timeoutFuhuo=0,e.pastTime=0,e._isPlaying=!1,e._isGameOver=!1,e.time=0,e.isPlayingAnim=!1,e.imgScaleY=1,e._state=1,e._headName=["头落后_","头准备","头领先"],e.skinName="PlayerSkin",e}return __extends(e,t),e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},Object.defineProperty(e.prototype,"scoreX",{get:function(){return this.beginX},set:function(t){this.beginX=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scoreY",{get:function(){return this.beginY},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isWin",{get:function(){return this._isWin},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"curPlateIndex",{get:function(){return this._curPlateIndex},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isPlaying",{get:function(){return this._isPlaying},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isGameOver",{get:function(){return this._isGameOver},set:function(t){this._isGameOver=t},enumerable:!0,configurable:!0}),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.img.visible=!0,egret.startTick(this.onTick,this)},e.prototype.onTick=function(t){if(this.isPlaying&&!this.isGameOver){var e=t-this.time;this.pastTime+=e;var i=this.pastTime/1e3,n=this.V0_Y*this.force,a=this.V0_X*this.force,s=n*i+.5*this.G*i*i,o=a*i;if(this.y=Math.min(this.FLOOR_Y,this.beginY+s),this.x=this.beginX+o,0!=this.endX&&0!=this.endY){if(this.x>this.endX){if(this.y=this.endY,this.x=this.endX,0==this.rotateDirect&&(this.beginX=this.x,this.beginY=this.y,this.curPlateIndex==ModuleConfig.WIN_INDEX-1)){this._isWin=!0;var r=new egret.Event(EventName.PLAYER_WIN);this.dispatchEvent(r)}this.stopJump(),this.playLuodi()}}else this.y>=this.FLOOR_Y&&(0!=this.endX&&(this.x=Math.min(this.x,this.endX+100)),this.stopJump(),this.gameOver(),this.playGhostAnim())}return this.time=t,!0},e.prototype.resetPos=function(){clearTimeout(this.timeoutFuhuo),this._isWin=!1,this.isPlayingAnim=!1,this._isPlaying=!1,this.isGameOver=!1,this.gMC.rotation=0,this.gMC.y=this.height,this.gMC.alpha=1,this._state=0,this.stopJump(!1),this.stopDieAnim(),this.playBreath()},e.prototype.restart=function(){this.resetPos(),this._curPlateIndex=0},e.prototype.gameOver=function(){var t=this;this.isGameOver=!0,this.stopAnim(),this.timeoutFuhuo=setTimeout(function(){egret.Tween.removeTweens(t.gMC),t.resetPos(),t.x=t.beginX,t.y=t.beginY;var e=new egret.Event(EventName.PLAYER_FUHUO);t.dispatchEvent(e)},this.FUHUO_TIME)},e.prototype.stopJump=function(t){var e=this;if(void 0===t&&(t=!0),this.pastTime=0,this._isPlaying=!1,0!=this.rotateDirect){var i=0;1==this.rotateDirect?i=-90:2==this.rotateDirect&&(i=90),this.rotateDirect=0,this.gameOver(),egret.Tween.get(this.gMC).wait(100).to({rotation:i,y:this.gMC.globalToLocal(0,this.FLOOR_Y+.7*this.height).y},this.DROP_ROTATION_TIME).call(function(){e.playGhostAnim()},this)}else this.playBreath();if(t){var n=new egret.Event(EventName.PLAYER_JUMP_END);this.dispatchEvent(n)}},e.prototype.setData=function(t){this.playerData=t},e.prototype.jump=function(t,e,i){void 0===e&&(e=-1),void 0===i&&(i=-1),this.playJump(),this._isPlaying=!0,this.beginX=this.x,this.beginY=this.y,this.endX=0,this.endY=0,this.force=.1+(1-t)/(1-this.PLAYER_SCALE_MIN)*this.PLAYER_FORCE_MAX;var n=this.V0_Y*this.force,a=this.V0_X*this.force;this.halfTime=-2*n/this.G*.5;for(var s=2*this.halfTime,o=this.playerData.plates.length,r=this._curPlateIndex;o>r;++r){for(var h=this.playerData.plates[r].y,u=ZJ.MathUtil.YiYuanErCi(.5*this.G,n,this.beginY+this.height-h),l=!1,c=0;c<u.length;++c)if(u[c]>this.halfTime){var d=this.beginX+a*u[c];if(d>this.playerData.plates[r].x-this.width+this.JUMP_WIDTH_FIX&&d<this.playerData.plates[r].x+this.playerData.plates[r].width-this.JUMP_WIDTH_FIX){d<this.playerData.plates[r].x-(1-this.JUMP_FIRM)*this.width+this.JUMP_WIDTH_FIX?this.rotateDirect=1:d>this.playerData.plates[r].x+this.playerData.plates[r].width-this.JUMP_FIRM*this.width-this.JUMP_WIDTH_FIX?this.rotateDirect=2:this._curPlateIndex=r,this.endX=Math.floor(d),this.endY=Math.floor(h-this.height),s=u[c],l=!0;break}}if(l)break}var p=this.endY;if(0==this.endX)for(var h=this.FLOOR_Y,u=ZJ.MathUtil.YiYuanErCi(.5*this.G,n,this.beginY+this.height-h),l=!1,c=0;c<u.length;++c)if(u[c]>this.halfTime){var d=this.beginX+a*u[c];this.endX=Math.floor(d);break}-1!=e&&(this.endX=e),-1!=i&&(this.endY=i);var g={endX:this.endX,endY:p,bgTime:s,V0_X:a,V0_Y:n};return g},e.prototype.playAnim=function(){this.isPlayingAnim||this._isWin||(this.isPlayingAnim=!0,this.isPlayer1&&ZJ.AudioManager.Instance.play("xuli",0),this.playYasuo(),this.playXuli())},e.prototype.stopAnim=function(){this.isPlayer1&&ZJ.AudioManager.Instance.stop("xuli");var t=this.dbScaler.scaleY;return egret.Tween.removeTweens(this.dbScaler),this.dbScaler.scaleY=1,this.stopXuli(),this.isPlayingAnim=!1,this.imgScaleY=t,t},e.prototype.playYasuo=function(){egret.Tween.get(this.dbScaler,{loop:!0}).to({scaleY:this.PLAYER_SCALE_MIN},this.PLAYER_TIME_MIN).to({scaleY:1},this.PLAYER_TIME_MIN),this.db.animation.fadeIn(this.getAniNameByState("xuli")).timeScale=1250/this.PLAYER_TIME_MIN},e.prototype.onDestroy=function(){egret.stopTick(this.onTick,this)},e.prototype.playXuli=function(){var t=this;null==this.xuliTw?ZJ.ResManager.instance.loadMovieClip("xuli","xuli",function(e){t.xuliTw=e,t.xuliTw.x=t.width/2,t.xuliTw.y=t.height,t.addChild(t.xuliTw),t.xuliTw.visible=!0,t.xuliTw.play(-1)}):(this.xuliTw.visible=!0,this.xuliTw.play(-1))},e.prototype.stopXuli=function(){null!=this.xuliTw&&(this.xuliTw.stop(),this.xuliTw.visible=!1)},e.prototype.playLuodi=function(){null==this.luodi&&(this.luodi=new eui.Image,this.luodi.source="luodi_png",this.luodi.width=202,this.luodi.height=22,this.luodi.anchorOffsetX=this.luodi.width/2,this.luodi.anchorOffsetY=this.luodi.height/2,this.luodi.x=this.width/2,this.luodi.y=this.height,this.addChildAt(this.luodi,0));
var t=this.LUODI_SCALE[0],e=this.LUODI_SCALE[1];this.luodi.visible=!0,this.luodi.scaleX=t,this.luodi.scaleY=t,this.luodi.alpha=1;var i=t+(e-t)*(1-this.imgScaleY)/(1-this.PLAYER_SCALE_MIN);egret.Tween.get(this.luodi).to({scaleY:i,scaleX:i,alpha:0},this.PLAYER_LUODI,egret.Ease.sineOut),this.isWin?this.db.animation.fadeIn("shengli"):this.db.animation.fadeIn(this.getAniNameByState("luodi"),-1,1).timeScale=2.5,this.isPlayer1&&ZJ.AudioManager.Instance.stop("jump")},e.prototype.playGhostAnim=function(){null==this.ghost&&(this.ghost=new eui.Image,this.ghost.source="linghun_png",this.ghost.width=142,this.ghost.height=165,this.ghost.scaleX=1.5,this.ghost.scaleY=1.5,this.ghost.anchorOffsetX=this.ghost.width/2,this.ghost.anchorOffsetY=this.ghost.height/2,this.gUp.addChildAt(this.ghost,2)),null==this.qilang&&(this.qilang=new eui.Image,this.qilang.source="qilang_png",this.qilang.width=272,this.qilang.height=89,this.qilang.anchorOffsetX=this.qilang.width/2,this.qilang.anchorOffsetY=this.qilang.height/2,this.qilang.scaleX=1.5,this.qilang.scaleY=1.5,this.gUp.addChildAt(this.qilang,3)),this.ghost.x=this.gMC.x,this.ghost.y=this.gMC.y,this.qilang.x=this.gMC.x,this.qilang.y=this.gMC.y,this.ghost.visible=!0,this.qilang.visible=!0,this.ghost.alpha=1,egret.Tween.get(this.ghost).to({y:this.gMC.y-150,alpha:0},500,egret.Ease.sineIn),this.qilang.alpha=1,egret.Tween.get(this.qilang).to({alpha:0},200),this.db.animation.fadeIn("daku"),this.isPlayer1&&ZJ.AudioManager.Instance.play("tiaodaoci")},e.prototype.stopDieAnim=function(){this.ghost&&(this.ghost.visible=!1),this.qilang&&(this.qilang.visible=!1)},e.prototype.initDB=function(t){var e=this,i="",n="";1==t?(i="bao1",n="bao1"):(i="bao2",n="bao2"),this.db=ZJ.ResManager.instance.loadDragonBones(i,n),this.gMC.addChild(this.db),this.db.addEventListener(dragonBones.FrameEvent.FRAME_EVENT,function(t){switch(t.frameLabel){case"luodi_end":e.playBreath()}},this)},e.prototype.playBreath=function(){if(null!=this.db){var t=this.getAniNameByState("stand");this.db.animation.fadeIn(t)}},e.prototype.playJump=function(){null!=this.db&&this.db.animation.fadeIn(this.getAniNameByState("jumppose"))},e.prototype.updateDB=function(t){t!=this._state&&(this._state=t,this.isGameOver||this.updateDBInternal())},e.prototype.updateDBInternal=function(){if(this.db.animation.lastAnimationState){var t=this.db.animation.lastAnimationName.split("_")[0];this.db.animation.gotoAndPlayByTime(this.getAniNameByState(t),this.db.animation.lastAnimationState.currentTime)}},e.prototype.getAniNameByState=function(t){var e="";switch(this._state){case 2:e="_lingxian";break;case 0:e="_luohou"}return t+e},e}(eui.Component);__reflect(Player.prototype,"Player",["eui.UIComponent","egret.DisplayObject"]);var ReadyGo=function(t){function e(){var e=t.call(this)||this;return e.READY_TIME=2e3,e.GO_TIME=500,e.cb=null,e.skinName="ReadyGoSkin",e}return __extends(e,t),e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e.prototype.start=function(){var t=this;this.stop(),egret.Tween.get(this.ready).to({alpha:1,scaleX:1,scaleY:1},400).wait(500).to({alpha:0},500).call(function(){egret.Tween.get(t.go).to({alpha:1,scaleX:1,scaleY:1},200).wait(300).to({alpha:0},300).call(function(){null!=t.cb&&t.cb()},t)},this)},e.prototype.stop=function(){egret.Tween.removeTweens(this.ready),egret.Tween.removeTweens(this.go),this.ready.alpha=0,this.ready.scaleX=.8,this.ready.scaleY=.8,this.go.alpha=0,this.go.scaleX=2,this.go.scaleY=2},e.prototype.OnDestroy=function(){this.cb=null,this.stop()},e}(eui.Component);__reflect(ReadyGo.prototype,"ReadyGo",["eui.UIComponent","egret.DisplayObject"]);var testbtn=function(t){function e(){var e=t.call(this)||this;return e.skinName="testbtnSkin",e}return __extends(e,t),e}(ZJ.ComponentBase);__reflect(testbtn.prototype,"testbtn");var YuanJiao=function(t){function e(){var e=t.call(this)||this;return e.id=0,e.skinName="YuanJiaoSkin",e}return __extends(e,t),e}(eui.Component);__reflect(YuanJiao.prototype,"YuanJiao",["eui.UIComponent","egret.DisplayObject"]);var PlayerData=function(){function t(){this.plates=[]}return t}();__reflect(PlayerData.prototype,"PlayerData");var SettleData=function(){function t(){this.score=0}return t}();__reflect(SettleData.prototype,"SettleData");var ZJ;!function(t){var e=function(t){function e(e,i,n,a){var s=t.call(this,e,i,n,a)||this;return s.data=null,s}return __extends(e,t),e}(egret.Event);t.ChannelDataEvent=e,__reflect(e.prototype,"ZJ.ChannelDataEvent")}(ZJ||(ZJ={}));var ZJ;!function(t){var e=function(){function t(){}return t.FRAME=30,t.UP=0,t.DOWN=1,t.LEFT=2,t.RIGHT=3,t}();t.CommonConfig=e,__reflect(e.prototype,"ZJ.CommonConfig");var i=function(){function t(){}return t.TABLE_LOADED="TABLE_LOADED",t.SOCKET_CONNECTED="SOCKET_CONNECTED",t.SOCKET_DATA="SOCKET_DATA",t.GESTURE_DIRECT="GESTURE_DIRECT",t.CHANNEL_DATA="CHANNEL_DATA",t}();t.CommonEventName=i,__reflect(i.prototype,"ZJ.CommonEventName")}(ZJ||(ZJ={}));var SettleSingleView=function(t){function e(){var e=t.call(this)||this;return e.SHOW_TIME=3e3,e.toPlatform="",e.timeoutid=0,e.skinName="SettleSingleViewSkin",e}return __extends(e,t),e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this);var e=ZJ.ShapeUtil.getRect(0,.4,this.stage.stageWidth,this.stage.stageHeight);this.gBg.addChild(e),this.game=ZJ.UIManager.instance.openView(UIName.Game),this.restart.addEventListener("touchTap",function(){var t=new egret.Event(EventName.Test);ZJ.EventManager.instance.dispatchEvent(t),ZJ.UIManager.instance.destroyView(UIName.Settle)},this)},e.prototype.setData=function(t){this.score.text=t.score.toString()},e.prototype.onDestroy=function(){return t.prototype.onDestroy.call(this),0},e}(ZJ.ViewBase);__reflect(SettleSingleView.prototype,"SettleSingleView");var Main=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this),egret.lifecycle.addLifecycleListener(function(t){}),egret.lifecycle.onPause=function(){egret.ticker.pause()},egret.lifecycle.onResume=function(){egret.ticker.resume()},egret.registerImplementation("eui.IAssetAdapter",new AssetAdapter),egret.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),this.runGame()["catch"](function(t){console.log(t)})},e.prototype.runGame=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){switch(e.label){case 0:return[4,this.createGameScene()];case 1:return e.sent(),[4,platform.login()];case 2:return e.sent(),[4,platform.getUserInfo()];case 3:return t=e.sent(),console.log(t),[2]}})})},e.prototype.createGameScene=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){switch(e.label){case 0:return egret.ImageLoader.crossOrigin="anonymous",ModuleConfig.compile.yy&&onPKLoading(),ZJ.AudioManager.Instance.init(this.stage),[4,ZJ.ResManager.instance.init(this.stage)];case 1:return e.sent(),[4,ZJ.ResManager.instance.loadGroup("realpreload")];case 2:return e.sent(),ZJ.UIManager.instance.init(this),ZJ.UIManager.instance.uiLayers=ModuleConfig.uiLayers,ZJ.UIManager.instance.uiDatas=ModuleConfig.uiDatas,t=this.GetLoadingView(),[4,ZJ.ResManager.instance.loadGroup("preload",0,t)];case 3:return e.sent(),ZJ.TableManager.instance.init(),ZJ.SocketManager.instance.init(),1==ModuleConfig.compile.yy&&onPKFinishLoading(),ModuleStartUp.init(),1==ModuleConfig.compile.yy&&onPKStart(),[2]}})})},e.prototype.GetLoadingView=function(){var t=null,e=null;return ModuleConfig.compile.need_loading&&(ModuleConfig.compile.danji?e=LoadingView:ModuleConfig.compile.yy?e=YYLoadingView:ModuleConfig.compile.ali?e=AliLoadingView:ModuleConfig.compile.chushou&&(e=ChushouLoadingView)),null!=e&&(ModuleConfig.uiDatas[UIName.Loading].viewClass=e,t=ZJ.UIManager.instance.openView(UIName.Loading)),t},e.prototype.onEnterFrame=function(){},e}(eui.UILayer);__reflect(Main.prototype,"Main");var TestView=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),ZJ.UIManager.instance.destroyView(UIName.Loading),this.initChushouTest()},e.prototype.initFeibiao=function(){new eui.Image},e.prototype.initHitTest=function(){var t=this,e=new eui.Button;this.addChild(e),e.x=0,e.y=100;var i=new eui.Button;this.addChild(i),i.x=20,i.y=100,setTimeout(function(){console.log(t.myHitTest(e,i))},1e3)},e.prototype.myHitTest=function(t,e){var i=t.getBounds(),n=e.getBounds();return i.x=t.x,i.y=t.y,n.x=e.x,n.y=e.y,i.intersects(n)},e.prototype.onSocketConnected=function(){console.log("onSocketConnected")},e.prototype.onSocketData=function(t){console.log("onSocketData")},e.prototype.initChushouTest=function(){for(var t=100,e=200,i=600,n=250,a=3,s=["csAuthRequest","csJoinRoom","csQuitRoom","csInviteToGame","csKickOutUser","csShareRoom","csShareRecord","csGetFriendList","csGetUserRelationship","csFollowUser","csEnableMic","csEnableAudioOutput","onUserVolumeUpdate","csExitGame","onNetworkStatusChange","csGetAPIVersionInfo","cs_10000","cs_10001","无视，进入游戏"],o=[this.csAuthRequest,this.csJoinRoom,this.csQuitRoom,this.csInviteToGame,this.csKickOutUser,this.csShareRoom,this.csShareRecord,this.csGetFriendList,this.csGetUserRelationship,this.csFollowUser,this.csEnableMic,this.csEnableAudioOutput,this.onUserVolumeUpdate,this.csExitGame,this.onNetworkStatusChange,this.csGetAPIVersionInfo,this.cs_10000,this.cs_10001,this.enterGame],r=0,h=s.length;h>r;++r){var u=this.getChushouBtn();u.x=t+r%a*i,u.y=e+Math.floor(r/a)*n,u.label=s[r],u.addEventListener(egret.TouchEvent.TOUCH_TAP,o[r],this)}},e.prototype.getChushouBtn=function(){var t=new eui.Button;return this.addChild(t),t.width=400,t.height=150,t.labelDisplay.size=40,t},e.prototype.csAuthRequest=function(){console.log("csAuthRequest"),csAuthRequest('{"h5AppName" : "五⼦棋","launchMode" : "10","inviteMode" : "10","gameRoomId" : "1084"}',function(t){console.log("cb csAuthRequest")})},e.prototype.csJoinRoom=function(){console.log("csJoinRoom"),csJoinRoom('{"accessToken" : "89d57e62acg45b33","gameRoomId" : "1084","role" : "0"}',function(t){console.log("cb csJoinRoom")})},e.prototype.csQuitRoom=function(){console.log("csQuitRoom"),csQuitRoom('{"accessToken" : "89d57e62acg45b33","gameRoomId" : "1084"}',function(t){console.log("cb csQuitRoom")})},e.prototype.csInviteToGame=function(){console.log("csInviteToGame"),csInviteToGame('{"accessToken" : "89d57e62acg45b33","gameRoomId" : "1084","inviteMode" : "10","title" : "触⼿五⼦棋","description" : "我正在触⼿玩五⼦棋，快来围观吧","image" : "/9j/4RMQRXhpZgAATU0AKgAAA"}',function(t){console.log("cb csInviteToGame")})},e.prototype.csKickOutUser=function(){console.log("csKickOutUser"),csKickOutUser('{"accessToken" : "89d57e62acg45b33","targetUid" : "sl23859","gameRoomId" : "1084"}',function(t){console.log("cb csKickOutUser")})},e.prototype.csShareRoom=function(){console.log("csShareRoom"),csShareRoom('{"accessToken" : "89d57e62acg45b33","gameRoomId" : "1084","title" : "触⼿五⼦棋","description" : "我正在触⼿玩五⼦棋，快来围观吧","image" : "/9j/4RMQRXhpZgAATU0AKgAAA"}',function(t){console.log("cb csShareRoom")})},e.prototype.csShareRecord=function(){console.log("csShareRecord"),csShareRecord('{"accessToken" : "89d57e62acg45b33","gameRecordId" : "119844","title" : "触⼿五⼦棋","description" : "我在触⼿五⼦棋获得了最强王者称号","image" : "/9j/4RMQRXhpZgAATU0AKgAAA"}',function(t){console.log("cb csShareRecord")})},e.prototype.csGetFriendList=function(){console.log("csGetFriendList"),csGetFriendList('{"accessToken" : "89d57e62acg45b33","numPerPage" : "10","breakpoint" : "18823-ffgh-cc08"}',function(t){console.log("cb csGetFriendList")})},e.prototype.csGetUserRelationship=function(){console.log("csGetUserRelationship"),csGetUserRelationship('{"accessToken" : "89d57e62acg45b33","users" : "10785,491721"}',function(t){console.log("cb csGetUserRelationship")})},e.prototype.csFollowUser=function(){console.log("csFollowUser"),csFollowUser('{"accessToken" : "89d57e62acg45b33","targetUid" : "sl10785"}',function(t){console.log("cb csFollowUser")})},e.prototype.csEnableMic=function(){console.log("csEnableMic"),csEnableMic('{"accessToken" : "89d57e62acg45b33","enableMic" : "1"}',function(t){console.log("cb csEnableMic")})},e.prototype.csEnableAudioOutput=function(){console.log("csEnableAudioOutput"),csEnableAudioOutput('{"accessToken" : "89d57e62acg45b33","enableAudioOutput" : "1"}',function(t){console.log("cb csEnableAudioOutput")})},e.prototype.onUserVolumeUpdate=function(){console.log("onUserVolumeUpdate"),onUserVolumeUpdate(function(t){console.log("cb onUserVolumeUpdate")})},e.prototype.csExitGame=function(){console.log("csExitGame"),csExitGame('{"accessToken" : "89d57e62acg45b33"}')},e.prototype.onNetworkStatusChange=function(){console.log("onNetworkStatusChange"),onNetworkStatusChange(function(t){console.log("cb onNetworkStatusChange")})},e.prototype.csGetAPIVersionInfo=function(){console.log("csGetAPIVersionInfo"),csGetAPIVersionInfo('{"h5AppName" : "五⼦棋","launchMode" : "10","inviteMode" : "10","gameRoomId" : "1084"}',function(t){console.log("cb csGetAPIVersionInfo")})},e.prototype.cs_10000=function(){console.log("cs_10000"),ZJ.SocketManager.instance.send(1e4,{openId:"2333",sign:"sign",timestamp:ZJ.Util.timeStamp(),appId:1234,params:"params"})},e.prototype.cs_10001=function(){console.log("cs_10001"),ZJ.SocketManager.instance.send(10001,{gameMode:1,matchType:1,matchId:3})},e.prototype.enterGame=function(){ZJ.UIManager.instance.openView(UIName.Game),ZJ.UIManager.instance.destroyView(UIName.Test)},e.prototype.onDestroy=function(){return t.prototype.onDestroy.call(this),0},e}(ZJ.ViewBase);__reflect(TestView.prototype,"TestView");var AliLoadingView=function(t){function e(){var e=t.call(this)||this;return e.intervalID=0,e.ran1=0,e.ran2=0,e.SEND_PROGRESS=6,e.progressIndex=0,e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this);var e=ZJ.ShapeUtil.getRect(0,1,this.stage.stageWidth,this.stage.stageHeight);this.addChild(e);var i=500,n=new eui.ProgressBar;n.skinName="YYLoadingPBSkin",this.progress=n,this.progress.width=450,this.progress.height=62,this.progress.minimum=0,this.progress.maximum=100,this.progress.horizontalCenter=0,this.progress.y=i+435,this.progress.scaleX=1.3,this.progress.scaleY=1.3,this.progress.labelFunction=function(t,e){return t+"%"},this.addChild(this.progress);var a=new eui.Image;a.source="load_img03_png",a.horizontalCenter=0,a.y=i+630,a.width=510,a.height=100,a.alpha=.2,this.addChild(a),this.load3=new eui.Label,this.load3.text="等待对手加入游戏...",this.load3.horizontalCenter=0,this.load3.y=i+660,this.load3.size=40,this.load3.textColor=16777215,this.addChild(this.load3),this.startCount(),ZJ.SocketManager.instance.connectByUrlAli({ip:ModuleConfig.ip,port:ModuleConfig.port})},e.prototype.startCount=function(){var t=this;this.intervalID=setInterval(function(){t.ran2=Math.min(t.ran2+8*Math.random()+2,99),t.progress.value=Math.floor((t.ran1+t.ran2)/2)},200)},e.prototype.onProgress=function(t,e){this.ran1=Math.floor(t/e*100);var i=Math.floor(t/e*100);100==i?ALISDK.CatcherSDK.instance().updateProgress(ALISDK.CatcherSDK.ProgressState.COMPLETED,i):(this.progressIndex==this.SEND_PROGRESS-1&&ALISDK.CatcherSDK.instance().updateProgress(ALISDK.CatcherSDK.ProgressState.PROGRESSING,i),this.progressIndex=++this.progressIndex%this.SEND_PROGRESS)},e.prototype.onDestroy=function(){return t.prototype.onDestroy.call(this),0},e}(ZJ.ViewBase);__reflect(AliLoadingView.prototype,"AliLoadingView");var ChushouLoadingView=function(t){function e(){var e=t.call(this)||this;return e.intervalID=0,e.ran1=0,e.ran2=0,e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this);var e=ZJ.ShapeUtil.getRect(0,1,this.stage.stageWidth,this.stage.stageHeight);this.addChild(e);var i=new eui.Image;i.source="loading_bg_png",i.height=1920,i.percentWidth=100,this.addChild(i),i.horizontalCenter=0;var n=500,a=new eui.Group;this.addChild(a),a.horizontalCenter=0,a.y=n,ZJ.ResManager.instance.loadMovieClip("yylangren","yylangren",function(t){a.addChild(t),t.scaleX=1.5,t.scaleY=1.5,t.x=-195,t.gotoAndPlay("tiao",-1)});var s=new eui.ProgressBar;s.skinName="YYLoadingPBSkin",this.progress=s,this.progress.width=450,this.progress.height=62,this.progress.minimum=0,this.progress.maximum=100,this.progress.horizontalCenter=0,this.progress.y=n+435,this.progress.scaleX=1.3,this.progress.scaleY=1.3,this.progress.labelFunction=function(t,e){return t+"%"},this.addChild(this.progress);var o=new eui.Image;o.source="load_img03_png",o.horizontalCenter=0,o.y=n+630,o.width=510,o.height=100,o.alpha=.2,this.addChild(o),this.load3=new eui.Label,this.load3.text="等待对手加入游戏...",this.load3.horizontalCenter=0,this.load3.y=n+660,this.load3.size=40,this.load3.textColor=16777215,this.addChild(this.load3),this.startCount()},e.prototype.startCount=function(){var t=this;this.intervalID=setInterval(function(){t.ran2=Math.min(t.ran2+8*Math.random()+2,99),t.progress.value=Math.floor((t.ran1+t.ran2)/2)},200)},e.prototype.onProgress=function(t,e){this.ran1=Math.floor(t/e*100),this.progress.value=Math.floor((this.ran1+this.ran2)/2)},e.prototype.onDestroy=function(){return t.prototype.onDestroy.call(this),clearInterval(this.intervalID),0},e}(ZJ.ViewBase);__reflect(ChushouLoadingView.prototype,"ChushouLoadingView");var YYLoadingView=function(t){function e(){var e=t.call(this)||this;return e.intervalID=0,e.ran1=0,e.ran2=0,e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this);var e=ZJ.ShapeUtil.getRect(0,1,this.stage.stageWidth,this.stage.stageHeight);this.addChild(e);var i=new eui.Image;i.source="loading_bg_png",i.height=1920,i.percentWidth=100,this.addChild(i),i.horizontalCenter=0;var n=500,a=new eui.Group;this.addChild(a),a.horizontalCenter=0,a.y=n,ZJ.ResManager.instance.loadMovieClip("yylangren","yylangren",function(t){a.addChild(t),t.scaleX=1.5,t.scaleY=1.5,t.x=-195,t.gotoAndPlay("tiao",-1)});var s=new eui.ProgressBar;s.skinName="YYLoadingPBSkin",this.progress=s,this.progress.width=450,this.progress.height=62,this.progress.minimum=0,this.progress.maximum=100,this.progress.horizontalCenter=0,this.progress.y=n+435,this.progress.scaleX=1.3,this.progress.scaleY=1.3,this.progress.labelFunction=function(t,e){return t+"%"},this.addChild(this.progress);var o=new eui.Image;o.source="load_img03_png",o.horizontalCenter=0,o.y=n+630,o.width=510,o.height=100,o.alpha=.2,this.addChild(o),this.load3=new eui.Label,this.load3.text="等待对手加入游戏...",this.load3.horizontalCenter=0,this.load3.y=n+660,this.load3.size=40,this.load3.textColor=16777215,this.addChild(this.load3),this.startCount()},e.prototype.startCount=function(){var t=this;this.intervalID=setInterval(function(){t.ran2=Math.min(t.ran2+8*Math.random()+2,99),t.progress.value=Math.floor((t.ran1+t.ran2)/2)},200)},e.prototype.onProgress=function(t,e){this.ran1=Math.floor(t/e*100),this.progress.value=Math.floor((this.ran1+this.ran2)/2)},e.prototype.onDestroy=function(){return t.prototype.onDestroy.call(this),clearInterval(this.intervalID),0},e}(ZJ.ViewBase);__reflect(YYLoadingView.prototype,"YYLoadingView");var xlsx;!function(t){t.cfg_c_xiaoli="shared/c_xiaoli.json",t.c_xiaoli_id="A",t.c_xiaoli_data="B"}(xlsx||(xlsx={}));