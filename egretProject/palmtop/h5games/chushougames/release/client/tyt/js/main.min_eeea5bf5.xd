var __reflect=this&&this.__reflect||function(t,e,i){t.__class__=e,i?i.push(e):i=[e],t.__types__=t.__types__?i.concat(t.__types__):i},__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},__awaiter=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))(function(o,s){function a(t){try{h(n.next(t))}catch(e){s(e)}}function r(t){try{h(n["throw"](t))}catch(e){s(e)}}function h(t){t.done?o(t.value):new i(function(e){e(t.value)}).then(a,r)}h((n=n.apply(t,e||[])).next())})},__generator=this&&this.__generator||function(t,e){function i(t){return function(e){return n([t,e])}}function n(i){if(o)throw new TypeError("Generator is already executing.");for(;h;)try{if(o=1,s&&(a=s[2&i[0]?"return":i[0]?"throw":"next"])&&!(a=a.call(s,i[1])).done)return a;switch(s=0,a&&(i=[0,a.value]),i[0]){case 0:case 1:a=i;break;case 4:return h.label++,{value:i[1],done:!1};case 5:h.label++,s=i[1],i=[0];continue;case 7:i=h.ops.pop(),h.trys.pop();continue;default:if(a=h.trys,!(a=a.length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){h=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){h.label=i[1];break}if(6===i[0]&&h.label<a[1]){h.label=a[1],a=i;break}if(a&&h.label<a[2]){h.label=a[2],h.ops.push(i);break}a[2]&&h.ops.pop(),h.trys.pop();continue}i=e.call(t,h)}catch(n){i=[6,n],s=0}finally{o=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}var o,s,a,r,h={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return r={next:i(0),"throw":i(1),"return":i(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r},ZJ;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.skinName=t.Util.getClassName(i)+"Skin",i}return __extends(i,e),i.prototype.onDestroy=function(){return 0},i}(eui.Component);t.ComponentBase=e,__reflect(e.prototype,"ZJ.ComponentBase",["eui.UIComponent","egret.DisplayObject"])}(ZJ||(ZJ={}));var ZJ;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e.prototype.setData=function(t){},e.prototype.show=function(){},e.prototype.onProgress=function(t,e){},e.prototype.onDestroy=function(){return t.prototype.onDestroy.call(this)},e}(t.ComponentBase);t.ViewBase=e,__reflect(e.prototype,"ZJ.ViewBase",["RES.PromiseTaskReporter"])}(ZJ||(ZJ={}));var ZJ;!function(t){var e=function(){function t(t,e,i){void 0===e&&(e=0),void 0===i&&(i=null),this.viewName="",this.layer=0,this.viewClass=null,this.viewName=t,this.layer=e,this.viewClass=i}return t}();t.UIData=e,__reflect(e.prototype,"ZJ.UIData")}(ZJ||(ZJ={}));var GameView=function(t){function e(){var e=t.call(this)||this;return e.GAME_TIME=180,e.GAME_END_TIME=180,e.NUM_COUNT_DOWN=3,e.GAP_X=[150,400],e.GAP_X_MAX_NUM=20,e.GAP_Y=[-350,250],e.PLATE_NUM=20,e.PLATE_Y=[880,1360],e.PLATE_WIDTH=[168,336],e.BG_WIDTH=2160,e.INTERVAL=50,e.INTERVAL_PING=3e4,e.PLAYER_BORN=[200,1200],e.PIXEL_PER_SCORE=1,e.WIN_SCORE_ENLARGE=10,e.JINDU_RANGE=[50,810],e.JINDU_PER_INDEX=(e.JINDU_RANGE[1]-e.JINDU_RANGE[0])/(ModuleConfig.WIN_INDEX-1),e.JUMP_SCALE_RATE=1e4,e.WIN_PLATE_Y=1200,e.ZHONGDIAN_TEXT_OFFSET=[15,-450],e.YANHUA_OFFSET=[0,-150],e.score1=0,e.score2=0,e.plates=[],e.countDown=null,e.readyGo=null,e.gameState="0",e.STATE_PRESTART="0",e.STATE_PLAYING="1",e.STATE_GAMEOVER="4",e.p2WillWin=!1,e.yanhua=null,e.chushouSDK=ChushouSDK.instance,e.seed=1,e.intervalPing=0,e.jumpPool=[],e.data1000=null,e.data1399=null,e.data10000=null,e.data11012=null,e.dataP1=null,e.dataP2=null,e.isDanji=!1,e.intervalID=0,e.intervalGameEnd=0,e.plateWidth=0,e.plateHeight=0,e.isBegin=!1,e.settleData1=null,e.settleData2=null,e.cameraPlayer=null,e.isAI=!1,e.skinName="GameViewSkin",e}return __extends(e,t),e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){var e=this;t.prototype.childrenCreated.call(this),this.player2=this.createPlayer(),this.player2.initDB(2),this.player1=this.createPlayer(),this.player1.initDB(1),this.player1.isPlayer1=!0,this.player1.playBreath(),this.player2.playBreath(),this.createPlates(),this.readyGo=new ReadyGo,this.readyGo.cb=function(){e.onNumCountDownEnd()},this.gTop.addChild(this.readyGo),this.readyGo.horizontalCenter=0,this.readyGo.y=850,this.readyGo.scaleX=1.44,this.readyGo.scaleY=1.44,this.countDown=new MyCountDown,this.countDown.cb=function(){e.onCountDownEnd()},this.gTop.addChild(this.countDown),this.countDown.horizontalCenter=0,this.countDown.y=360,this.compare0.text="",this.compare1.text="",this.compare2.text="",this.big.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onBigBegin,this),this.big.addEventListener(egret.TouchEvent.TOUCH_CANCEL,this.onBigEnd,this),this.big.addEventListener(egret.TouchEvent.TOUCH_END,this.onBigEnd,this),this.restart.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onRestart,this),this.danji.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onDanji,this),ZJ.EventManager.instance.addEventListener(EventName.GAME_RESTART,this.onRestart,this),ZJ.EventManager.instance.addEventListener(EventName.GAME_EXIT,this.onGameExit,this),ZJ.EventManager.instance.addEventListener(EventName.Test,this.onTest,this),this.player1.addEventListener(EventName.PLAYER_FUHUO,this.onPlayerFuhuo,this),this.player1.addEventListener(EventName.PLAYER_WIN,this.onPlayerWin,this),this.player1.addEventListener(EventName.PLAYER_JUMP_END,this.onPlayerJumpEnd,this),this.player2.addEventListener(EventName.PLAYER_WIN,this.onPlayer2Win,this),this.player2.addEventListener(EventName.PLAYER_JUMP_END,this.onPlayer2JumpEnd,this),this.player2.addEventListener(EventName.PLAYER_FUHUO,this.onPlayer2Fuhuo,this),ZJ.SocketManager.instance.addEventListener(ZJ.CommonEventName.SOCKET_CONNECTED,this.onSocketConnected,this),ZJ.SocketManager.instance.addEventListener(ZJ.CommonEventName.SOCKET_DATA,this.onSocketData,this),this.intervalID=setInterval(function(){e.onInterval()},this.INTERVAL),ModuleConfig.compile.danji?(ZJ.UIManager.instance.destroyView(UIName.Loading),this.onDanji()):this.connect(),ZJ.AudioManager.Instance.playBgm()},e.prototype.onstart=function(){console.log("onstart")},e.prototype.loopcomplete=function(){console.log("loopcomplete")},e.prototype.complete=function(){},e.prototype.fadein=function(){console.log("onstart")},e.prototype.fadeincomplete=function(){console.log("onstart")},e.prototype.createPlatformData=function(){var t={nonstr:yyGameConfig.nonstr,sign:yyGameConfig.sign,timestamp:yyGameConfig.timestamp,post_data:yyGameConfig.strPostData};return JSON.stringify(t)},e.prototype.sendPing=function(){ModuleConfig.compile.danji||(ModuleConfig.compile.yy?this.intervalPing=setInterval(function(){ZJ.SocketManager.instance.send(1001)},this.INTERVAL_PING):this.intervalPing=setInterval(function(){ZJ.SocketManager.instance.send(11004)},this.INTERVAL_PING))},e.prototype.sendLogin=function(){ModuleConfig.compile.danji||(ModuleConfig.compile.yy?ZJ.SocketManager.instance.send(1e3,{channelId:"huoshu",gameId:"Jumper",platformId:"Yy",platformData:this.createPlatformData(),standAlone:!1}):ZJ.SocketManager.instance.send(1e4,{openId:this.chushouSDK.csAuthRequestData.openUid,sign:"sign",timestamp:ZJ.Util.timeStamp(),appId:1234,params:[this.chushouSDK.csAuthRequestData.nickname,this.chushouSDK.csAuthRequestData.gender,this.chushouSDK.csAuthRequestData.avatar]}))},e.prototype.sendMatch=function(t){ZJ.SocketManager.instance.send(10001,{gameMode:1,matchType:1,matchId:t})},e.prototype.sendReady=function(){ZJ.SocketManager.instance.send(11002)},e.prototype.connect=function(){ModuleConfig.compile.danji||(ModuleConfig.compile.yy&&null!=yyGameConfig.connectUrl?ZJ.SocketManager.instance.connectByUrl(yyGameConfig.connectUrl):ZJ.SocketManager.instance.connectByUrl("ws://"+ModuleConfig.ip+":"+ModuleConfig.port))},e.prototype.onSocketConnected=function(){var t=this;ModuleConfig.compile.chushou&&(ZJ.UIManager.instance.destroyView(UIName.Loading),this.chushouSDK.csAuthRequest(function(){t.sendPing(),t.sendLogin()}))},e.prototype.onSocketData=function(t){var e=t.data;if(this.mylog("收到协议："+e.protoID),ModuleConfig.compile.yy&&1!=e.result)this.mylog(e.error);else{var i=e.data;switch(e.protoID){case 1e4:this.data10000=i,this.nameLabel1.text=this.data10000.nickname,this.sendMatch(this.chushouSDK.csAuthRequestData.csGroupId.toString());break;case 10001:this.sendReady(),this.chushouSDK.gameRoomId=i.roomId.toString(),this.chushouSDK.csJoinRoom();break;case 11002:0==i.result||this.chushouSDK.csExitGame();break;case 11003:i.seeds&&(this.seed=i.seeds[0]||this.seed),ZJ.UIManager.instance.destroyView(UIName.Settle),this.onRestart();for(var n=0,o=i.playerInfos.length;o>n;++n)i.playerInfos[n].playerId==this.data10000.playerId?this.dataP1=i.playerInfos[n]:(this.dataP2=i.playerInfos[n],this.nameLabel2.text=this.dataP2.nickname);this.prestart();break;case 11007:if(0!=i.result){var s=ZJ.UIManager.instance.openView(UIName.Settle);s.receiveExit()}break;case 11009:var a=ZJ.UIManager.instance.openView(UIName.Settle);a.receiveRestart();break;case 11011:if(i.playerId!=this.dataP1.playerId){var r=ZJ.Util.bytesToObj(i.resultData);0==r.jumpScale&&(this.p2WillWin=!0),this.jumpPool.push(r),this.p2Jump()}break;case 11012:this.data11012=i,this.showSettleByServer();break;case 1e3:this.data1000=i,this.nameLabel1.text=this.data1000.player.nickname;break;case 1300:break;case 1303:break;case 1399:var h=i.player[0],c=i.answer[0],l=i.result[0];"undefined"!=typeof h&&h.playerId!=this.data1000.player.playerId&&(this.nameLabel2.text=h.nickname,this.prestart()),"undefined"!=typeof c&&c.playerId!=this.data1000.player.playerId&&(0==c.jumpScale&&(this.p2WillWin=!0),this.jumpPool.push(c),this.p2Jump()),"undefined"!=typeof l&&(this.data1399=i,this.showSettleByServer())}}},e.prototype.p2Jump=function(){var t=this;if(!this.player2.isPlaying&&!this.player2.isPlayingAnim&&this.gameState!=this.STATE_GAMEOVER){var e=this.jumpPool.shift();if("undefined"!=typeof e){var i=JSON.parse(e.attach);if(0!=e.jumpScale){var n=e.jumpScale/this.JUMP_SCALE_RATE;this.player2.playAnim(),setTimeout(function(){t.player2.stopAnim(),t.jump(t.player2,n,i.x,i.y)},(1-n)/(1-this.player2.PLAYER_SCALE_MIN)*this.player2.PLAYER_TIME_MIN)}else this.player2.x=i.x,this.settle(!1)}}},e.prototype.prestart=function(){this.gameState=this.STATE_PRESTART,this.cameraPlayer=this.player1,this.countDown.stop(),this.countDown.setSecond(this.GAME_TIME),this.readyGo.start(),ZJ.UIManager.instance.destroyView(UIName.Loading)},e.prototype.onNumCountDownEnd=function(){this.start()},e.prototype.start=function(){this.countDown.start(this.GAME_TIME),this.gameState=this.STATE_PLAYING},e.prototype.resetBg=function(){egret.Tween.removeTweens(this.bg),egret.Tween.removeTweens(this.bg33),egret.Tween.removeTweens(this.bg55),egret.Tween.removeTweens(this.bg77),this.bg1.x=0,this.bg2.x=this.BG_WIDTH,this.bg3.x=0,this.bg4.x=this.BG_WIDTH,this.bg5.x=0,this.bg6.x=this.BG_WIDTH,this.bg7.x=0,this.bg8.x=this.BG_WIDTH,this.bg.x=0,this.bg77.x=0,this.bg33.x=0,this.bg55.x=0},e.prototype.onRestart=function(){this.jumpPool=[],this.player1.restart(),this.player2.restart(),this.yanhua&&(this.yanhua.stop(),this.yanhua.visible=!1),this.resetBg(),this.player1.x=this.PLAYER_BORN[0],this.player1.y=this.PLAYER_BORN[1],this.player2.x=this.PLAYER_BORN[0],this.player2.y=this.PLAYER_BORN[1],this.updateScore(0,0),this.updateJindu(),this.settleData1=null,this.settleData2=null,this.p2WillWin=!1,this.removePlates(),this.createPlates(),this.isDanji&&this.prestart()},e.prototype.onDanji=function(){this.isDanji=!0,this.setAI(),this.prestart()},e.prototype.onPlayerDie=function(t){},e.prototype.onPlayerFuhuo=function(t){var e=-this.player1.x+this.PLAYER_BORN[0];this.playBg(this.bg,this.bg1,this.bg2,e,!0,500),this.playBg(this.bg77,this.bg7,this.bg8,.5*e,!0,500),this.playBg(this.bg33,this.bg3,this.bg4,1.2*e,!0,500),this.playBg(this.bg55,this.bg5,this.bg6,1.5*e,!0,500)},e.prototype.onPlayerWin=function(t){this.loadYanhua(),this.settle(!0)},e.prototype.onPlayer2Win=function(t){this.loadYanhua()},e.prototype.loadYanhua=function(){var t=this;this.yanhua?this.playYanhua():ZJ.ResManager.instance.loadMovieClip("yanhua","yanhua",function(e){e.scaleX=4,e.scaleY=4,t.gPlate.addChild(e),t.yanhua=e,t.playYanhua()})},e.prototype.playYanhua=function(){this.yanhua.x=this.zhongdian.x+this.YANHUA_OFFSET[0],this.yanhua.y=this.zhongdian.y+this.YANHUA_OFFSET[1],this.yanhua.play(-1),this.yanhua.visible=!0},e.prototype.onPlayer2Die=function(t){},e.prototype.onPlayerJumpEnd=function(t){},e.prototype.onPlayer2JumpEnd=function(t){this.player2.isGameOver||this.player2.isWin&&ModuleConfig.compile.danji&&this.settle(!1)},e.prototype.onPlayer2Fuhuo=function(t){},e.prototype.onTest=function(t){this.mylog(t.data.log)},e.prototype.onInterval=function(){if(this.gameState!=this.STATE_GAMEOVER&&this.gameState!=this.STATE_PRESTART){this.updateScore(this.player1.curPlateIndex,this.player2.curPlateIndex);var t=Math.max(this.player1.x,this.player2.x),e=this.plates.length;0!=e&&t>this.plates[e-1].x-this.BG_WIDTH&&this.createPlates(),this.p2Jump()}},e.prototype.updateScore=function(t,e){this.score1=Math.floor(t/this.PIXEL_PER_SCORE),this.score2=Math.floor(e/this.PIXEL_PER_SCORE);var i=0;i=t>e?Math.ceil((t-e)/this.PIXEL_PER_SCORE):Math.floor((t-e)/this.PIXEL_PER_SCORE),0>i?(this.compare0.text=ZJ.Util.strFormat("ab{0}c",(-i).toString()),this.compare1.text="",this.compare2.text="",this.player1.updateDB(0),this.player2.updateDB(2)):0==i?(this.compare0.text="",this.compare1.text="abcd",this.compare2.text="",this.player1.updateDB(1),this.player2.updateDB(1)):(this.compare0.text="",this.compare1.text="",this.compare2.text=ZJ.Util.strFormat("ab{0}c",i.toString()),this.player1.updateDB(2),this.player2.updateDB(0))},e.prototype.updateJindu=function(){egret.Tween.removeTweens(this.jindu1),egret.Tween.removeTweens(this.jindu2),egret.Tween.get(this.jindu1,{onChange:this.updateJinduTou,onChangeObj:this}).to({x:this.JINDU_RANGE[0]+this.player1.curPlateIndex*this.JINDU_PER_INDEX},300),egret.Tween.get(this.jindu2).to({x:this.JINDU_RANGE[0]+this.player2.curPlateIndex*this.JINDU_PER_INDEX},300)},e.prototype.updateJinduTou=function(){var t="1",e="1";this.jindu1.x>this.jindu2.x?(t="2",e="0"):this.jindu1.x==this.jindu2.x?(t="1",e="1"):(t="0",e="2"),this.jinduTou1.source="jindu1"+t+"_png",this.jinduTou2.source="jindu1"+e+"_png"},e.prototype.onCountDownEnd=function(){this.player1.isGameOver=!0,this.player2.isGameOver=!0,this.gameOver()},e.prototype.gameOver=function(){this.settle(!1)},e.prototype.settle=function(t){var e=this;this.gameState=this.STATE_GAMEOVER,this.settleData1=new SettleData,this.settleData1.score=this.score1;var i=this.player1.scoreX;t&&(i*=this.WIN_SCORE_ENLARGE),setTimeout(function(){e.sendSettle()},500),ModuleConfig.compile.danji&&(this.settleData2=new SettleData,this.settleData2.score=this.score2,null!=this.settleData1&&null!=this.settleData2&&this.showSettle())},e.prototype.showSettleByServer=function(){this.countDown.stop();var t=ZJ.UIManager.instance.openView(UIName.Settle),e=0,i="";ModuleConfig.compile.yy?(e=this.data1399.result[0].winnerPlayerId==this.data1000.player.playerId?2:0==this.data1399.result[0].winnerPlayerId?1:0,i=this.data1399.result[0].toPlatform):e=this.data11012.winPlayerId==this.dataP1.playerId?2:0==this.data11012.winPlayerId?1:0;var n={win:e,score1:this.score1,score2:this.score2,toPlatform:i};ModuleConfig.compile.chushou&&(n.dataP1=this.dataP1,n.dataP2=this.dataP2),t.setData(n),this.gameState=this.STATE_GAMEOVER,ModuleConfig.compile.yy&&ZJ.SocketManager.instance.close()},e.prototype.showSettle=function(){var t=this;this.countDown.stop(),this.gameState=this.STATE_GAMEOVER;var e=0;e=this.settleData1.score>this.settleData2.score?2:this.settleData1.score==this.settleData2.score?1:0,setTimeout(function(){var i=ZJ.UIManager.instance.openView(UIName.Settle);i.setData({win:e,score1:t.score1,score2:t.score2})},2500)},e.prototype.sendJump=function(t,e,i){ModuleConfig.compile.danji||(ModuleConfig.compile.yy?ZJ.SocketManager.instance.send(1300,{jumpScale:t*this.JUMP_SCALE_RATE,score:e,attach:JSON.stringify(i)}):ZJ.SocketManager.instance.send(11011,{score:e,resultData:ZJ.Util.objToByteArray({jumpScale:t*this.JUMP_SCALE_RATE,score:e,attach:JSON.stringify(i)}).bytes}))},e.prototype.sendSettle=function(){ModuleConfig.compile.danji||(ModuleConfig.compile.yy?ZJ.SocketManager.instance.send(1303,{jumpScale:0,score:this.score1}):ZJ.SocketManager.instance.send(11012,{winPlayerId:this.dataP1.playerId}))},e.prototype.onBigBegin=function(){this.gameState!=this.STATE_PLAYING||this.player1.isPlaying||this.player1.isGameOver||(this.player1.playAnim(),this.isBegin=!0)},e.prototype.onBigEnd=function(){var t=this;if(!this.player1.isPlaying&&this.isBegin){var e=this.player1.stopAnim(),i=this.jump(this.player1,e);this.sendJump(e,this.player1.curPlateIndex,{x:i.endX,y:i.endY}),this.isBegin=!1,this.p2WillWin||this.player1.curPlateIndex!=ModuleConfig.WIN_INDEX-1||setTimeout(function(){t.sendJump(0,t.player1.curPlateIndex*t.WIN_SCORE_ENLARGE,{x:i.endX,y:i.endY})},100)}},e.prototype.jump=function(t,e,i,n){void 0===i&&(i=-1),void 0===n&&(n=-1);var o=t.jump(e,i,n);if(t==this.cameraPlayer){ZJ.AudioManager.Instance.play("jump");var s=-o.endX+this.PLAYER_BORN[0];s==this.PLAYER_BORN[0]&&(s=this.bg.x-o.bgTime*o.V0_X);var a=s>this.bg.x;this.playBg(this.bg,this.bg1,this.bg2,s,a,1e3*o.bgTime),this.playBg(this.bg77,this.bg7,this.bg8,.5*s,a,1e3*o.bgTime),this.playBg(this.bg33,this.bg3,this.bg4,1.2*s,a,1e3*o.bgTime),this.playBg(this.bg55,this.bg5,this.bg6,1.5*s,a,1e3*o.bgTime)}return this.updateJindu(),o},e.prototype.playBg=function(t,e,i,n,o,s){var a=this;egret.Tween.removeTweens(t),egret.Tween.get(t,{onChange:function(){var n=-t.x;o?n<e.x+.4*a.BG_WIDTH&&n<i.x?i.x=e.x-a.BG_WIDTH:n<i.x+.4*a.BG_WIDTH&&n<e.x&&(e.x=i.x-a.BG_WIDTH):n>e.x+1.1*a.BG_WIDTH?e.x=i.x+a.BG_WIDTH:n>i.x+1.1*a.BG_WIDTH&&(i.x=e.x+a.BG_WIDTH)}}).to({x:n},s,egret.Ease.sineInOut)},e.prototype.createPlayer=function(){var t=new Player;return t.x=this.PLAYER_BORN[0],t.y=this.PLAYER_BORN[1],this.gPlayer.addChild(t),t},e.prototype.createPlates=function(){var t=this.plates.length,e=1e3*Math.random();ModuleConfig.compile.yy&&yyGameConfig.timestamp?e=yyGameConfig.timestamp+t:ModuleConfig.compile.chushou&&(e=this.seed+t);for(var i=0;i<this.PLATE_NUM&&t+i<ModuleConfig.WIN_INDEX;++i){var n=new Plate,o=t+i-1,s=this.plates[o];if("undefined"==typeof s)n.x=this.player1.x-0,n.y=this.player1.y+this.player1.height+2,this.plateWidth=n.width,this.plateHeight=n.height,n.img.source="w3_png";else{var a=Math.min(o/this.GAP_X_MAX_NUM,1);n.width=this.PLATE_WIDTH[1]-(this.PLATE_WIDTH[1]-this.PLATE_WIDTH[0])*Math.min(a,1),n.x=s.x+s.width+ZJ.MathUtil.randomRange(this.GAP_X[0],this.GAP_X[0]+(this.GAP_X[1]-this.GAP_X[0])*a,e+i);var r=Math.max(this.GAP_Y[0]*a,this.PLATE_Y[0]-s.y),h=Math.min(this.GAP_Y[1],this.PLATE_Y[1]-s.y),c=ZJ.MathUtil.randomRange(r,h,e+i);if(i%2==0){var l=s.y-c;l<this.PLATE_Y[1]&&l>this.PLATE_Y[0]&&(c=-c)}n.y=s.y+c,n.img.source=ZJ.Util.strFormat("w{0}_png",Math.floor(2*Math.random()+4).toString())}this.gPlate.addChild(n),this.plates.push(n),t+i==ModuleConfig.WIN_INDEX-1&&(n.img.source="w3_png",n.y=this.WIN_PLATE_Y,this.zhongdian.x=n.x+50,this.zhongdian.y=n.y,this.zhongdian.visible=!0,egret.Tween.removeTweens(this.gZhongdian),this.gZhongdian.x=this.zhongdian.x+this.ZHONGDIAN_TEXT_OFFSET[0],this.gZhongdian.y=this.zhongdian.y+this.ZHONGDIAN_TEXT_OFFSET[1],egret.Tween.get(this.gZhongdian,{loop:!0}).to({y:this.gZhongdian.y-100},500,egret.Ease.quadInOut).to({y:this.gZhongdian.y},500,egret.Ease.quadInOut))}var u=new PlayerData;u.plates=this.plates,this.player1.setData(u),this.player2.setData(u)},e.prototype.removePlates=function(){for(var t=this.plates.length;t>0;){var e=this.plates.shift();e.parent.removeChild(e),--t}},e.prototype.setAI=function(){var t=this;this.isAI=!0;var e=this;setInterval(function(){e.gameState!=e.STATE_PLAYING||e.player2.isGameOver||e.player2.isPlaying||e.player2.isPlayingAnim||(t.player2.playAnim(),setTimeout(function(){if(t.player2.stopAnim(),e.player2.curPlateIndex<e.plates.length-1){var i=e.plates[e.player2.curPlateIndex+1].x-e.player2.x;i=e.player2.PLAYER_SCALE_MIN-.05+1*e.GAP_X[0]/i*(1-e.player2.PLAYER_SCALE_MIN)*Math.random(),i=Math.max(t.player2.PLAYER_SCALE_MIN,Math.min(i,1)),e.jump(e.player2,i)}},600))},3e3)},e.prototype.onGameExit=function(t){this.chushouSDK.csExitGame()},e.prototype.mylog=function(t){this.log.text=t+"\n"+this.log.text,console.log(t)},e.prototype.onDestroy=function(){return clearInterval(this.intervalID),clearInterval(this.intervalPing),ZJ.EventManager.instance.removeEventListener(EventName.GAME_RESTART,this.onRestart,this),ZJ.EventManager.instance.removeEventListener(EventName.GAME_EXIT,this.onGameExit,this),ZJ.EventManager.instance.removeEventListener(EventName.Test,this.onTest,this),this.player1.removeEventListener(EventName.PLAYER_JUMP_END,this.onPlayerJumpEnd,this),this.player1.removeEventListener(EventName.PLAYER_FUHUO,this.onPlayerFuhuo,this),this.player1.removeEventListener(EventName.PLAYER_WIN,this.onPlayerWin,this),this.player2.removeEventListener(EventName.PLAYER_WIN,this.onPlayer2Win,this),this.player2.removeEventListener(EventName.PLAYER_JUMP_END,this.onPlayer2JumpEnd,this),this.player2.removeEventListener(EventName.PLAYER_FUHUO,this.onPlayer2Fuhuo,this),ZJ.SocketManager.instance.removeEventListener(ZJ.CommonEventName.SOCKET_CONNECTED,this.onSocketConnected,this),ZJ.SocketManager.instance.removeEventListener(ZJ.CommonEventName.SOCKET_DATA,this.onSocketData,this),0},e}(ZJ.ViewBase);__reflect(GameView.prototype,"GameView");var LoadingView=function(t){function e(){var e=t.call(this)||this;return e.intervalID=0,e.ran1=0,e.ran2=0,e}return __extends(e,t),e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this);var e=ZJ.ShapeUtil.getRect(0,1,this.stage.stageWidth,this.stage.stageHeight);this.black.addChild(e)},e.prototype.onProgress=function(t,e){this.load1.text=Math.floor(t/e*100)+"%"},e.prototype.onDestroy=function(){return t.prototype.onDestroy.call(this),clearInterval(this.intervalID),0},e}(ZJ.ViewBase);__reflect(LoadingView.prototype,"LoadingView");var SettleView=function(t){function e(){var e=t.call(this)||this;return e.SHOW_TIME=3e3,e.RESTART_NONE=0,e.RESTART_SEND=1,e.RESTART_RECEIVE=2,e.RESTART_EXIT=3,e.RESTART_SUCCESS=4,e.toPlatform="",e.timeoutid=0,e.restartState=e.RESTART_NONE,e.skinName="SettleView2Skin",e}return __extends(e,t),e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.yuezhan.visible=!1;var e=ZJ.ShapeUtil.getRect(0,.8,this.stage.stageWidth,this.stage.stageHeight);this.gBg.addChild(e),egret.Tween.get(this.bg,{loop:!0}).to({rotation:360},7e3),this.restart.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBigClick,this),this.restart.icon="dbz1_png"},e.prototype.onBigClick=function(){ModuleConfig.compile.chushou?(clearTimeout(this.timeoutid),ZJ.SocketManager.instance.send(11007),this.updateRestart(this.RESTART_SEND)):this.onTimeout()},e.prototype.onTimeout=function(){ModuleConfig.compile.danji?(ZJ.EventManager.instance.dispatchEvent(new egret.Event(EventName.GAME_RESTART)),ZJ.UIManager.instance.destroyView(UIName.Settle)):ModuleConfig.compile.yy?sendResult(this.toPlatform):ModuleConfig.compile.chushou},e.prototype.setData=function(t){var e=this;this.toPlatform=t.toPlatform,this.bg&&(2==t.win?this.bg.source="shenglidi_png":1==t.win?this.bg.source="pingdi_png":this.bg.source="shibaidi_png"),this.score1.text=t.score1.toString(),this.score2.text=t.score2.toString(),this.gWin.visible=2==t.win,this.gPing.visible=1==t.win,this.gLose.visible=0==t.win,ModuleConfig.compile.chushou&&(ModuleConfig.compile.danji||(this.head1.source=t.dataP1.avatarUrl,this.head1.mask=this.head1mask,this.name1.text=t.dataP1.nickname,this.head2.source=t.dataP2.avatarUrl,this.head2.mask=this.head2mask,this.name2.text=t.dataP2.nickname)),this.timeoutid=setTimeout(function(){e.onTimeout()},this.SHOW_TIME)},e.prototype.receiveRestart=function(){this.updateRestart(this.RESTART_RECEIVE)},e.prototype.receiveExit=function(){this.updateRestart(this.RESTART_EXIT)},e.prototype.updateRestart=function(t){switch((this.restartState==this.RESTART_SEND&&t==this.RESTART_RECEIVE||this.restartState==this.RESTART_RECEIVE&&t==this.RESTART_SEND)&&(t=this.RESTART_SUCCESS),this.restartState=t,this.restartState){case this.RESTART_NONE:this.restart.icon="dbz1_png";break;case this.RESTART_SEND:this.restart.icon="dbz4_png";break;case this.RESTART_RECEIVE:this.restart.icon="dbz2_png",this.yuezhan.visible=!0,egret.Tween.get(this.yuezhan,{loop:!0}).to({scaleX:.8,scaleY:.8},500).to({scaleX:1,scaleY:1},500);break;case this.RESTART_EXIT:this.restart.icon="dbz3_png",this.restart.enabled=!1;break;case this.RESTART_SUCCESS:}},e.prototype.onDestroy=function(){return t.prototype.onDestroy.call(this),clearTimeout(this.timeoutid),egret.Tween.removeTweens(this.yuezhan),egret.Tween.removeTweens(this.bg),0},e}(ZJ.ViewBase);__reflect(SettleView.prototype,"SettleView");var TestView=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),ZJ.UIManager.instance.destroyView(UIName.Loading),this.initChushouTest()},e.prototype.initFeibiao=function(){new eui.Image},e.prototype.initHitTest=function(){var t=this,e=new eui.Button;this.addChild(e),e.x=0,e.y=100;var i=new eui.Button;this.addChild(i),i.x=20,i.y=100,setTimeout(function(){console.log(t.myHitTest(e,i))},1e3)},e.prototype.myHitTest=function(t,e){var i=t.getBounds(),n=e.getBounds();return i.x=t.x,i.y=t.y,n.x=e.x,n.y=e.y,i.intersects(n)},e.prototype.onSocketConnected=function(){console.log("onSocketConnected")},e.prototype.onSocketData=function(t){console.log("onSocketData")},e.prototype.initChushouTest=function(){for(var t=new ChushouSDK,e=100,i=200,n=600,o=250,s=4,a=["csAuthRequest","csJoinRoom","csQuitRoom","csInviteToGame","csKickOutUser","csShareRoom","csShareRecord","csGetFriendList","csGetUserRelationship","csFollowUser","csEnableMic","csEnableAudioOutput","onUserVolumeUpdate","csExitGame","csNotifyLoadProgress","onNetworkStatusChange","csGetAPIVersionInfo","csInvokeRecharge","onBalanceChanged","csPurchaseProps","csPayEntryFee","csCheckEntryFee","cs_10000","cs_10001","无视，进入游戏"],r=[t.csAuthRequest,t.csJoinRoom,t.csQuitRoom,t.csInviteToGame,t.csKickOutUser,t.csShareRoom,t.csShareRecord,t.csGetFriendList,t.csGetUserRelationship,t.csFollowUser,t.csEnableMic,t.csEnableAudioOutput,t.onUserVolumeUpdate,t.csExitGame,t.csNotifyLoadProgress,t.onNetworkStatusChange,t.csGetAPIVersionInfo,t.csInvokeRecharge,t.onBalanceChanged,t.csPurchaseProps,t.csPayEntryFee,t.csCheckEntryFee,this.cs_10000,this.cs_10001,this.enterGame],h=0,c=a.length;c>h;++h){var l=this.getChushouBtn();l.x=e+h%s*n,l.y=i+Math.floor(h/s)*o,l.label=a[h],l.addEventListener(egret.TouchEvent.TOUCH_TAP,r[h],this)}},e.prototype.getChushouBtn=function(){var t=new eui.Button;return this.addChild(t),t.width=400,t.height=150,t.labelDisplay.size=40,t},e.prototype.cs_10000=function(){console.log("cs_10000"),ZJ.SocketManager.instance.send(1e4,{openId:"2333",sign:"sign",timestamp:ZJ.Util.timeStamp(),appId:1234,params:"params"})},e.prototype.cs_10001=function(){console.log("cs_10001"),ZJ.SocketManager.instance.send(10001,{gameMode:1,matchType:1,matchId:3})},e.prototype.enterGame=function(){ZJ.UIManager.instance.openView(UIName.Game),ZJ.UIManager.instance.destroyView(UIName.Test)},e.prototype.onDestroy=function(){return t.prototype.onDestroy.call(this),0},e}(ZJ.ViewBase);__reflect(TestView.prototype,"TestView");var ZJ;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.INTERVAL=60,i.DISTANCE=20,i.pastTime=0,i.lastPos=new t.Vector3,i.nowPos=new t.Vector3,i.isBegin=!1,i.intervalID=0,i}return __extends(i,e),i.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},i.prototype.childrenCreated=function(){var t=this;e.prototype.childrenCreated.call(this),this.layer.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this),this.layer.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this),this.layer.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this),this.intervalID=setInterval(function(){t.onInterval()},this.INTERVAL)},i.prototype.onInterval=function(){if(this.isBegin){var e=this.nowPos.x-this.lastPos.x,i=this.nowPos.y-this.lastPos.y,n=Math.abs(e),o=Math.abs(i),s={};if(n>o?n>this.DISTANCE&&(e>0?s.direct=t.CommonConfig.RIGHT:s.direct=t.CommonConfig.LEFT,this.isBegin=!1):o>this.DISTANCE&&(i>0?s.direct=t.CommonConfig.DOWN:s.direct=t.CommonConfig.UP,this.isBegin=!1),!this.isBegin){var a=new egret.Event(t.CommonEventName.GESTURE_DIRECT);a.data=s,t.EventManager.instance.dispatchEvent(a)}this.lastPos.x=this.nowPos.x,this.lastPos.y=this.nowPos.y}},i.prototype.onTouchBegin=function(t){this.pastTime=0,this.nowPos.x=t.stageX,this.nowPos.y=t.stageY,this.lastPos.x=t.stageX,this.lastPos.y=t.stageY,this.isBegin=!0},i.prototype.onTouchEnd=function(t){this.isBegin=!1},i.prototype.onTouchMove=function(t){this.nowPos.x=t.stageX,this.nowPos.y=t.stageY},i.prototype.OnDestroy=function(){return clearInterval(this.intervalID),0},i}(t.ComponentBase);t.Gesture=e,__reflect(e.prototype,"ZJ.Gesture")}(ZJ||(ZJ={}));var ZJ;!function(t){var e=function(){function t(){}return t.randomRange=function(t,e,i){null==i&&(i=1e4*Math.random());var n=this.randomSeed(i);return n/=233280,Math.floor(t+n*(e-t))},t.randomSeed=function(t){return t=(9301*t+49297)%233280},t.YiYuanErCi=function(t,e,i){var n,o,s,a=[];return n=e*e-4*t*i,0>n||(o=(-1*e+Math.sqrt(n))/(2*t),s=(-1*e-Math.sqrt(n))/(2*t),a.push(o),a.push(s)),a},t}();t.MathUtil=e,__reflect(e.prototype,"ZJ.MathUtil")}(ZJ||(ZJ={}));var ZJ;!function(t){var e=function(){function e(){this.aa=null,this.stage=null,this.dbFactory=dragonBones.EgretFactory.factory,this.dbFileNames=[]}return Object.defineProperty(e,"instance",{get:function(){return this._instance},enumerable:!0,configurable:!0}),e.prototype.init=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return this.stage=t,this.aa=new AssetAdapter,[4,this.loadConfig("resource/default.res.json","resource/")];case 1:return e.sent(),[4,this.loadTheme()];case 2:return e.sent(),[2]}})})},e.prototype.loadRes=function(t,e,i,n){this.aa.getAsset(t,e,i,n)},e.prototype.loadExistRes=function(t){return RES.getRes(t)},e.prototype.loadConfig=function(t,e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(i){switch(i.label){case 0:return[4,RES.loadConfig(t,e)];case 1:return i.sent(),[2]}})})},e.prototype.loadGroup=function(t,e,i){return void 0===e&&(e=0),void 0===i&&(i=null),__awaiter(this,void 0,void 0,function(){var n;return __generator(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,RES.loadGroup(t,e,i)];case 1:return o.sent(),[3,3];case 2:return n=o.sent(),console.error(n),[3,3];case 3:return[2]}})})},e.prototype.loadTheme=function(){var t=this;return new Promise(function(e,i){var n=new eui.Theme("resource/default.thm.json",t.stage);n.addEventListener(eui.UIEvent.COMPLETE,function(){e()},t)})},e.prototype.loadMovieClip=function(e,i,n){t.ResManager.instance.loadRes(e+"_json",function(o,s){var a=o;t.ResManager.instance.loadRes(e+"_png",function(t,e){var o=t,s=new egret.MovieClipDataFactory(a,o),r=new egret.MovieClip(s.generateMovieClipData(i));n(r,s)},this)},this)},e.prototype.loadDragonBones=function(t,e){if(void 0===e&&(e=""),""==e&&(e=t),-1==this.dbFileNames.indexOf(t)){var i=this.loadExistRes(t+"_ske_json"),n=this.loadExistRes(t+"_tex_json"),o=this.loadExistRes(t+"_tex_png");this.dbFactory.parseDragonBonesData(i),this.dbFactory.parseTextureAtlasData(n,o),this.dbFileNames.push(t)
}var s=this.dbFactory.buildArmatureDisplay(e);return s},e.prototype.replaceDBSlotDisplay=function(t,e,i,n,o){void 0===e&&(e=""),""==e&&(e=t),this.dbFactory.replaceSlotDisplay(t,e,i,n,o)},e._instance=new e,e}();t.ResManager=e,__reflect(e.prototype,"ZJ.ResManager")}(ZJ||(ZJ={}));var ZJ;!function(t){var e=function(){function t(){}return t.getRect=function(t,e,i,n,o,s){void 0===o&&(o=0),void 0===s&&(s=0);var a=new egret.Shape;return a.graphics.beginFill(t,e),a.graphics.drawRect(o,s,i,n),a.graphics.endFill(),a},t.getCircle=function(t,e,i,n,o){void 0===n&&(n=0),void 0===o&&(o=0);var s=new egret.Shape;return s.graphics.beginFill(t,e),s.graphics.drawCircle(n,o,i),s.graphics.endFill(),s},t.getLine=function(t,e,i,n,o,s,a){var r=new egret.Shape;return r.graphics.lineStyle(i,t,e),r.graphics.moveTo(n,o),r.graphics.lineTo(s,a),r.graphics.endFill(),r},t.getArc=function(t,e,i,n,o,s,a,r,h){void 0===a&&(a=!1),void 0===r&&(r=0),void 0===h&&(h=0);var c=new egret.Shape;return c.graphics.lineStyle(i,t,e),c.graphics.drawArc(r,h,n,Math.PI/180*o,Math.PI/180*s,a),c.graphics.endFill(),c},t.getArch=function(t,e,i,n,o,s,a,r){void 0===s&&(s=!1),void 0===a&&(a=0),void 0===r&&(r=0);var h=new egret.Shape;return h.graphics.beginFill(t,e),h.graphics.drawArc(a,r,i,Math.PI/180*n,Math.PI/180*o,s),h.graphics.endFill(),h},t.setArcMask=function(t,e,i,n,o,s,a){void 0===o&&(o=!1),void 0===s&&(s=t.x),void 0===a&&(a=t.y);var r;null!=t.mask?r=t.mask:(r=new egret.Shape,t.parent.addChild(r));var h=Math.round(i+360*n)*Math.PI/180;i*=Math.PI/180,r.graphics.clear(),r.graphics.beginFill(16711680,1),r.graphics.lineTo(e,0),r.graphics.drawArc(s,a,e,i,h,o),r.graphics.lineTo(s,a),r.graphics.endFill(),r.x=t.x,r.y=t.y,t.mask=r},t}();t.ShapeUtil=e,__reflect(e.prototype,"ZJ.ShapeUtil")}(ZJ||(ZJ={}));var ZJ;!function(t){var e=function(t){function e(e,i,n,o){var s=t.call(this,e,i,n,o)||this;return s.data=null,s}return __extends(e,t),e}(egret.Event);t.SocketDataEvent=e,__reflect(e.prototype,"ZJ.SocketDataEvent")}(ZJ||(ZJ={}));var ZJ;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.socket=null,t.ProtoBufRoot=new protobuf.Root,t.send=null,t.onSocketData=null,t.getProtoByID=null,t._company=1,t.clientIndex=0,t}return __extends(i,e),Object.defineProperty(i,"instance",{get:function(){return this._instance},enumerable:!0,configurable:!0}),i.prototype.init=function(){return this.parseProto(),this.socket=new egret.WebSocket,this.socket.type=egret.WebSocket.TYPE_BINARY,this.setCompany(1),this.socket.addEventListener(egret.ProgressEvent.SOCKET_DATA,this.onSocketData,this),this.socket.addEventListener(egret.Event.CONNECT,this.onSocketConnect,this),0},i.prototype.parseProto=function(){for(var t=this.ProtoBufRoot,e=ModuleConfig.protoFiles,i=0,n=e.length;n>i;++i){var o=RES.getRes(e[i]);protobuf.parse(o,t)}},i.prototype.setCompany=function(t){switch(this._company=t,t){case 2:this.send=this.sendYouai,this.onSocketData=this.onSocketDataYouai,this.getProtoByID=this.getProtoByIDYouai;break;case 3:this.send=this.sendAli,this.getProtoByID=this.getProtoByIDHuoshu;break;default:this.send=this.sendHuoshu,this.onSocketData=this.onSocketDataHuoshu,this.getProtoByID=this.getProtoByIDHuoshu}},i.prototype.connect=function(t,e){this.socket.connect(t,e)},i.prototype.connectByUrl=function(t){this.socket.connectByUrl(t)},i.prototype.close=function(){this.socket.close()},i.prototype.onSocketConnect=function(e){var i=new egret.Event(t.CommonEventName.SOCKET_CONNECTED);this.dispatchEvent(i)},i.prototype.buildSmallShitByID=function(t,e){var i=this.getProtoByID(t,!0),n=this.buildSmallShit(i,e);return n},i.prototype.decodeShitByID=function(t,e){var i=this.getProtoByID(t,!1),n=this.decodeShit(i,e);return n},i.prototype.buildSmallShit=function(t,e){var i=t.create(e),n=t.encode(i),o=n.finish();return o},i.prototype.decodeShit=function(t,e){var i=t.decode(e);return i},i.prototype.sendHuoshu=function(t,e){void 0===e&&(e={}),console.log("send: "+t),console.log(JSON.stringify(e));var i=this.buildSmallShitByID(t,e),n=new egret.ByteArray;n.writeInt(i.byteLength),n.writeShort(t),n._writeUint8Array(i),this.socket.writeBytes(n)},i.prototype.onSocketDataHuoshu=function(e){var i=new egret.ByteArray;this.socket.readBytes(i);var n=(i.readInt(),i.readShort()),o=this.decodeShitByID(n,i.bytes.subarray(6));console.log("receive: "+n),console.log(JSON.stringify(o));var s=new t.SocketDataEvent(t.CommonEventName.SOCKET_DATA);s.data={data:o,protoID:n},this.dispatchEvent(s)},i.prototype.getProtoByIDHuoshu=function(e,i){var n=(Math.floor(e/1e3),""),o="";o=i?"cs_":"sc_",n=o+e;var s=t.SocketManager.instance.ProtoBufRoot,a=s.lookupType(n);return a},i.prototype.sendYouai=function(t,e){void 0===e&&(e={});var i=this.buildSmallShitByID(t,e),n=this.buildSmallShitByID(99999,{messageId:t,clientIndex:this.clientIndex++,data:i}),o=new egret.ByteArray(n);this.socket.writeBytes(o)},i.prototype.onSocketDataYouai=function(e){var i=new egret.ByteArray;this.socket.readBytes(i);var n=this.decodeShitByID(99999,i.bytes),o="",s={},a=n.result,r=n.messageId;n.result?s=this.decodeShitByID(n.messageId,n.data):o=t.Util.Utf8ArrayToStr(n.data);var h=new t.SocketDataEvent(t.CommonEventName.SOCKET_DATA);h.data={data99999:n,error:o,result:a,data:s,protoID:r},this.dispatchEvent(h)},i.prototype.getProtoByIDYouai=function(e,i){var n="";if(i)switch(e){case 99999:n="ClientCmdData";break;case 1e3:n="CmdLoginGameReqMsg";break;case 1001:n="CmdPingReqMsg";break;case 1300:n="CmdJumperUploadAnswerReqMsg";break;case 1303:n="CmdJumperGameOverReqMsg"}else switch(e){case 99999:n="ServerCmdData";break;case 1e3:n="CmdLoginGameRspMsg";break;case 1001:n="CmdPingRspMsg";break;case 1300:n="CmdJumperUploadAnswerRspMsg";break;case 1303:n="CmdJumperGameOverRspMsg";break;case 1399:n="CmdBroadcastJumperBC"}var o=t.SocketManager.instance.ProtoBufRoot,s=o.lookupType(n);return s},i.prototype.sendAli=function(t,e){void 0===e&&(e={});var i=this.buildSmallShitByID(t,e),n=new egret.ByteArray;n.writeInt(i.byteLength),n.writeShort(t),n._writeUint8Array(i),ALISDK.CatcherSDK.instance().sendData(n.buffer)},i.prototype.onSocketDataAli=function(e){var i=new egret.ByteArray(e),n=(i.readInt(),i.readShort()),o=this.decodeShitByID(n,i.bytes.subarray(6));console.log("receive: "+n),console.log(o);var s=new t.SocketDataEvent(t.CommonEventName.SOCKET_DATA);s.data={data:o,protoID:n},this.dispatchEvent(s)},i.prototype.connectByUrlAli=function(e){var i=this;ALISDK.CatcherSDK.init({url:"ws://"+e.ip+":"+e.port+"/ws/game",gameVersion:"0.0.1",gameId:"123123",messageType:"ARRAYBUFFER"}),ALISDK.CatcherSDK.instance().on("CONNECT",function(e){var n=new t.ChannelDataEvent(t.CommonEventName.CHANNEL_DATA);n.data={eventName:"CONNECT",event:e},i.dispatchEvent(n)}).on("PROGRESS",function(e){var n=new t.ChannelDataEvent(t.CommonEventName.CHANNEL_DATA);n.data={eventName:"PROGRESS",event:e},i.dispatchEvent(n)}).on("READY",function(e){var n=new t.ChannelDataEvent(t.CommonEventName.CHANNEL_DATA);n.data={eventName:"READY",event:e},i.dispatchEvent(n)}).on("KICK",function(e){var n=new t.ChannelDataEvent(t.CommonEventName.CHANNEL_DATA);n.data={eventName:"KICK",event:e},i.dispatchEvent(n)}).on("GAMEOVER",function(e){var n=new t.ChannelDataEvent(t.CommonEventName.CHANNEL_DATA);n.data={eventName:"GAMEOVER",event:e},i.dispatchEvent(n)}).on("BREAK",function(e){var n=new t.ChannelDataEvent(t.CommonEventName.CHANNEL_DATA);n.data={eventName:"BREAK",event:e},i.dispatchEvent(n)}).on("CONTINUE",function(e){var n=new t.ChannelDataEvent(t.CommonEventName.CHANNEL_DATA);n.data={eventName:"CONTINUE",event:e},i.dispatchEvent(n)}).on("ERROR",function(e){var n=new t.ChannelDataEvent(t.CommonEventName.CHANNEL_DATA);n.data={eventName:"ERROR",event:e},i.dispatchEvent(n)}).on("MIC_CHANGE",function(e){var n=new t.ChannelDataEvent(t.CommonEventName.CHANNEL_DATA);n.data={eventName:"MIC_CHANGE",event:e},i.dispatchEvent(n)}).on("AUDIO_CHANGE",function(e){var n=new t.ChannelDataEvent(t.CommonEventName.CHANNEL_DATA);n.data={eventName:"AUDIO_CHANGE",event:e},i.dispatchEvent(n)}).on("MESSAGE",function(t){i.onSocketDataAli(t.data)}).start()},i._instance=new i,i}(egret.EventDispatcher);t.SocketManager=e,__reflect(e.prototype,"ZJ.SocketManager")}(ZJ||(ZJ={}));var ZJ;!function(t){var e=function(){function e(){this._tables={}}return Object.defineProperty(e,"instance",{get:function(){return this._instance},enumerable:!0,configurable:!0}),e.prototype.init=function(){return this.load("bg_djw_png"),0},Object.defineProperty(e.prototype,"tables",{get:function(){return this._tables},enumerable:!0,configurable:!0}),e.prototype.load=function(e){t.ResManager.instance.loadRes(e,function(e){for(var i=new JSZip(e),n=i.file(/^[tc].*/),o=0,s=n.length;s>o;o++){var a=n[o],r=t.Util.strFormat("shared/{0}",a.name);this._tables[r]=JSON.parse(a.asText())}t.EventManager.instance.dispatchEvent(new egret.Event(t.CommonEventName.TABLE_LOADED))},this)},e._instance=new e,e}();t.TableManager=e,__reflect(e.prototype,"ZJ.TableManager")}(ZJ||(ZJ={}));var ThemeAdapter=function(){function t(){}return t.prototype.getTheme=function(t,e,i,n){function o(t){e.call(n,t)}function s(e){e.resItem.url==t&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,s,null),i.call(n))}"undefined"!=typeof generateEUI?egret.callLater(function(){e.call(n,generateEUI)},this):(RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,s,null),RES.getResByUrl(t,o,this,RES.ResourceItem.TYPE_TEXT))},t}();__reflect(ThemeAdapter.prototype,"ThemeAdapter",["eui.IThemeAdapter"]);var AssetAdapter=function(){function t(){}return t.prototype.getAsset=function(t,e,i,n){function o(n){e.call(i,n,t)}if(void 0===n&&(n=RES.ResourceItem.TYPE_IMAGE),RES.hasRes(t)){var s=RES.getRes(t);s?o(s):RES.getResAsync(t,o,this)}else RES.getResByUrl(t,o,this,n)},t}();__reflect(AssetAdapter.prototype,"AssetAdapter",["eui.IAssetAdapter"]);var ZJ;!function(t){var e=function(){function t(){this._uiLayers=[],this.uiDatas={},this.uiroot=null,this.views={}}return Object.defineProperty(t,"instance",{get:function(){return this._instance},enumerable:!0,configurable:!0}),t.prototype.init=function(t){return this.uiroot=t,0},Object.defineProperty(t.prototype,"uiLayers",{set:function(t){if(this._uiLayers.length>0)egret.warn("uiLayers已经设定。");else{this._uiLayers=t;for(var e=0,i=this._uiLayers.length;i>e;++e){var n=new eui.Group;n.name="layer"+e,n.touchEnabled=!1,this.uiroot.addChild(n),n.percentWidth=100,n.percentHeight=100}}},enumerable:!0,configurable:!0}),t.prototype.getUIData=function(t){return this.uiDatas[t]},t.prototype.getView=function(t){return this.views[t]},t.prototype.openView=function(t){var e=this.getUIData(t);if(void 0==e)return egret.log("ModuleConfig没有界面配置: "+t),null;var i=this.getView(t);if(void 0!=i);else{if(i=new e.viewClass,void 0==i)return console.warn("viewClass不存在 请检查ModuleConfig.uiDatas"),null;i.percentWidth=100,i.percentHeight=100,this.views[t]=i;var n=0;e.layer<this.uiroot.numChildren&&(n=e.layer),this.uiroot.getChildAt(n).addChild(i)}return i.visible=!0,i.parent.setChildIndex(i,9999),i.show(),i},t.prototype.destroyView=function(t){var e=this.getView(t);return void 0!=e&&null!=e&&(e.onDestroy(),e.parent.removeChild(e),this.views[t]=null),0},t._instance=new t,t}();t.UIManager=e,__reflect(e.prototype,"ZJ.UIManager")}(ZJ||(ZJ={}));var ZJ;!function(t){var e=function(){function t(){}return t.getChar=function(t,e){var i=new egret.ByteArray;return i.writeUTFBytes(t),i.length<e?t:(i.position=0,i.readUTFBytes(e)+"...")},t.strFormat=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];return t.replace(/\{(\d+)\}/g,function(t,i){return e[i]})},t.timeStamp=function(t){return t=t||(new Date).toString(),Date.parse(t)/1e3},t.Utf8ArrayToStr=function(t){var e,i,n,o,s,a;for(e="",n=t.length,i=0;n>i;)switch(o=t[i++],o>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:e+=String.fromCharCode(o);break;case 12:case 13:s=t[i++],e+=String.fromCharCode((31&o)<<6|63&s);break;case 14:s=t[i++],a=t[i++],e+=String.fromCharCode((15&o)<<12|(63&s)<<6|(63&a)<<0)}return e},t.getClassName=function(t){if(t&&t.constructor&&t.constructor.toString()){if(t.constructor.name)return t.constructor.name;var e=t.constructor.toString();if("["==e.charAt(0))var i=e.match(/\[\w+\s*(\w+)\]/);else var i=e.match(/function\s*(\w+)/);if(i&&2==i.length)return i[1]}},t.objToByteArray=function(t){var e=JSON.stringify(t),i=new egret.ByteArray;return i.writeUTF(e),i},t.bytesToObj=function(t){var e=new egret.ByteArray(t),i=JSON.parse(e.readUTF());return i},t.rmArrayObj=function(t,e){return-1!=t.indexOf(e)?t.splice(t.indexOf(e),1):void 0},t}();t.Util=e,__reflect(e.prototype,"ZJ.Util")}(ZJ||(ZJ={}));var ZJ;!function(t){var e=function(){function t(t,e,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),this.x=0,this.y=0,this.z=0,this.x=t,this.y=e,this.z=i}return t}();t.Vector3=e,__reflect(e.prototype,"ZJ.Vector3")}(ZJ||(ZJ={}));var ZJ;!function(t){var e=function(){function e(){this.bgm="bgm",this._isMute=!1,this.sounds={},this.soundsChannel={}}return Object.defineProperty(e,"Instance",{get:function(){return this._instance},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isMute",{get:function(){return this._isMute},set:function(t){this._isMute=t,this._isMute?this.stopAll():(this.stopBgm(),this.playBgm())},enumerable:!0,configurable:!0}),e.prototype.playBgm=function(t,e){void 0===t&&(t=0),void 0===e&&(e=1),this._isMute||null!=this.bgm&&""!=this.bgm&&this.play(this.bgm,t,e)},e.prototype.stopBgm=function(){this.stop(this.bgm)},e.prototype.play=function(e,i,n){var o=this;void 0===i&&(i=1),void 0===n&&(n=1);var s=e+"_mp3";if(!this._isMute)if(null!=this.sounds[e]){var a=this.sounds[e].play(0,i);this.soundsChannel[e]=a,a.volume=n}else t.ResManager.instance.loadRes(s,function(t,s){var a=t,r=a.play(0,i);r.volume=n,o.sounds[e]=a,o.soundsChannel[e]=r},this)},e.prototype.stop=function(t){null!=this.soundsChannel[t]&&(this.soundsChannel[t].stop(),this.soundsChannel[t]=null)},e.prototype.stopAll=function(){for(var t in this.soundsChannel)this.stop(t)},e.prototype.getSound=function(t){return this.sounds[t]},e.prototype.getChannel=function(t){return this.soundsChannel[t]},e._instance=new e,e}();t.AudioManager=e,__reflect(e.prototype,"ZJ.AudioManager")}(ZJ||(ZJ={}));var ZJ;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.skinName="ZJButtonSkin",e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),console.log(this.img),this.img.source="w3_png"},e}(eui.Button);t.Button=e,__reflect(e.prototype,"ZJ.Button")}(ZJ||(ZJ={}));var ZJ;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.cb=null,t.leftSecond=0,t.intervalID=0,t.isPause=!1,t.skinName="CountDownSkin",t}return __extends(i,e),i.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},i.prototype.start=function(t){var e=this;this.stop(),this.isPause=!1,this.leftSecond=t,this.count(),this.intervalID=setInterval(function(){e.count()},1e3)},i.prototype.pause=function(){this.isPause=!0},i.prototype.resume=function(){this.isPause=!1},i.prototype.stop=function(){clearInterval(this.intervalID)},i.prototype.setSecond=function(e){var i=Math.floor(e/60)%60,n=e%60,o=this.checkTime(i),s=this.checkTime(n);this.label.text=t.Util.strFormat("{0}:{1}",o,s)},i.prototype.count=function(){return this.setSecond(this.leftSecond),0==this.leftSecond?(this.stop(),void(null!=this.cb&&this.cb())):void(this.isPause||this.leftSecond--)},i.prototype.checkTime=function(t){return 10>t&&(t="0"+t),t},i.prototype.OnDestroy=function(){this.cb=null,this.stop()},i}(eui.Component);t.CountDown=e,__reflect(e.prototype,"ZJ.CountDown",["eui.UIComponent","egret.DisplayObject"])}(ZJ||(ZJ={}));var DebugPlatform=function(){function t(){}return t.prototype.getUserInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,{nickName:"username"}]})})},t.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t.prototype.share=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t}();__reflect(DebugPlatform.prototype,"DebugPlatform",["Platform"]),window.platform||(window.platform=new DebugPlatform);var ImgAnim=function(t){function e(e){var i=t.call(this)||this;return i.interval=0,i.loop=!0,i.index=0,i.imgArray=e,i.source=e[0],i}return __extends(e,t),e.prototype.play=function(){var t=this;this.id=setInterval(function(){t.index++,t.index>=t.imgArray.length&&(t.loop?t.index=0:t.stop()),t.source=t.imgArray[t.index]},this.interval,this)},e.prototype.replay=function(){this.index=0,clearInterval(this.id),this.play()},e.prototype.pause=function(){clearInterval(this.id)},e.prototype.stop=function(){this.index=0,clearInterval(this.id)},e}(eui.Image);__reflect(ImgAnim.prototype,"ImgAnim");var UILayer=function(){function t(){}return t.View=0,t.Pop=1,t.SDK=2,t}();__reflect(UILayer.prototype,"UILayer");var UIName=function(){function t(){}return t.Test="Test",t.Game="Game",t.Settle="Settle",t.Loading="Loading",t}();__reflect(UIName.prototype,"UIName");var ModuleConfig=function(){function t(){}return t.WIN_INDEX=6,t.uiLayers=[UILayer.View,UILayer.Pop,UILayer.SDK],t.uiDatas=(_a={},_a[UIName.Test]=new ZJ.UIData(UIName.Test,UILayer.View,TestView),_a[UIName.Game]=new ZJ.UIData(UIName.Game,UILayer.View,GameView),_a[UIName.Settle]=new ZJ.UIData(UIName.Settle,UILayer.View,SettleView),_a[UIName.Loading]=new ZJ.UIData(UIName.Loading,UILayer.Pop,LoadingView),_a),t.compile={need_loading:!0,chushou:!0,chushou_h5AppName:"tyt",danji:!1},t.ip="dev-game.u17games.com",t.port="12011",t.protoFiles=["p10_proto","p11_proto"],t}();__reflect(ModuleConfig.prototype,"ModuleConfig");var EventName=function(){function t(){}return t.Test="Test",t.GAME_RESTART="GAME_RESTART",t.GAME_EXIT="GAME_EXIT",t.PLAYER_DIE="PLAYER_DIE",t.PLAYER_FUHUO="PLAYER_FUHUO",t.PLAYER_WIN="PLAYER_WIN",t.PLAYER_JUMP_END="PLAYER_JUMP_END",t}();__reflect(EventName.prototype,"EventName");var _a,ModuleStartUp=function(){function t(){}return t.init=function(){return ZJ.SocketManager.instance.setCompany(1),ZJ.AudioManager.Instance.bgm="theme",ZJ.UIManager.instance.openView(UIName.Game),0},t}();__reflect(ModuleStartUp.prototype,"ModuleStartUp");var ModuleUtil=function(){function t(){}return Object.defineProperty(t,"tables",{get:function(){return ZJ.TableManager.instance.tables},enumerable:!0,configurable:!0}),t.getProtoByID=function(t,e){var i="";if(e)switch(t){case 99999:i="ClientCmdData";break;case 1e3:i="CmdLoginGameReqMsg";break;case 1001:i="CmdPingReqMsg";break;case 1300:i="CmdJumperUploadAnswerReqMsg";break;case 1303:i="CmdJumperGameOverReqMsg"}else switch(t){case 99999:i="ServerCmdData";break;case 1e3:i="CmdLoginGameRspMsg";break;case 1001:i="CmdPingRspMsg";break;case 1300:i="CmdJumperUploadAnswerRspMsg";break;case 1303:i="CmdJumperGameOverRspMsg";break;case 1399:i="CmdBroadcastJumperBC"}var n=ZJ.SocketManager.instance.ProtoBufRoot,o=n.lookupType(i);return o},t}();__reflect(ModuleUtil.prototype,"ModuleUtil");var MyCountDown=function(t){function e(){var e=t.call(this)||this;return e.cb=null,e.leftSecond=0,e.intervalID=0,e.isPause=!1,e.skinName="MyCountDownSkin",e}return __extends(e,t),e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e.prototype.start=function(t){var e=this;this.stop(),this.isPause=!1,this.leftSecond=t,this.count(),this.intervalID=setInterval(function(){e.count()},1e3)},e.prototype.pause=function(){this.isPause=!0},e.prototype.resume=function(){this.isPause=!1},e.prototype.stop=function(){clearInterval(this.intervalID)},e.prototype.setSecond=function(t){var e=Math.floor(t/60)%60,i=t%60,n=this.checkTime(e),o=this.checkTime(i);this.label.text=ZJ.Util.strFormat("{0}:{1}",n,o)},e.prototype.count=function(){return this.setSecond(this.leftSecond),0==this.leftSecond?(this.stop(),void(null!=this.cb&&this.cb())):void(this.isPause||this.leftSecond--)},e.prototype.checkTime=function(t){return 10>t&&(t="0"+t),t},e.prototype.OnDestroy=function(){this.cb=null,this.stop()},e}(eui.Component);__reflect(MyCountDown.prototype,"MyCountDown",["eui.UIComponent","egret.DisplayObject"]);var NumCountDown=function(t){function e(){var e=t.call(this)||this;return e.cb=null,e.leftSecond=0,e.intervalID=0,e.isPause=!1,e.skinName="NumCountDownSkin",e}return __extends(e,t),e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e.prototype.start=function(t){var e=this;this.stop(),this.isPause=!1,this.leftSecond=t,this.count(),this.intervalID=setInterval(function(){e.count()},1e3)},e.prototype.pause=function(){this.isPause=!0},e.prototype.stop=function(){this.label.text="",clearInterval(this.intervalID)},e.prototype.count=function(){return this.label.text=this.leftSecond.toString(),0==this.leftSecond?(this.stop(),void(null!=this.cb&&this.cb())):void(this.isPause||this.leftSecond--)},e.prototype.OnDestroy=function(){this.cb=null,this.stop()},e}(eui.Component);__reflect(NumCountDown.prototype,"NumCountDown",["eui.UIComponent","egret.DisplayObject"]);var Plate=function(t){function e(){var e=t.call(this)||this;return e.skinName="PlateSkin",e}return __extends(e,t),e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e}(eui.Component);__reflect(Plate.prototype,"Plate",["eui.UIComponent","egret.DisplayObject"]);var Player=function(t){function e(){var e=t.call(this)||this;return e.G=8500,e.V0_X=400,e.V0_Y=-1800,e.PLAYER_SCALE_MIN=.5,e.PLAYER_TIME_MIN=1e3,e.PLAYER_FORCE_MAX=2.22,e.FLOOR_Y=1510,e.JUMP_WIDTH_FIX=10,e.JUMP_FIRM=.4,e.DROP_ROTATION_TIME=500,e.FUHUO_TIME=2e3,e.LUODI_SCALE=[.7,4.4],e.PLAYER_LUODI=400,e.img=null,e.gMC=null,e.gUp=null,e.beginX=0,e.beginY=0,e._isWin=!1,e.isPlayer1=!1,e.endX=0,e.endY=0,e.force=0,e.halfTime=0,e.rotateDirect=0,e.playerData=new PlayerData,e._curPlateIndex=0,e.intervalID=0,e.timeoutFuhuo=0,e.pastTime=0,e._isPlaying=!1,e._isGameOver=!1,e.time=0,e.isPlayingAnim=!1,e.imgScaleY=1,e._state=1,e._headName=["头落后_","头准备","头领先"],e.skinName="PlayerSkin",e}return __extends(e,t),e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},Object.defineProperty(e.prototype,"scoreX",{get:function(){return this.beginX},set:function(t){this.beginX=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scoreY",{get:function(){return this.beginY},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isWin",{get:function(){return this._isWin},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"curPlateIndex",{get:function(){return this._curPlateIndex},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isPlaying",{get:function(){return this._isPlaying},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isGameOver",{get:function(){return this._isGameOver},set:function(t){this._isGameOver=t},enumerable:!0,configurable:!0}),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.img.visible=!1,egret.startTick(this.onTick,this)},e.prototype.onTick=function(t){if(this.isPlaying&&!this.isGameOver){var e=t-this.time;this.pastTime+=e;var i=this.pastTime/1e3,n=this.V0_Y*this.force,o=this.V0_X*this.force,s=n*i+.5*this.G*i*i,a=o*i;if(this.y=Math.min(this.FLOOR_Y,this.beginY+s),this.x=this.beginX+a,0!=this.endX&&0!=this.endY){if(this.x>this.endX){if(this.y=this.endY,this.x=this.endX,0==this.rotateDirect&&(this.beginX=this.x,this.beginY=this.y,this.curPlateIndex==ModuleConfig.WIN_INDEX-1)){this._isWin=!0;var r=new egret.Event(EventName.PLAYER_WIN);this.dispatchEvent(r)}this.stopJump(),this.playLuodi()}}else this.y>=this.FLOOR_Y&&(0!=this.endX&&(this.x=Math.min(this.x,this.endX+100)),this.stopJump(),this.gameOver(),this.playGhostAnim())}return this.time=t,!0},e.prototype.resetPos=function(){clearTimeout(this.timeoutFuhuo),this._isWin=!1,this.isPlayingAnim=!1,this._isPlaying=!1,this.isGameOver=!1,this.gMC.rotation=0,this.gMC.y=this.height,this.gMC.alpha=1,this._state=0,this.stopJump(!1),this.stopDieAnim(),this.playBreath()},e.prototype.restart=function(){this.stopAnim(),this.resetPos(),this._curPlateIndex=0},e.prototype.gameOver=function(){var t=this;this.isGameOver=!0,this.stopAnim(),this.timeoutFuhuo=setTimeout(function(){egret.Tween.removeTweens(t.gMC),t.resetPos(),t.x=t.beginX,t.y=t.beginY;var e=new egret.Event(EventName.PLAYER_FUHUO);t.dispatchEvent(e)},this.FUHUO_TIME)},e.prototype.stopJump=function(t){var e=this;if(void 0===t&&(t=!0),this.pastTime=0,this._isPlaying=!1,0!=this.rotateDirect){var i=0;1==this.rotateDirect?i=-90:2==this.rotateDirect&&(i=90),this.rotateDirect=0,this.gameOver(),egret.Tween.get(this.gMC).wait(100).to({rotation:i,y:this.gMC.globalToLocal(0,this.FLOOR_Y+.7*this.height).y},this.DROP_ROTATION_TIME).call(function(){e.playGhostAnim()},this)}else this.playBreath();if(t){var n=new egret.Event(EventName.PLAYER_JUMP_END);this.dispatchEvent(n)}},e.prototype.setData=function(t){this.playerData=t},e.prototype.jump=function(t,e,i){void 0===e&&(e=-1),void 0===i&&(i=-1),this.playJump(),this._isPlaying=!0,this.beginX=this.x,this.beginY=this.y,this.endX=0,this.endY=0,this.force=.1+(1-t)/(1-this.PLAYER_SCALE_MIN)*this.PLAYER_FORCE_MAX;var n=this.V0_Y*this.force,o=this.V0_X*this.force;this.halfTime=-2*n/this.G*.5;for(var s=2*this.halfTime,a=this.playerData.plates.length,r=this._curPlateIndex;a>r;++r){for(var h=this.playerData.plates[r].y,c=ZJ.MathUtil.YiYuanErCi(.5*this.G,n,this.beginY+this.height-h),l=!1,u=0;u<c.length;++u)if(c[u]>this.halfTime){var p=this.beginX+o*c[u];if(p>this.playerData.plates[r].x-this.width+this.JUMP_WIDTH_FIX&&p<this.playerData.plates[r].x+this.playerData.plates[r].width-this.JUMP_WIDTH_FIX){p<this.playerData.plates[r].x-(1-this.JUMP_FIRM)*this.width+this.JUMP_WIDTH_FIX?this.rotateDirect=1:p>this.playerData.plates[r].x+this.playerData.plates[r].width-this.JUMP_FIRM*this.width-this.JUMP_WIDTH_FIX?this.rotateDirect=2:this._curPlateIndex=r,this.endX=Math.floor(p),this.endY=Math.floor(h-this.height),s=c[u],l=!0;break}}if(l)break}var d=this.endY;if(0==this.endX)for(var h=this.FLOOR_Y,c=ZJ.MathUtil.YiYuanErCi(.5*this.G,n,this.beginY+this.height-h),l=!1,u=0;u<c.length;++u)if(c[u]>this.halfTime){var p=this.beginX+o*c[u];this.endX=Math.floor(p);break}-1!=e&&(this.endX=e),-1!=i&&(this.endY=i);var g={endX:this.endX,endY:d,bgTime:s,V0_X:o,V0_Y:n};return g},e.prototype.playAnim=function(){this.isPlayingAnim||this._isWin||(this.isPlayingAnim=!0,this.isPlayer1&&ZJ.AudioManager.Instance.play("xuli",0),this.playYasuo(),this.playXuli())},e.prototype.stopAnim=function(){this.isPlayer1&&ZJ.AudioManager.Instance.stop("xuli");var t=this.dbScaler.scaleY;return egret.Tween.removeTweens(this.dbScaler),this.dbScaler.scaleY=1,this.stopXuli(),this.isPlayingAnim=!1,this.imgScaleY=t,t},e.prototype.playYasuo=function(){egret.Tween.get(this.dbScaler,{loop:!0}).to({scaleY:this.PLAYER_SCALE_MIN},this.PLAYER_TIME_MIN).to({scaleY:1},this.PLAYER_TIME_MIN),this.db.animation.fadeIn(this.getAniNameByState("xuli")).timeScale=1250/this.PLAYER_TIME_MIN},e.prototype.onDestroy=function(){egret.stopTick(this.onTick,this)},e.prototype.playXuli=function(){var t=this;null==this.xuliTw?ZJ.ResManager.instance.loadMovieClip("xuli","xuli",function(e){t.xuliTw=e,t.xuliTw.x=t.width/2,t.xuliTw.y=t.height,t.addChild(t.xuliTw),t.xuliTw.visible=!0,t.xuliTw.play(-1)}):(this.xuliTw.visible=!0,this.xuliTw.play(-1))},e.prototype.stopXuli=function(){null!=this.xuliTw&&(this.xuliTw.stop(),this.xuliTw.visible=!1)},e.prototype.playLuodi=function(){null==this.luodi&&(this.luodi=new eui.Image,this.luodi.source="luodi_png",this.luodi.width=202,this.luodi.height=22,this.luodi.anchorOffsetX=this.luodi.width/2,this.luodi.anchorOffsetY=this.luodi.height/2,this.luodi.x=this.width/2,this.luodi.y=this.height,this.addChildAt(this.luodi,0));var t=this.LUODI_SCALE[0],e=this.LUODI_SCALE[1];this.luodi.visible=!0,this.luodi.scaleX=t,this.luodi.scaleY=t,this.luodi.alpha=1;var i=t+(e-t)*(1-this.imgScaleY)/(1-this.PLAYER_SCALE_MIN);egret.Tween.get(this.luodi).to({scaleY:i,scaleX:i,alpha:0},this.PLAYER_LUODI,egret.Ease.sineOut),this.isWin?this.db.animation.fadeIn("shengli"):this.db.animation.fadeIn(this.getAniNameByState("luodi"),-1,1).timeScale=2.5,this.isPlayer1&&ZJ.AudioManager.Instance.stop("jump")},e.prototype.playGhostAnim=function(){null==this.ghost&&(this.ghost=new eui.Image,this.ghost.source="linghun_png",this.ghost.width=142,this.ghost.height=165,this.ghost.scaleX=1.5,this.ghost.scaleY=1.5,this.ghost.anchorOffsetX=this.ghost.width/2,this.ghost.anchorOffsetY=this.ghost.height/2,this.gUp.addChildAt(this.ghost,2)),null==this.qilang&&(this.qilang=new eui.Image,this.qilang.source="qilang_png",this.qilang.width=272,this.qilang.height=89,this.qilang.anchorOffsetX=this.qilang.width/2,this.qilang.anchorOffsetY=this.qilang.height/2,this.qilang.scaleX=1.5,this.qilang.scaleY=1.5,this.gUp.addChildAt(this.qilang,3)),this.ghost.x=this.gMC.x,this.ghost.y=this.gMC.y,this.qilang.x=this.gMC.x,this.qilang.y=this.gMC.y,this.ghost.visible=!0,this.qilang.visible=!0,this.ghost.alpha=1,egret.Tween.get(this.ghost).to({y:this.gMC.y-150,alpha:0},500,egret.Ease.sineIn),this.qilang.alpha=1,egret.Tween.get(this.qilang).to({alpha:0},200),this.db.animation.fadeIn("daku"),this.isPlayer1&&ZJ.AudioManager.Instance.play("tiaodaoci")},e.prototype.stopDieAnim=function(){this.ghost&&(this.ghost.visible=!1),this.qilang&&(this.qilang.visible=!1)},e.prototype.initDB=function(t){var e=this,i="",n="";1==t?(i="bao1",n="bao1"):(i="bao2",n="bao2"),this.db=ZJ.ResManager.instance.loadDragonBones(i,n),this.gMC.addChild(this.db),this.db.addEventListener(dragonBones.FrameEvent.FRAME_EVENT,function(t){switch(t.frameLabel){case"luodi_end":e.playBreath()}},this)},e.prototype.playBreath=function(){if(null!=this.db){var t=this.getAniNameByState("stand");this.db.animation.fadeIn(t)}},e.prototype.playJump=function(){null!=this.db&&this.db.animation.fadeIn(this.getAniNameByState("jumppose"))},e.prototype.updateDB=function(t){t!=this._state&&(this._state=t,this.isGameOver||this.updateDBInternal())},e.prototype.updateDBInternal=function(){if(this.db.animation.lastAnimationState){var t=this.db.animation.lastAnimationName.split("_")[0];this.db.animation.gotoAndPlayByTime(this.getAniNameByState(t),this.db.animation.lastAnimationState.currentTime)}},e.prototype.getAniNameByState=function(t){var e="";switch(this._state){case 2:e="_lingxian";break;case 0:e="_luohou"}return t+e},e}(eui.Component);__reflect(Player.prototype,"Player",["eui.UIComponent","egret.DisplayObject"]);var ReadyGo=function(t){function e(){var e=t.call(this)||this;return e.READY_TIME=2e3,e.GO_TIME=500,e.cb=null,e.skinName="ReadyGoSkin",e}return __extends(e,t),e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.ready.alpha=0,this.go.alpha=0},e.prototype.start=function(){var t=this;this.stop(),egret.Tween.get(this.ready).to({alpha:1,scaleX:1,scaleY:1},400).wait(500).to({alpha:0},500).call(function(){egret.Tween.get(t.go).to({alpha:1,scaleX:1,scaleY:1},200).wait(300).to({alpha:0},300).call(function(){null!=t.cb&&t.cb()},t)},this)},e.prototype.stop=function(){egret.Tween.removeTweens(this.ready),egret.Tween.removeTweens(this.go),this.ready.alpha=0,this.ready.scaleX=.8,this.ready.scaleY=.8,this.go.alpha=0,this.go.scaleX=2,this.go.scaleY=2},e.prototype.OnDestroy=function(){this.cb=null,this.stop()},e}(eui.Component);__reflect(ReadyGo.prototype,"ReadyGo",["eui.UIComponent","egret.DisplayObject"]);var PlayerData=function(){function t(){this.plates=[]}return t}();__reflect(PlayerData.prototype,"PlayerData");var SettleData=function(){function t(){this.score=0}return t}();__reflect(SettleData.prototype,"SettleData");
var ZJ;!function(t){var e=function(t){function e(e,i,n,o){var s=t.call(this,e,i,n,o)||this;return s.data=null,s}return __extends(e,t),e}(egret.Event);t.ChannelDataEvent=e,__reflect(e.prototype,"ZJ.ChannelDataEvent")}(ZJ||(ZJ={}));var ZJ;!function(t){var e=function(){function t(){}return t.FRAME=30,t.UP=0,t.DOWN=1,t.LEFT=2,t.RIGHT=3,t}();t.CommonConfig=e,__reflect(e.prototype,"ZJ.CommonConfig");var i=function(){function t(){}return t.TABLE_LOADED="TABLE_LOADED",t.SOCKET_CONNECTED="SOCKET_CONNECTED",t.SOCKET_DATA="SOCKET_DATA",t.GESTURE_DIRECT="GESTURE_DIRECT",t.CHANNEL_DATA="CHANNEL_DATA",t}();t.CommonEventName=i,__reflect(i.prototype,"ZJ.CommonEventName")}(ZJ||(ZJ={}));var Main=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this),egret.lifecycle.addLifecycleListener(function(t){}),egret.lifecycle.onPause=function(){egret.ticker.pause()},egret.lifecycle.onResume=function(){egret.ticker.resume()},egret.registerImplementation("eui.IAssetAdapter",new AssetAdapter),egret.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),this.runGame()["catch"](function(t){console.log(t)})},e.prototype.runGame=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){switch(e.label){case 0:return[4,this.createGameScene()];case 1:return e.sent(),[4,platform.login()];case 2:return e.sent(),[4,platform.getUserInfo()];case 3:return t=e.sent(),console.log(t),[2]}})})},e.prototype.createGameScene=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){switch(e.label){case 0:return egret.ImageLoader.crossOrigin="anonymous",ModuleConfig.compile.yy&&onPKLoading(),[4,ZJ.ResManager.instance.init(this.stage)];case 1:return e.sent(),[4,ZJ.ResManager.instance.loadGroup("realpreload")];case 2:return e.sent(),ZJ.UIManager.instance.init(this),ZJ.UIManager.instance.uiLayers=ModuleConfig.uiLayers,ZJ.UIManager.instance.uiDatas=ModuleConfig.uiDatas,t=this.GetLoadingView(),[4,ZJ.ResManager.instance.loadGroup("preload",0,t)];case 3:return e.sent(),ZJ.SocketManager.instance.init(),1==ModuleConfig.compile.yy&&onPKFinishLoading(),ModuleStartUp.init(),1==ModuleConfig.compile.yy&&onPKStart(),[2]}})})},e.prototype.GetLoadingView=function(){var t=null,e=null;return ModuleConfig.compile.need_loading&&(ModuleConfig.compile.danji?e=LoadingView:ModuleConfig.compile.yy?e=YYLoadingView:ModuleConfig.compile.ali?e=AliLoadingView:ModuleConfig.compile.chushou&&(e=ChushouLoadingView)),null!=e&&(ModuleConfig.uiDatas[UIName.Loading].viewClass=e,t=ZJ.UIManager.instance.openView(UIName.Loading)),t},e.prototype.onEnterFrame=function(){},e}(eui.UILayer);__reflect(Main.prototype,"Main");var ZJ;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),Object.defineProperty(e,"instance",{get:function(){return this._instance},enumerable:!0,configurable:!0}),e.prototype.init=function(){return 0},e._instance=new e,e}(egret.EventDispatcher);t.EventManager=e,__reflect(e.prototype,"ZJ.EventManager")}(ZJ||(ZJ={}));var AliLoadingView=function(t){function e(){var e=t.call(this)||this;return e.intervalID=0,e.ran1=0,e.ran2=0,e.SEND_PROGRESS=6,e.progressIndex=0,e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this);var e=ZJ.ShapeUtil.getRect(0,1,this.stage.stageWidth,this.stage.stageHeight);this.addChild(e);var i=500,n=new eui.ProgressBar;n.skinName="YYLoadingPBSkin",this.progress=n,this.progress.width=450,this.progress.height=62,this.progress.minimum=0,this.progress.maximum=100,this.progress.horizontalCenter=0,this.progress.y=i+435,this.progress.scaleX=1.3,this.progress.scaleY=1.3,this.progress.labelFunction=function(t,e){return t+"%"},this.addChild(this.progress);var o=new eui.Image;o.source="load_img03_png",o.horizontalCenter=0,o.y=i+630,o.width=510,o.height=100,o.alpha=.2,this.addChild(o),this.load3=new eui.Label,this.load3.text="等待对手加入游戏...",this.load3.horizontalCenter=0,this.load3.y=i+660,this.load3.size=40,this.load3.textColor=16777215,this.addChild(this.load3),this.startCount(),ZJ.SocketManager.instance.connectByUrlAli({ip:ModuleConfig.ip,port:ModuleConfig.port})},e.prototype.startCount=function(){var t=this;this.intervalID=setInterval(function(){t.ran2=Math.min(t.ran2+8*Math.random()+2,99),t.progress.value=Math.floor((t.ran1+t.ran2)/2)},200)},e.prototype.onProgress=function(t,e){this.ran1=Math.floor(t/e*100);var i=Math.floor(t/e*100);100==i?ALISDK.CatcherSDK.instance().updateProgress(ALISDK.CatcherSDK.ProgressState.COMPLETED,i):(this.progressIndex==this.SEND_PROGRESS-1&&ALISDK.CatcherSDK.instance().updateProgress(ALISDK.CatcherSDK.ProgressState.PROGRESSING,i),this.progressIndex=++this.progressIndex%this.SEND_PROGRESS)},e.prototype.onDestroy=function(){return t.prototype.onDestroy.call(this),0},e}(ZJ.ViewBase);__reflect(AliLoadingView.prototype,"AliLoadingView");var ChushouLoadingView=function(t){function e(){var e=t.call(this)||this;return e.intervalID=0,e.ran1=0,e.ran2=0,e.SEND_PROGRESS=10,e.progressIndex=0,e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this);var e=ZJ.ShapeUtil.getRect(0,1,this.stage.stageWidth,this.stage.stageHeight);this.addChild(e)},e.prototype.startCount=function(){var t=this;this.intervalID=setInterval(function(){t.ran2=Math.min(t.ran2+8*Math.random()+2,99),t.progress.value=Math.floor((t.ran1+t.ran2)/2)},200)},e.prototype.onProgress=function(t,e){this.progressIndex==this.SEND_PROGRESS-1&&ChushouSDK.instance.csNotifyLoadProgress(t/e*100),this.progressIndex=++this.progressIndex%this.SEND_PROGRESS},e.prototype.onDestroy=function(){return t.prototype.onDestroy.call(this),0},e}(ZJ.ViewBase);__reflect(ChushouLoadingView.prototype,"ChushouLoadingView");var ChushouSDK=function(){function t(){this.gameRoomId="",this.role="",this.title="分享标题",this.image="/resource/assets/egret_icon.png",this.description="分享描述",this.enableMic="1",this.enableAudioOutput="1",this.csAuthRequestData=null}return Object.defineProperty(t,"instance",{get:function(){return this._instance||(this._instance=new t),this._instance},enumerable:!0,configurable:!0}),t.prototype.csAuthRequest=function(t){var e=this;console.log("csAuthRequest"),csAuthRequest('{"h5AppName" : "'+ModuleConfig.compile.chushou_h5AppName+'","launchMode" : "'+chushouGameConfig.launchMode+'","inviteMode" : "'+chushouGameConfig.inviteMode+'","gameRoomId" : "'+chushouGameConfig.gameRoomId+'"}',function(i){console.log("cb csAuthRequest"),console.log(i);var n=JSON.parse(i);e.csAuthRequestData=n,t&&t(n)})},t.prototype.csJoinRoom=function(t){console.log("csJoinRoom "+this.gameRoomId),csJoinRoom('{"accessToken" : "'+this.csAuthRequestData.accessToken+'","gameRoomId" : "'+this.gameRoomId+'","role" : "'+this.csAuthRequestData.role+'"}',function(e){console.log("cb csJoinRoom"),console.log(e.toString()),t&&t(JSON.parse(e))})},t.prototype.csQuitRoom=function(t){console.log("csQuitRoom"),csQuitRoom('{"accessToken" : "'+this.csAuthRequestData.accessToken+'","gameRoomId" : "'+this.gameRoomId+'"}',function(e){console.log("cb csQuitRoom"),t&&t(JSON.parse(e))})},t.prototype.csInviteToGame=function(t){console.log("csInviteToGame"),csInviteToGame('{"accessToken" : "'+this.csAuthRequestData.accessToken+'","gameRoomId" : "'+this.gameRoomId+'","inviteMode" : "'+chushouGameConfig.inviteMode+'","title" : "'+this.title+'","description" : "'+this.description+'","image" : "'+this.image+'"}',function(e){console.log("cb csInviteToGame"),t&&t(JSON.parse(e))})},t.prototype.csKickOutUser=function(t){console.log("csKickOutUser"),csKickOutUser('{"accessToken" : "'+this.csAuthRequestData.accessToken+'","targetUid" : "sl23859","gameRoomId" : "'+this.gameRoomId+'"}',function(e){console.log("cb csKickOutUser"),t&&t(JSON.parse(e))})},t.prototype.csShareRoom=function(t){console.log("csShareRoom"),csShareRoom('{"accessToken" : "'+this.csAuthRequestData.accessToken+'","gameRoomId" : "'+this.gameRoomId+'","title" : "'+this.title+'","description" : "'+this.description+'","image" : "'+this.image+'"}',function(e){console.log("cb csShareRoom"),t&&t(JSON.parse(e))})},t.prototype.csShareRecord=function(t){console.log("csShareRecord"),csShareRecord('{"accessToken" : "'+this.csAuthRequestData.accessToken+'","gameRecordId" : "119844","title" : "'+this.title+'","description" : "'+this.description+'","image" : "'+this.image+'"}',function(e){console.log("cb csShareRecord"),t&&t(JSON.parse(e))})},t.prototype.csGetFriendList=function(t){console.log("csGetFriendList"),csGetFriendList('{"accessToken" : "'+this.csAuthRequestData.accessToken+'","numPerPage" : "10","breakpoint" : "18823-ffgh-cc08"}',function(e){console.log("cb csGetFriendList"),t&&t(JSON.parse(e))})},t.prototype.csGetUserRelationship=function(t,e){console.log("csGetUserRelationship"),csGetUserRelationship('{"accessToken" : "'+this.csAuthRequestData.accessToken+'","users" : "{'+t+'}"}',function(t){console.log("cb csGetUserRelationship"),e&&e(JSON.parse(t))})},t.prototype.csFollowUser=function(t,e){console.log("csFollowUser"),csFollowUser('{"accessToken" : "'+this.csAuthRequestData.accessToken+'","targetUid" : "'+t+'"}',function(t){console.log("cb csFollowUser"),e&&e(JSON.parse(t))})},t.prototype.csEnableMic=function(t){console.log("csEnableMic"),csEnableMic('{"accessToken" : "'+this.csAuthRequestData.accessToken+'","enableMic" : '+this.enableMic+"}",function(e){console.log("cb csEnableMic"),t&&t(JSON.parse(e))})},t.prototype.csEnableAudioOutput=function(t){console.log("csEnableAudioOutput"),csEnableAudioOutput('{"accessToken" : "'+this.csAuthRequestData.accessToken+'","enableAudioOutput" : "'+this.enableAudioOutput+'"}',function(e){console.log("cb csEnableAudioOutput"),t&&t(JSON.parse(e))})},t.prototype.onUserVolumeUpdate=function(t){console.log("onUserVolumeUpdate"),onUserVolumeUpdate(function(e){console.log("cb onUserVolumeUpdate"),t&&t(JSON.parse(e))})},t.prototype.csExitGame=function(t){console.log("csExitGame "+this.csAuthRequestData.accessToken),this.csQuitRoom(),csExitGame('{"accessToken" : "'+this.csAuthRequestData.accessToken+'"}')},t.prototype.csNotifyLoadProgress=function(t,e){console.log("csNotifyLoadProgress"),csNotifyLoadProgress('{"total" : "100","progress" : "'+t+'"}')},t.prototype.onNetworkStatusChange=function(t){console.log("onNetworkStatusChange"),onNetworkStatusChange(function(e){console.log("cb onNetworkStatusChange"),t&&t(JSON.parse(e))})},t.prototype.csGetAPIVersionInfo=function(t){console.log("csGetAPIVersionInfo"),csGetAPIVersionInfo('{"h5AppName" : "'+ModuleConfig.compile.chushou_h5AppName+'","launchMode" : "'+chushouGameConfig.launchMode+'","inviteMode" : "'+chushouGameConfig.inviteMode+'","gameRoomId" : "'+this.gameRoomId+'"}',function(e){console.log("cb csGetAPIVersionInfo"),t&&t(JSON.parse(e))})},t.prototype.csInvokeRecharge=function(t){console.log("csInvokeRecharge"),csInvokeRecharge('{"accessToken" : "'+this.csAuthRequestData.accessToken+'","paymentScene" : "1",}',function(e){console.log("cb csInvokeRecharge"),t&&t(JSON.parse(e))})},t.prototype.onBalanceChanged=function(t){console.log("onBalanceChanged")},t.prototype.csPurchaseProps=function(t){console.log("csPurchaseProps"),csPurchaseProps('{"accessToken" : "'+this.csAuthRequestData.accessToken+'","cpOrderId" : "prop7865421","cpPropName" : "双倍积分卡","cpPropId" : "1","payAmount" : "500"}',function(e){console.log("cb csPurchaseProps"),t&&t(JSON.parse(e))})},t.prototype.csPayEntryFee=function(t){console.log("csPayEntryFee"),csPayEntryFee('{"accessToken" : "'+this.csAuthRequestData.accessToken+'","cpOrderId" : "prop7865425","cpPropName" : "游戏⼊场费","cpPropId" : "999"}',function(e){console.log("cb csPayEntryFee"),t&&t(JSON.parse(e))})},t.prototype.csCheckEntryFee=function(t){console.log("csCheckEntryFee"),csCheckEntryFee('{"accessToken" : "'+this.csAuthRequestData.accessToken+'"}',function(e){console.log("cb csCheckEntryFee"),t&&t(JSON.parse(e))})},t}();__reflect(ChushouSDK.prototype,"ChushouSDK");var YYLoadingView=function(t){function e(){var e=t.call(this)||this;return e.intervalID=0,e.ran1=0,e.ran2=0,e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this);var e=ZJ.ShapeUtil.getRect(0,1,this.stage.stageWidth,this.stage.stageHeight);this.addChild(e);var i=new eui.Image;i.source="loading_bg_png",i.height=1920,i.percentWidth=100,this.addChild(i),i.horizontalCenter=0;var n=500,o=new eui.Group;this.addChild(o),o.horizontalCenter=0,o.y=n,ZJ.ResManager.instance.loadMovieClip("yylangren","yylangren",function(t){o.addChild(t),t.scaleX=1.5,t.scaleY=1.5,t.x=-195,t.gotoAndPlay("tiao",-1)});var s=new eui.ProgressBar;s.skinName="YYLoadingPBSkin",this.progress=s,this.progress.width=450,this.progress.height=62,this.progress.minimum=0,this.progress.maximum=100,this.progress.horizontalCenter=0,this.progress.y=n+435,this.progress.scaleX=1.3,this.progress.scaleY=1.3,this.progress.labelFunction=function(t,e){return t+"%"},this.addChild(this.progress);var a=new eui.Image;a.source="load_img03_png",a.horizontalCenter=0,a.y=n+630,a.width=510,a.height=100,a.alpha=.2,this.addChild(a),this.load3=new eui.Label,this.load3.text="等待对手加入游戏...",this.load3.horizontalCenter=0,this.load3.y=n+660,this.load3.size=40,this.load3.textColor=16777215,this.addChild(this.load3),this.startCount()},e.prototype.startCount=function(){var t=this;this.intervalID=setInterval(function(){t.ran2=Math.min(t.ran2+8*Math.random()+2,99),t.progress.value=Math.floor((t.ran1+t.ran2)/2)},200)},e.prototype.onProgress=function(t,e){this.ran1=Math.floor(t/e*100),this.progress.value=Math.floor((this.ran1+this.ran2)/2)},e.prototype.onDestroy=function(){return t.prototype.onDestroy.call(this),clearInterval(this.intervalID),0},e}(ZJ.ViewBase);__reflect(YYLoadingView.prototype,"YYLoadingView");var xlsx;!function(t){t.cfg_c_plot="shared/c_plot.json",t.c_plot_id="A",t.c_plot_plot="B",t.c_plot_react="C",t.c_plot_finish="D",t.c_plot_trigger="E",t.cfg_c_role="shared/c_role.json",t.c_role_id="A",t.c_role_role_name="B",t.c_role_head="C",t.c_role_sex="D",t.c_role_relation="E",t.cfg_c_task="shared/c_task.json",t.c_task_id="A",t.c_task_plot="B",t.c_task_trigger="C",t.c_task_param1="D",t.c_task_param2="E",t.c_task_param3="F",t.c_task_param4="G"}(xlsx||(xlsx={}));