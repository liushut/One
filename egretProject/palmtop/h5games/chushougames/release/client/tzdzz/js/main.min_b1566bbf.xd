var __reflect=this&&this.__reflect||function(t,e,i){t.__class__=e,i?i.push(e):i=[e],t.__types__=t.__types__?i.concat(t.__types__):i},__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},__awaiter=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))(function(o,a){function r(t){try{h(n.next(t))}catch(e){a(e)}}function s(t){try{h(n["throw"](t))}catch(e){a(e)}}function h(t){t.done?o(t.value):new i(function(e){e(t.value)}).then(r,s)}h((n=n.apply(t,e||[])).next())})},__generator=this&&this.__generator||function(t,e){function i(t){return function(e){return n([t,e])}}function n(i){if(o)throw new TypeError("Generator is already executing.");for(;h;)try{if(o=1,a&&(r=a[2&i[0]?"return":i[0]?"throw":"next"])&&!(r=r.call(a,i[1])).done)return r;switch(a=0,r&&(i=[0,r.value]),i[0]){case 0:case 1:r=i;break;case 4:return h.label++,{value:i[1],done:!1};case 5:h.label++,a=i[1],i=[0];continue;case 7:i=h.ops.pop(),h.trys.pop();continue;default:if(r=h.trys,!(r=r.length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){h=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){h.label=i[1];break}if(6===i[0]&&h.label<r[1]){h.label=r[1],r=i;break}if(r&&h.label<r[2]){h.label=r[2],h.ops.push(i);break}r[2]&&h.ops.pop(),h.trys.pop();continue}i=e.call(t,h)}catch(n){i=[6,n],a=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}var o,a,r,s,h={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:i(0),"throw":i(1),"return":i(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},ZJ;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.skinName=t.Util.getClassName(i)+"Skin",i}return __extends(i,e),i.prototype.onDestroy=function(){return 0},i}(eui.Component);t.ComponentBase=e,__reflect(e.prototype,"ZJ.ComponentBase",["eui.UIComponent","egret.DisplayObject"])}(ZJ||(ZJ={}));var ZJ;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e.prototype.setData=function(t){},e.prototype.show=function(){},e.prototype.onProgress=function(t,e){},e.prototype.onDestroy=function(){return t.prototype.onDestroy.call(this)},e}(t.ComponentBase);t.ViewBase=e,__reflect(e.prototype,"ZJ.ViewBase",["RES.PromiseTaskReporter"])}(ZJ||(ZJ={}));var ZJ;!function(t){var e=function(){function t(t,e,i){void 0===e&&(e=0),void 0===i&&(i=null),this.viewName="",this.layer=0,this.viewClass=null,this.viewName=t,this.layer=e,this.viewClass=i}return t}();t.UIData=e,__reflect(e.prototype,"ZJ.UIData")}(ZJ||(ZJ={}));var Cmd;!function(t){t[t.useGoat=0]="useGoat",t[t.requestData=1]="requestData",t[t.checkData=2]="checkData"}(Cmd||(Cmd={}));var GameView=function(t){function e(){var e=t.call(this)||this;return e.INTERVAL=50,e.INTERVAL_PING=3e4,e.PLAYER_1="player1",e.PLAYER_2="player2",e.TOTAL_TIME=120,e.GOAT_CD_TIME=3,e.COL_DIS=0,e.COL_DIS_PERCENT=.33,e.PLAYER1_ENDY=250,e.PLAYER2_ENDY=1670,e.PLAYER1_STARTY=1720,e.PLAYER2_STARTY=200,e.GOAT_MOVEPIX_PER=116,e.GOAT_OFFSETX=0,e.AI_INTERVAL=3.2,e.AI_INTERVAL_0=3.1,e.DIFF_TIMESTAMP=1500,e.MIN_SPEED=.5,e.GOAT_SCALE_ARRAY=[.4,.55,.7,.85,1],e.player1_nextArray=[],e.roadTipArray=[],e.roadTipGroupArray=[],e.roadGroupArray=new Array,e.nextGroupArray=new Array,e.nextImgArray=new Array,e.time=0,e.goatUIGroupArray=[],e.roadGoatArray={},e.roadGoatHitArray={},e.score1=0,e.score2=0,e.coolTime=0,e.timeOnEnterFrame=0,e.defSpeedArray=[],e.isWait=!1,e.isPlay=!1,e.isCooling=!1,e.ranGoat1Array=[],e.ranGoat2Array=[],e.ranGoatIndex=0,e.ranGoat2Index=0,e.player1_lvArray=[],e.next1DefHorizontal=-30,e.isDanji=!1,e.isServer=!1,e.startTimestamp=0,e.diffTimestamp=0,e.cmdPool=[],e.timeActionArray=[],e.roadAnimArray=[],e.intervalPing=0,e.goatInfos={},e.skinName="GameViewSkin",e}return __extends(e,t),e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){var e=this;t.prototype.childrenCreated.call(this);var i=document.createElement("canvas"),n=i.getContext("experimental-webgl"),o=n.getExtension("WEBGL_debug_renderer_info"),a=n.getParameter(o.UNMASKED_RENDERER_WEBGL);a.indexOf("Apple")>-1&&a.indexOf("A11")>-1&&375==window.screen.width&&812==window.screen.height&&(this.topGroup.top=70),this.next1DefHorizontal=this.next1.horizontalCenter,this.seed=ZJ.Util.timeStamp(),this.isDanji=ModuleConfig.compile.danji,this.bar.getChildAt(0).source="bar_bg_png",this.bar.getChildAt(1).source="bar_1_png",this.bar.labelFunction=function(t,e){return""};for(var r=this.goatGroup.numChildren-1;r>=0;r--)this.goatUIGroupArray.push(this.goatGroup.getChildAt(r));for(var r=1;5>=r;r++){var s=this.getGoatInfoByType(r.toString());this.goatInfos[r]=s,this.defSpeedArray.push(s.speed)}setTimeout(function(){ZJ.ShapeUtil.setArcMask(e.head1,e.head1.width/2,0,1),ZJ.ShapeUtil.setArcMask(e.head2,e.head2.width/2,0,1)},50),this.countDown=new ZJ.MyCountDown,this.countDown.label=this.timeText,this.timeGroup.addChild(this.countDown),this.countDown.horizontalCenter=0,this.countDown.label.size=60,this.countDown.cb=function(){if(e.isDanji)e.gameOver();else if(e.isServer){var t=0;e.score2>e.score1?t=e.player2.playerId:e.score2<e.score1&&(t=e.player1.playerId),ZJ.SocketManager.instance.send(11012,{winPlayerId:t})}},this.countDown.setSecond(120);var h=new eui.Group;h.horizontalCenter=0,h.verticalCenter=0,this.addChild(h),this.daojishiAnim=ZJ.ResManager.instance.loadDragonBones("daojishi"),this.daojishiAnim.visible=!1,h.addChild(this.daojishiAnim);for(var r=0;r<this.roadGroup.numChildren;r++){var c=this.roadGroup.getChildAt(r).getChildAt(0),l=c.getChildAt(0);this.roadTipGroupArray.push(c),this.roadTipArray.push(l)}for(var u=function(t){var i=p.roadGroup.getChildAt(t),n=t+1;i.addEventListener("touchTap",function(){if(e.isPlay)if(i.numChildren>0){if(e.canUseGoat1){var t=e.getRanGoatFromRanArray(e.PLAYER_1);null!=t&&((e.isDanji||e.isServer)&&e.useGoat(e.PLAYER_1,n,t),e.isDanji||(e.isServer?e.pushTimeAction(function(i){return ZJ.SocketManager.instance.send(11010,{processData:ZJ.Util.objToByteArray({cmd:Cmd.useGoat,usePlayerId:e.playerId,road:n,ranGoat:t,time:i}).bytes}),!0}):ZJ.SocketManager.instance.send(11010,{processData:ZJ.Util.objToByteArray({cmd:Cmd.useGoat,usePlayerId:e.playerId,road:n,ranGoat:t}).bytes})))}e.updateRoadTip(e.canUseGoat1,n)}else e.updateRoadTip(e.canUseGoat1,n)},p),p.roadGroupArray.push(i)},p=this,r=0;r<this.roadGroup.numChildren;r++)u(r);this.player1_lvArray.push(this.lv_1);for(var r=this.player1_nextGroup.numChildren-2;r>=0;r--){var c=this.player1_nextGroup.getChildAt(r);null!=c&&(this.nextGroupArray.push(c),this.nextImgArray.push(c.getChildAt(1)),r<this.player1_nextGroup.numChildren-2&&(this.player1_lvArray.push(c.getChildAt(2)),this.player1_nextArray.push(c.getChildAt(0))))}this.start.visible=!0,this.countDown.visible=!1,this.start.addEventListener("touchTap",function(){if(e.isDanji){e.start.visible=!1,e.setWait(!1),e.clear(),e.updateScoreText();var t=ZJ.MathUtil.randomSeed(e.seed+54321),i=ZJ.MathUtil.randomSeed(e.seed+123);e.resetRandomGoatNumArray(e.seed,t,i),e.updateReviewPic(),e.daojishiAnim.visible=!0,e.daojishiAnim.addDBEventListener(dragonBones.EgretEvent.COMPLETE,function(t){e.daojishiAnim.animation.stop(),e.daojishiAnim.visible=!1,e.playGame()},e),e.daojishiAnim.animation.play("newAnimation",1)}},this),this.over.visible=!1,this.over.addEventListener("touchTap",function(){e.setWait(!0),e.over.visible=!1,e.start.visible=!0},this);for(var r=0;r<this.roadTipGroupArray.length;r++){var d=ZJ.ResManager.instance.loadDragonBones("jiantou");d.animation.stop(),this.roadTipGroupArray[r].addChild(d),d.x=this.roadTipGroupArray[r].width/2+3,d.y=this.roadTipGroupArray[r].height-222+13,this.roadAnimArray.push(d)}var g=ZJ.MathUtil.randomSeed(this.seed+54321),y=ZJ.MathUtil.randomSeed(g+123);this.resetRandomGoatNumArray(this.seed,g,y),this.canUseGoat1=!0,this.canUseGoat2=!0,this.addEventListener(egret.Event.ENTER_FRAME,this.onEnterFrame,this),this.timeOnEnterFrame=egret.getTimer(),this.intervalID=setInterval(function(){e.onInterval()},this.INTERVAL),this.setWait(!0),ZJ.SocketManager.instance.addEventListener(ZJ.CommonEventName.SOCKET_CONNECTED,this.onSocketConnected,this),ZJ.SocketManager.instance.addEventListener(ZJ.CommonEventName.SOCKET_DATA,this.onSocketData,this),this.isDanji?ZJ.UIManager.instance.destroyView(UIName.Loading):(this.connect(),this.waitCom=new WaitComponent,this.waitCom.horizontalCenter=0,this.waitCom.verticalCenter=0,this.addChild(this.waitCom),this.waitCom.show(),this.waitCom2=new WaitComponent,this.waitCom2.horizontalCenter=0,this.waitCom2.verticalCenter=0,this.addChild(this.waitCom2),this.waitCom2.setRotation(180),this.waitCom2.show(),this.start.visible=!1,this.bg_mask.visible=!0,ZJ.UIManager.instance.destroyView(UIName.Loading))},e.prototype.onEnterFrame=function(t){var e=this,i=egret.getTimer(),n=this.timeOnEnterFrame,o=i-n;if(this.update(o),this.isPlay)for(var a=function(){var t=r.cmdPool.shift(),i=t.data,n=t.cmd;if(n==Cmd.useGoat){var o=i.road,a=i.ranGoat,s=i.usePlayerId,h=s==r.player1.playerId?r.PLAYER_1:r.PLAYER_2,c=i.time;r.useGoat(h,o,a),r.isServer?r.pushTimeAction(function(t){return ZJ.SocketManager.instance.send(11010,{processData:ZJ.Util.objToByteArray({cmd:Cmd.useGoat,usePlayerId:s,road:o,ranGoat:a,time:t}).bytes}),!0}):r.pushTimeAction(function(t){var i=t,n=i-c;return n>0&&(e.diffTimestamp+=n),e.diffTimestamp>=e.DIFF_TIMESTAMP&&ZJ.SocketManager.instance.send(11010,{processData:ZJ.Util.objToByteArray({cmd:Cmd.requestData}).bytes}),!0})}else if(n==Cmd.requestData)r.isServer&&r.pushTimeAction(function(t){return ZJ.SocketManager.instance.send(11011,{score:e.score1,resultData:ZJ.Util.objToByteArray({data:e.getCurData(),time:t}).bytes}),!0});else if(n==Cmd.checkData){for(var l=-10,u=r.cmdPool.length-1;u>=0;u--)if(r.cmdPool[u].cmd==Cmd.checkData){l=u;break}-10!=l&&(r.cmdPool.splice(0,l),t=r.cmdPool.shift(),i=t.data),r.setNewData(i.data),r.diffTimestamp=0}},r=this;this.cmdPool.length>0;)a();this.timeOnEnterFrame=egret.getTimer()},e.prototype.update=function(t){if(this.isCooling){this.coolTime+=t;var e=this.coolTime/(1e3*this.GOAT_CD_TIME),i=this.nextImgArray[0];this.isWait||i.visible||(i.visible=!0),e>=1?(e=1,this.bar.getChildAt(1).source="bar_1_png",this.isCooling=!1,this.canUseGoat1=!0,this.updateRoadTip(this.canUseGoat1)):this.bar.getChildAt(1).source="bar_0_png",this.bar.value=100*e,this.next1.horizontalCenter=this.next1DefHorizontal+e*this.bar.width}(this.isWait||this.isPlay)&&(this.runAllGoat(t/1e3),this.checkAllHit(),this.checkRunEnd())},e.prototype.getRandomGoat=function(){return this.seed=ZJ.MathUtil.randomSeed(this.seed),this.isWait?ZJ.MathUtil.randomRange(1,6,this.seed):this.time<=30?ZJ.MathUtil.randomRange(1,4,this.seed):this.time<=60?ZJ.MathUtil.randomRange(1,5,this.seed):ZJ.MathUtil.randomRange(1,6,this.seed)},e.prototype.getRanGoatFromRanArray=function(t){return t==this.PLAYER_1?(this.ranGoat1Array.push(this.getRandomGoat()),this.ranGoatIndex<this.ranGoat1Array.length?this.ranGoat1Array[this.ranGoatIndex]:null):(this.ranGoat2Array.push(this.getRandomGoat()),this.ranGoat2Index<this.ranGoat2Array.length?this.ranGoat2Array[this.ranGoat2Index]:null)},e.prototype.getRandomRoad=function(){return this.seed=ZJ.MathUtil.randomSeed(this.seed),ZJ.MathUtil.randomRange(1,6,this.seed)},e.prototype.onInterval=function(){},e.prototype.canUseGoat=function(t,e){if(t==this.PLAYER_1){if(this.canUseGoat1)return!0}else if(t==this.PLAYER_2&&this.canUseGoat2)return!0;return!1},e.prototype.useGoat=function(t,e,i){var n=this;if((this.isWait||this.isPlay)&&this.canUseGoat(t,e)){var o=this.createNewGoat(t,i,e);if(t==this.PLAYER_1){o.y+=o.height;var a=this.getGoatHitArray(this.PLAYER_1,e.toString());if(a&&a.length>0){var r=a[a.length-1];o.y-o.height+o.height*this.COL_DIS_PERCENT<r.y&&(o.y=r.y+o.height-o.height*this.COL_DIS_PERCENT)}if(a=this.getGoatHitArray(this.PLAYER_2,e.toString()),a&&a.length>0){var s=a[0];o.y-o.height+o.height*this.COL_DIS_PERCENT<s.y+s.height&&(o.y=s.y+s.height+o.height-o.height*this.COL_DIS_PERCENT)}}else if(t==this.PLAYER_2){o.y-=o.height;var a=this.getGoatHitArray(this.PLAYER_2,e.toString());if(a&&a.length>0){var r=a[a.length-1];o.y+o.height-o.height*this.COL_DIS_PERCENT>r.y&&(o.y=r.y-o.height+o.height*this.COL_DIS_PERCENT)}if(a=this.getGoatHitArray(this.PLAYER_1,e.toString()),a&&a.length>0){var s=a[0];o.y+o.height-o.height*this.COL_DIS_PERCENT>s.y-s.height&&(o.y=s.y-s.height-o.height+o.height*this.COL_DIS_PERCENT)}}var h=this.getGoatArray(e.toString());h.push(o),t==this.PLAYER_1?(this.isCooling=!0,this.coolTime=0,this.ranGoatIndex++,this.updateRoadTip(this.canUseGoat1,e)):t==this.PLAYER_2&&(this.ranGoat2Index++,this.isDanji||this.isServer?this.cd2IntevalId=setTimeout(function(){n.canUseGoat2=!0},1e3*this.GOAT_CD_TIME):this.canUseGoat2=!0),this.updateReviewPic()}},e.prototype.runAllGoat=function(t){for(var e=1;5>=e;e++){for(var i=this.getGoatArray(e.toString()),n=0,o=i;n<o.length;n++){var a=o[n];a.player==this.PLAYER_1?a.y-=a.speed*t:a.y+=a.speed*t}for(var r=this.getGoatHitArray(this.PLAYER_1,e.toString()),s=0,h=r;s<h.length;s++){var a=h[s];a.y-=a.speed*t}r=this.getGoatHitArray(this.PLAYER_2,e.toString());for(var c=0,l=r;c<l.length;c++){var a=l[c];a.y+=a.speed*t}}},e.prototype.checkAllHit=function(){for(var t=1;5>=t;t++)for(var e=this.getGoatArray(t.toString()),i=0,n=e;i<n.length;i++){var o=n[i];this.checkHit(o,t.toString())}},e.prototype.checkHit=function(t,e){for(var i=0;2>i;i++){var n=void 0;n=0==i?this.PLAYER_1:this.PLAYER_2;for(var o=this.getGoatHitArray(n,e),a=0,r=o;a<r.length;a++){var s=r[a];if(this.isNear(t,s))return void this.onHitBegin(t,s,e,!0)}}for(var h=this.getGoatArray(e),c=0,l=h;c<l.length;c++){var s=l[c];if(t!=s&&this.isNear(t,s))return void this.onHitBegin(t,s,e,!1)}},e.prototype.isNear=function(t,e){if(t.player==this.PLAYER_1&&e.player==this.PLAYER_2){var i=e.y+e.height,n=e.y,o=t.y-t.height;if(o<=i-this.COL_DIS-t.height*this.COL_DIS_PERCENT&&o>n)return!0}else if(t.player==this.PLAYER_2&&e.player==this.PLAYER_1){var i=e.y,a=e.y-e.height,r=t.y+t.height;if(r>=a+this.COL_DIS+t.height*this.COL_DIS_PERCENT&&i>r)return!0}else if(t.player==this.PLAYER_1&&e.player==this.PLAYER_1){var i=e.y,s=e.y-e.height,o=t.y-t.height;if(o<i-this.COL_DIS-t.height*this.COL_DIS_PERCENT&&o>s)return!0}else if(t.player==this.PLAYER_2&&e.player==this.PLAYER_2){var i=e.y+e.height,h=e.y,r=t.y+t.height;if(r>h+this.COL_DIS+t.height*this.COL_DIS_PERCENT&&i>r)return!0}return!1},e.prototype.onHitBegin=function(t,e,i,n){var o=this;if(n||t.touchGoat!=e||t.player!=e.player){if(t.touchGoat=e,t.player!=e.player)e.touchGoat=t,e.playAttack();else if(!n&&t.speed>e.speed)return void(t.speed=e.speed);setTimeout(function(){o.ShowHitEffect(t,e)},650),t.playAttack(),ZJ.Util.rmArrayObj(this.getGoatArray(i),t),this.getGoatHitArray(t.player,i).push(t),ZJ.Util.rmArrayObj(this.getGoatArray(i),e);var a=this.getGoatHitArray(e.player,i);-1==a.indexOf(e)&&a.push(e);var r=this.calGoatGroupSpeed(i);this.setGroupSpeed(r,i)}},e.prototype.checkRunEnd=function(){for(var t=1;5>=t;t++){for(var e=this.getGoatArray(t.toString()),i=0,n=e;i<n.length;i++){var o=n[i];this.IsRunEnd(o)&&this.RunEndEvent(o,t.toString(),!1)}e=this.getGoatHitArray(this.PLAYER_1,t.toString());for(var a=0,r=e;a<r.length;a++){var o=r[a];this.IsRunEnd(o)&&this.RunEndEvent(o,t.toString(),!0)}e=this.getGoatHitArray(this.PLAYER_2,t.toString());for(var s=0,h=e;s<h.length;s++){var o=h[s];this.IsRunEnd(o)&&this.RunEndEvent(o,t.toString(),!0)}}},e.prototype.IsRunEnd=function(t){if(t.player==this.PLAYER_1){if(t.y<=this.PLAYER1_ENDY)return!0}else if(t.player==this.PLAYER_2&&t.y>=this.PLAYER2_ENDY)return!0;return!1},e.prototype.RunEndEvent=function(t,e,i){var n=t.score;if(null!=t.touchGoat&&t.player!=t.touchGoat.player){for(var o=0,a=0,r=this.getGoatHitArray(t.touchGoat.player,e);a<r.length;a++){r[a]}n+=Math.floor(o)}if(this.addScore(t.player,n),i?ZJ.Util.rmArrayObj(this.getGoatHitArray(t.player,e),t):ZJ.Util.rmArrayObj(this.getGoatArray(e),t),this.goatUIGroupArray[+e-1].removeChild(t),i){for(var s=t.player==this.PLAYER_1?this.PLAYER_2:this.PLAYER_1,h=this.getGoatHitArray(s,e),c=void 0;c=h.pop();)this.goatUIGroupArray[+e-1].removeChild(c);var l=this.calGoatGroupSpeed(e);this.setGroupSpeed(l,e)}},e.prototype.sendPing=function(){this.isDanji||(this.intervalPing=setInterval(function(){ZJ.SocketManager.instance.send(11004)},this.INTERVAL_PING))},e.prototype.sendLogin=function(){this.isDanji||ZJ.SocketManager.instance.send(1e4,{openId:ChushouSDK.instance.csAuthRequestData.openUid,sign:"sign",timestamp:ZJ.Util.timeStamp(),appId:1234,params:[ChushouSDK.instance.csAuthRequestData.nickname,ChushouSDK.instance.csAuthRequestData.gender,ChushouSDK.instance.csAuthRequestData.avatar]})},e.prototype.connect=function(){if(!this.isDanji){var t=ModuleConfig.ws+"://"+ModuleConfig.ip+":"+ModuleConfig.port;ZJ.SocketManager.instance.connectByUrl(t)}},e.prototype.onSocketConnected=function(){var t=this;ModuleConfig.compile.chushou&&ChushouSDK.instance.csAuthRequest(function(){t.sendPing(),t.sendLogin()})},e.prototype.onSocketData=function(t){var e=this,i=t.data,n=i.data;switch(i.protoID){case 1e4:this.sendMatch(ChushouSDK.instance.csAuthRequestData.csGroupId.toString()),this.playerId=n.playerId;break;case 10001:this.sendReady(),ChushouSDK.instance.gameRoomId=n.roomId,ChushouSDK.instance.csJoinRoom();break;case 11002:0==n.result?console.log("ready success"):(ChushouSDK.instance.csExitGame(),console.log("ready fail"));break;case 11003:this.startTimestamp=0,this.pushTimeAction(function(t){return e.startTimestamp=t,console.log("服务器时间: "+e.startTimestamp),!0}),this.onCountDown(n);break;case 11007:0!=n.result&&this.setLeave();break;case 11010:this.onReceiveGameData(n);break;case 11011:this.onReceiveCheckData(n);break;case 11012:this.onReceiveWin(n);break;case 11015:for(var o=n.millisecond,a=0;a<this.timeActionArray.length;a++){var r=this.timeActionArray[a](o);1==r&&(ZJ.Util.rmArrayObj(this.timeActionArray,this.timeActionArray[a]),a--)}}},e.prototype.sendMatch=function(t){ZJ.SocketManager.instance.send(10001,{gameMode:1,matchType:1,matchId:t})},e.prototype.sendReady=function(){ZJ.SocketManager.instance.send(11002)},e.prototype.onCountDown=function(t){var e=this;console.log("开始倒计时:"+t.readyTime),ZJ.UIManager.instance.destroyView(UIName.Settle),ModuleConfig.compile.chushou&&ChushouSDK.instance.csPayEntryFee(function(t){"0"==t.code?console.log("成功扣除入场费"):("100"==t.code&&console.log("触手豆余额不足"),console.log(t.errMsg))}),this.isServer=!1,this.seed=t.seeds[0];for(var i=this.seed,n=this.seed,o=0;o<t.playerInfos.length;o++)if(t.playerInfos[o].playerId==this.playerId){this.player1=t.playerInfos[o],this.name1.text=this.player1.nickname;for(var a=0;o+1>a;a++)i=ZJ.MathUtil.randomSeed(i+o+1);0==o?(this.isServer=!0,console.log("isServer")):console.log("isClient")}else{this.player2=t.playerInfos[o],this.name2.text=this.player2.nickname;for(var a=0;o+1>a;a++)n=ZJ.MathUtil.randomSeed(n+o+1)}this.player1.avatarUrl&&(this.head1.source=this.player1.avatarUrl),this.player2.avatarUrl&&(this.head2.source=this.player2.avatarUrl),this.updateSex(this.player1,this.player1.gender),this.updateSex(this.player2,this.player2.gender),this.start.visible=!1,this.setWait(!1),this.clear(),this.updateScoreText(),this.resetRandomGoatNumArray(this.seed,i,n),this.updateReviewPic(),this.waitCom&&this.waitCom.hide(),this.waitCom2&&this.waitCom2.hide(),this.bg_mask.visible=!1,this.daojishiAnim.visible=!0,this.daojishiAnim.addDBEventListener(dragonBones.EgretEvent.COMPLETE,function(t){e.daojishiAnim.animation.stop(),e.daojishiAnim.visible=!1,e.playGame()},this),this.daojishiAnim.animation.play("newAnimation",1)},e.prototype.onReceiveGameData=function(t){var e=t.playerId,i=ZJ.Util.bytesToObj(t.processData);if(e==this.player2.playerId){var n=i.cmd;this.cmdPool.push({cmd:n,data:i})}},e.prototype.onReceiveCheckData=function(t){var e=t.playerId,i=(t.score,ZJ.Util.bytesToObj(t.resultData));e==this.player2.playerId&&this.cmdPool.push({cmd:Cmd.checkData,data:i})},e.prototype.onReceiveWin=function(t){if(0==t.result){var e=void 0;if(e=t.winPlayerId==this.playerId?1:0==t.winPlayerId?0:2,null==ZJ.UIManager.instance.getView(UIName.Settle)){var i=ZJ.UIManager.instance.openView(UIName.Settle);i.setSettle(e,this.player1,this.player2,this.score1,this.score2)}this.isPlay=!1}else console.log("游戏结果通知失败")},e.prototype.updateReviewPic=function(){for(var t=0;4>t;t++){var e=this.ranGoat1Array[t+this.ranGoatIndex],i=this.nextImgArray[t];null!=e?(i.source="rabbitUI"+e+"_png",t>=1?(this.player1_lvArray[t].source="lv"+e+"n_png",this.player1_nextArray[t-1].source="p1_next"+e+"_png"):this.player1_lvArray[t].source="lv"+e+"_png"):(i.source="",this.player1_lvArray[t].source="")}var n=this.ranGoat2Array[this.ranGoat2Index];null!=n?(this.player2_next.source="rabbitUI"+n+"_png",this.player2_lv.source="lv"+n+"n_png",this.player2_bg.source="p2_next"+n+"_png"):(this.player2_next.source="",this.player2_lv.source="")},e.prototype.gameOver=function(){this.over.visible=!0,this.isCooling=!1,this.score1>this.score2?console.log("胜利"):this.score1==this.score2?console.log("平手"):console.log("失败"),this.isPlay=!1,clearInterval(this.timeIntervalId)},e.prototype.playGame=function(){var t=this;this.isPlay=!0,this.countDown.visible=!0,this.countDown.start(120),this.time=0,this.timeIntervalId=setInterval(function(){t.time+=1},1e3),this.isDanji&&this.setAI(!0)},e.prototype.setAI=function(t){var e=this;clearInterval(this.aiIntervalId),t&&(this.useGoat(this.PLAYER_2,this.getAIChooseRoad(this.PLAYER_2),this.getRanGoatFromRanArray(this.PLAYER_2)),this.aiIntervalId=setInterval(function(){e.useGoat(e.PLAYER_2,e.getAIChooseRoad(e.PLAYER_2),e.getRanGoatFromRanArray(e.PLAYER_2))},1e3*this.AI_INTERVAL))},e.prototype.clear=function(){this.time=0,this.diffTimestamp=0,this.roadGoatArray={},this.roadGoatHitArray={},this.ranGoatIndex=0,this.ranGoat2Index=0,this.cmdPool.length=0;for(var t=0;t<this.goatUIGroupArray.length;t++)this.goatUIGroupArray[t].removeChildren();this.score1=0,this.score2=0,clearTimeout(this.cd1IntevalId),clearTimeout(this.cd2IntevalId),clearInterval(this.timeIntervalId),this.isCooling=!1,this.coolTime=0,this.bar.value=100,this.next1.horizontalCenter=this.next1DefHorizontal+1*this.bar.width,this.bar.getChildAt(1).source="bar_1_png",this.canUseGoat1=!0,this.canUseGoat2=!0;this.nextImgArray[0];this.updateRoadTip(this.canUseGoat1)},e.prototype.setWait=function(t){var e=this;this.isWait=t,clearInterval(this.waitIntervalId),t?(this.isPlay=!1,this.topGroup.visible=!1,this.uiGroup.visible=!1,this.canUseGoat1=!0,this.useGoat(this.PLAYER_1,this.getAIChooseRoad(this.PLAYER_1),this.getRanGoatFromRanArray(this.PLAYER_1)),this.waitIntervalId=setInterval(function(){e.useGoat(e.PLAYER_1,e.getAIChooseRoad(e.PLAYER_1),e.getRanGoatFromRanArray(e.PLAYER_1))},1e3*this.AI_INTERVAL_0),this.countDown.visible=!1,this.score1Label.visible=!1,this.score2Label.visible=!1,this.roadGroup.visible=!1,this.setAI(!0)):(this.setAI(!1),this.topGroup.visible=!0,this.uiGroup.visible=!0,this.countDown.visible=!0,this.score1Label.visible=!0,this.score2Label.visible=!0,this.roadGroup.visible=!0)},e.prototype.getGoatArray=function(t){return this.roadGoatArray[t]||(this.roadGoatArray[t]=new Array),this.roadGoatArray[t]},e.prototype.getGoatHitArray=function(t,e){var i=t+"_"+e;return this.roadGoatHitArray[i]||(this.roadGoatHitArray[i]=new Array),this.roadGoatHitArray[i]},e.prototype.setGroupSpeed=function(t,e){var i=this.getGoatHitArray(this.PLAYER_1,e);if(i)for(var n=0,o=i;n<o.length;n++){var a=o[n];a.speed=t}if(i=this.getGoatHitArray(this.PLAYER_2,e))for(var r=0,s=i;r<s.length;r++){var a=s[r];a.speed=-1*t}},e.prototype.addScore=function(t,e){t==this.PLAYER_1?this.score1+=e:t==this.PLAYER_2&&(this.score2+=e),this.updateScoreText()},e.prototype.updateScoreText=function(){this.score1Label.text=this.score1.toString(),this.score2Label.text=this.score2.toString()},e.prototype.calGoatSpeed=function(t){var e=t.strength/t.weight;return(null==e||e==Number.NaN||e>1)&&(e=1),-1>e&&(e=-1),e*this.GOAT_MOVEPIX_PER*this.defSpeedArray[t.ranGoat-1]},e.prototype.calGoatGroupSpeed=function(t){var e=0,i=0,n=0,o=0,a=this.getGoatHitArray(this.PLAYER_1,t);if(a)for(var r=0,s=a;r<s.length;r++){var h=s[r];e+=h.strength,n+=h.weight}if(a=this.getGoatHitArray(this.PLAYER_2,t))for(var c=0,l=a;c<l.length;c++){var h=l[c];i+=h.strength,o+=h.weight}var u=(e-i)/(n+o);return(null==u||u==Number.NaN||u>1)&&(u=1),-1>u&&(u=-1),0!=u&&Math.abs(u)<this.MIN_SPEED&&(u*=this.MIN_SPEED/Math.abs(u)),u*this.GOAT_MOVEPIX_PER},e.prototype.getGoatInfoByType=function(t){var e=ZJ.TableManager.instance.tables[xlsx.cfg_c_goat][t];return{speed:e.B,weight:e.C,strength:e.D,score:e.E}},e.prototype.getCurData=function(){for(var t=[],e=1;5>=e;e++){var i=e.toString(),n=this.getGoatArray(i);if(null!=n){t[i]=new Array;for(var o=t[i],a=0,r=n;a<r.length;a++){var s=r[a];o.push({x:s.x,y:s.y,strength:s.strength,weight:s.weight,score:s.score,ranGoat:s.ranGoat,player:s.player==this.PLAYER_1?1:2})}}}for(var h=[],c=1;5>=c;c++){for(var i=c.toString(),e=1;2>=e;e++){var l=1==e?this.PLAYER_1:this.PLAYER_2,u=this.getGoatHitArray(l,i);if(null!=u){null==h[i]&&(h[i]={}),h[i][l]=new Array;for(var o=h[i][l],p=0,d=u;p<d.length;p++){var s=d[p];o.push({x:s.x,y:s.y,strength:s.strength,weight:s.weight,score:s.score,ranGoat:s.ranGoat})}}}var g=this.getGoatHitArray(this.PLAYER_1,i),y=this.getGoatHitArray(this.PLAYER_2,i);g.length>0&&y.length>0&&(g[0].touchGoat=y[0],y[0].touchGoat=g[0])}var f={nohitData:t,hitData:h,ranGoatIndex:this.ranGoatIndex,ranGoat2Index:this.ranGoat2Index,score1:this.score1,score2:this.score2};return f},e.prototype.setNewData=function(t){for(var e=new Array,i=0;i<this.goatUIGroupArray.length;i++)for(var n=this.goatUIGroupArray[i],o=0;o<n.numChildren;o++)e.push(n.getChildAt(o));for(var a in this.roadGoatArray)this.roadGoatArray[a].length=0;for(var a in this.roadGoatHitArray)this.roadGoatHitArray[a].length=0;var r=t.nohitData,s=t.hitData;if(null!=s)for(var o=0;2>o;o++)for(var h=0==o?this.PLAYER_1:this.PLAYER_2,c=h==this.PLAYER_1?this.PLAYER_2:this.PLAYER_1,i=1;5>=i;i++){var l=i.toString();if(null!=s[l]){var u=s[l][c];if(null!=u)for(var p=0,d=u;p<d.length;p++){var g=d[p],y=e.shift();null==y?y=this.createNewGoat(h,g.ranGoat,i):y.player=h,this.setGoatData(y,i,g),y.playEndAttackAnim(),this.getGoatHitArray(h,l).push(y)}}}if(null!=r)for(var i=1;5>=i;i++){var l=i.toString(),u=r[l];if(null!=u)for(var f=0,v=u;f<v.length;f++){var g=v[f],y=e.shift(),h=1==g.player?this.PLAYER_2:this.PLAYER_1;null==y?y=this.createNewGoat(h,g.ranGoat,i):y.player=h,this.setGoatData(y,i,g),y.playWalk(),y.speed=this.calGoatSpeed(y),this.getGoatArray(l).push(y)}}for(var i=1;5>=i;i++)for(var l=i.toString(),m=this.calGoatGroupSpeed(l),o=0;2>o;o++){var h=0==o?this.PLAYER_1:this.PLAYER_2,A=m*(0==o?1:-1),_=this.getGoatHitArray(h,l);if(null!=_)for(var E=0,C=_;E<C.length;E++){var y=C[E];y.speed=A}}for(var I=0,R=e;I<R.length;I++){var y=R[I];null!=y&&(y.anim&&y.anim.parent.removeChild(y.anim),y.parent.removeChild(y))}this.ranGoat2Index=t.ranGoatIndex,this.ranGoatIndex=t.ranGoat2Index,this.score1=t.score2,this.score2=t.score1,this.updateScoreText(),this.updateReviewPic()},e.prototype.setGoatData=function(t,e,i){t.x=i.x,t.y=1920-i.y,t.strength=i.strength,t.score=i.score,t.weight=i.weight,t.ranGoat=i.ranGoat,t.width=215*this.GOAT_SCALE_ARRAY[t.ranGoat-1],t.height=139*this.GOAT_SCALE_ARRAY[t.ranGoat-1],t.anchorOffsetX=t.width/2,t.player==this.PLAYER_1?(t.anchorOffsetY=t.height,t.setAnim("rabbit3"),this.goatUIGroupArray[e-1].addChild(t)):t.player==this.PLAYER_2&&(t.anchorOffsetY=0,t.setAnim("rabbit4"),this.goatUIGroupArray[e-1].addChildAt(t,0))},e.prototype.resetRandomGoatNumArray=function(t,e,i){this.ranGoat1Array.length=0,this.ranGoat2Array.length=0,this.ranGoat1Array=this.getNewGoatArray(t,e),this.ranGoat2Array=this.getNewGoatArray(t,i)},e.prototype.ShowHitEffect=function(t,e){var i,n=this;i=t.player==this.PLAYER_1&&e.player==this.PLAYER_1?t.y>e.y?t.y-t.height:e.y-e.height:t.player==this.PLAYER_2&&e.player==this.PLAYER_2?t.y<e.y?e.y:t.y:t.player==this.PLAYER_1?t.y-t.height:e.y-t.height,ZJ.ResManager.instance.loadMovieClip("bomb","bomb",function(o,a){n.addChild(o),n.goatGroup.addChild(o);var r=(t.x+e.x)/2;o.x=r,o.y=i,o.scaleX=-1,o.addEventListener(egret.MovieClipEvent.FRAME_LABEL,function(t){"@end"==t.frameLabel&&n.goatGroup.removeChild(o)},n),o.play(1)})},e.prototype.updateRoadTip=function(t,e){if(t)for(var i=0;i<this.roadTipGroupArray.length;i++)this.roadTipArray[i].source="right_road_png",this.roadTipArray[i].visible=!0,this.roadAnimArray[i].visible||(this.roadAnimArray[i].visible=!0,this.roadAnimArray[i].animation.gotoAndPlayByFrame("newAnimation",0));else for(var i=0;i<this.roadTipGroupArray.length;i++)e&&i==e-1?(this.roadTipArray[i].source="wrong_road_png",this.roadTipArray[i].visible=!0):(this.roadTipArray[i].source="right_road_png",this.roadTipArray[i].visible=!1),this.roadAnimArray[i].animation.stop(),this.roadAnimArray[i].visible=!1},e.prototype.getAIChooseRoad=function(t){var e=t==this.PLAYER_1?this.PLAYER_2:this.PLAYER_1;this.seed=ZJ.MathUtil.randomSeed(this.seed);for(var i=ZJ.MathUtil.randomRange(1,101,this.seed),n=[],o=1;5>=o;o++){var a=this.getGoatHitArray(e,o.toString());null!=a&&a.length>0&&n.push(o)}for(var o=1;5>=o;o++)if(-1==n.indexOf(o)){var a=this.getGoatArray(o.toString());if(null!=a)for(var r=0,s=a;r<s.length;r++){var h=s[r];h.player==e&&n.push(o)}}var c;if(50>=i&&n.length>0){this.seed=ZJ.MathUtil.randomSeed(this.seed);var l=ZJ.MathUtil.randomRange(0,n.length);c=n[l]}else c=this.getRandomRoad();return c},e.prototype.getNewGoatArray=function(t,e){var i=Math.floor(this.TOTAL_TIME/this.GOAT_CD_TIME),n=Math.floor(60/this.GOAT_CD_TIME),o=Math.floor(n/2*.6);o>2&&(t=ZJ.MathUtil.randomSeed(t),o=ZJ.MathUtil.randomRange(2,o+1,t)),n=Math.floor(90/this.GOAT_CD_TIME);var a=Math.floor(2*Math.floor(n/3)*.6);a>4&&(t=ZJ.MathUtil.randomSeed(t),a=ZJ.MathUtil.randomRange(4,a+1,t));var r=i-a-o,s=Math.floor(3*Math.floor(r/4)*.6);s>5&&(t=ZJ.MathUtil.randomSeed(t),s=ZJ.MathUtil.randomRange(5,s+1,t)),r-=s;var h=Math.floor(3*Math.floor(r/4)*.8);h>5&&(t=ZJ.MathUtil.randomSeed(t),h=ZJ.MathUtil.randomRange(5,h+1,t));var c=r-=h,l={};l[1]=c,l[2]=h,l[3]=s,l[4]=a,l[5]=o;for(var u=Math.floor(30/this.GOAT_CD_TIME),p=Math.floor(60/this.GOAT_CD_TIME),d=[1,2,3,4,5],g=[],y=0,f=-1,v=0;i>v;v++){var m=!1,A=void 0;do{var _=y;e=ZJ.MathUtil.randomSeed(e);var E=ZJ.MathUtil.randomRange(0,d.length,e);if(A=d[E],A!=f){f=A,_=1,y=_;break}if(_++,(1==A||2==A||3==A)&&_>3)m=!0;else if(4==A&&_>2)m=!0;else{if(!(5==A&&_>1)){y=_;break}m=!0}if(1==m&&1==d.length){var C=0;3>=A?C=0:4==A?C=u:5==A&&(C=p);for(var I=C;I<g.length;I++)if(g[I]!=A){var R=I;_=1;for(var S=R-1;S>=0&&g[S]==A;S--)_++;for(var D=R+1;D<g.length&&g[D]==A;D++)_++;if(3>=A&&_>3)continue;if(4==A&&_>2)continue;if(5==A&&_>1)continue;var w=g[I];g[I]=A,A=w,m=!1;break}m=!1;break}}while(m);g.push(A),l[A]--,l[A]<=0&&ZJ.Util.rmArrayObj(d,A)}return g},e.prototype.createNewGoat=function(t,e,i){var n=new Goat;n.touchEnabled=!1;var o;return t==this.PLAYER_1?(this.canUseGoat1=!1,o=this.PLAYER_1,n.y=this.PLAYER1_STARTY):t==this.PLAYER_2&&(this.canUseGoat2=!1,o=this.PLAYER_2,n.y=this.PLAYER2_STARTY),n.strength=this.goatInfos[e].strength,n.weight=this.goatInfos[e].weight,n.score=this.goatInfos[e].score,n.player=o,n.x=203+168.5*(i-1),n.width=215*this.GOAT_SCALE_ARRAY[e-1],n.height=139*this.GOAT_SCALE_ARRAY[e-1],n.ranGoat=e,n.speed=this.calGoatSpeed(n),n.anchorOffsetX=n.width/2,n.player==this.PLAYER_1?(n.anchorOffsetY=n.height,n.setAnim("rabbit3")):n.player==this.PLAYER_2&&(n.anchorOffsetY=0,n.setAnim("rabbit4")),n.playWalk(),n.player==this.PLAYER_2?this.goatUIGroupArray[i-1].addChildAt(n,0):this.goatUIGroupArray[i-1].addChild(n),n},e.prototype.updateSex=function(t,e){var i;i=t==this.player1?this.sex1:this.sex2,"1"==e?i.source="boy_png":i.source="girl_png"
},e.prototype.setLeave=function(){var t=this,e=ZJ.UIManager.instance.getView(UIName.Settle);return null==e?void setTimeout(function(){t.setLeave()},500):void e.setLeave()},e.prototype.pushTimeAction=function(t){this.timeActionArray.push(t),ZJ.SocketManager.instance.send(11015)},e.prototype.onDestroy=function(){return clearInterval(this.intervalID),clearInterval(this.intervalPing),this.removeEventListener(egret.Event.ENTER_FRAME,this.onEnterFrame,this),ZJ.SocketManager.instance.removeEventListener(ZJ.CommonEventName.SOCKET_CONNECTED,this.onSocketConnected,this),ZJ.SocketManager.instance.removeEventListener(ZJ.CommonEventName.SOCKET_DATA,this.onSocketData,this),0},e}(ZJ.ViewBase);__reflect(GameView.prototype,"GameView");var LoadingView=function(t){function e(){var e=t.call(this)||this;return e.intervalID=0,e.ran1=0,e.ran2=0,e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this);var e=ZJ.ShapeUtil.getRect(0,1,this.stage.stageWidth,this.stage.stageHeight);this.addChild(e);var i=500,n=new eui.ProgressBar;n.skinName="YYLoadingPBSkin",this.progress=n,this.progress.width=450,this.progress.height=62,this.progress.minimum=0,this.progress.maximum=100,this.progress.horizontalCenter=0,this.progress.y=i+435,this.progress.scaleX=1.3,this.progress.scaleY=1.3,this.progress.labelFunction=function(t,e){return t+"%"},this.addChild(this.progress);var o=new eui.Image;o.source="load_img03_png",o.horizontalCenter=0,o.y=i+630,o.width=510,o.height=100,o.alpha=.2,this.addChild(o),this.load3=new eui.Label,this.load3.text="等待对手加入游戏...",this.load3.horizontalCenter=0,this.load3.y=i+660,this.load3.size=40,this.load3.textColor=16777215,this.addChild(this.load3),this.startCount()},e.prototype.startCount=function(){var t=this;this.intervalID=setInterval(function(){t.ran2=Math.min(t.ran2+8*Math.random()+2,99),t.progress.value=Math.floor((t.ran1+t.ran2)/2)},200)},e.prototype.onProgress=function(t,e){this.ran1=Math.floor(t/e*100),this.progress.value=Math.floor((this.ran1+this.ran2)/2)},e.prototype.onDestroy=function(){return t.prototype.onDestroy.call(this),clearInterval(this.intervalID),0},e}(ZJ.ViewBase);__reflect(LoadingView.prototype,"LoadingView");var SettleView=function(t){function e(){var e=t.call(this)||this;return e.skinName="SettleViewSkin",e}return __extends(e,t),e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){var e=this;t.prototype.childrenCreated.call(this),this.fight.visible=!1,setTimeout(function(){ZJ.ShapeUtil.setArcMask(e.head1,e.head1.width/2,0,1,!0,e.head1.width/2,e.head2.height/2),ZJ.ShapeUtil.setArcMask(e.head2,e.head2.width/2,0,1,!0,e.head2.width/2,e.head2.height/2)},50),this.play.addEventListener("touchTap",function(){"record_leave_png"==e.play.source?ChushouSDK.instance.csExitGame():"record_wait_png"!=e.play.source&&ChushouSDK.instance.csCheckEntryFee(function(t){"0"==t.code?("record_accept_png"!=e.play.source&&(e.play.source="record_wait_png"),ZJ.SocketManager.instance.send(11007)):"100"==t.code?ChushouSDK.instance.csInvokeRecharge(function(t){"0"==t.code?console.log("拉起充值页面成功"):console.log(t.errMsg)}):console.log(t.errMsg)})},this),ZJ.SocketManager.instance.addEventListener(ZJ.CommonEventName.SOCKET_DATA,this.onSocketData,this),this.timeOnEnterFrame=egret.getTimer(),this.addEventListener(egret.Event.ENTER_FRAME,this.onEnterFrame,this)},e.prototype.onEnterFrame=function(t){var e=egret.getTimer(),i=this.timeOnEnterFrame,n=e-i;this.light.rotation-=90*(n/1e3),this.timeOnEnterFrame=e},e.prototype.onSocketData=function(t){var e=t.data;if(!ModuleConfig.compile.yy||1==e.result){var i=e.data;switch(e.protoID){case 11007:0!=i.result&&this.setLeave();break;case 11009:i.playerId!=this.player1.playerId&&"record_wait_png"!=this.play.source&&"record_accept_png"!=this.play.source&&(this.play.source="record_accept_png",this.fight.visible=!0)}}},e.prototype.setSettle=function(t,e,i,n,o){var a=this;this.win=t,this.player1=e,this.player2=i,e&&(this.head1.source=e.avatarUrl,this.name1.text=e.nickname),i&&(this.head2.source=i.avatarUrl,this.name2.text=i.nickname),this.score1.text=n.toString(),this.score2.text=o.toString(),this.setInfo();var r=new Array;r.push(i.openId),ChushouSDK.instance.csGetUserRelationship(r,function(t){"0"==t.code?"0"==t.users[0].relationship?(a.guanzhu.visible=!0,a.guanzhu.source="record_guanzhuta_png"):(a.guanzhu.visible=!0,a.guanzhu.source="record_yiguanzhu_png"):console.log(t.errMsg)}),this.guanzhu.addEventListener("touchTap",function(t){"record_guanzhuta_png"==a.guanzhu.source&&ChushouSDK.instance.csFollowUser(i.openId,function(t){"0"==t.code?a.guanzhu.source="record_yiguanzhu_png":console.log(t.errMsg)})},this)},e.prototype.setInfo=function(){1==this.win?(this.light.source="record_light_png",this.panel.source="winPanel_png",this.stateTip.source="youwin_png"):2==this.win?(this.light.source="record_darklight_png",this.panel.source="failPanel_png",this.stateTip.source="youlose_png"):0==this.win&&(this.light.source="record_light_png",this.panel.source="winPanel_png",this.stateTip.source="pingju_png")},e.prototype.setLeave=function(){this.play.source="record_leave_png",this.fight.visible=!1},e.prototype.onDestroy=function(){return t.prototype.onDestroy.call(this),this.removeEventListener(egret.Event.ENTER_FRAME,this.onEnterFrame,this),0},e}(ZJ.ViewBase);__reflect(SettleView.prototype,"SettleView");var Main=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.createChildren=function(){var e=this;t.prototype.createChildren.call(this),egret.lifecycle.addLifecycleListener(function(t){}),egret.lifecycle.onPause=function(){e.tickerInterval=setInterval(function(){egret.ticker.update()},e,1e3/30)},egret.lifecycle.onResume=function(){clearInterval(e.tickerInterval)},egret.registerImplementation("eui.IAssetAdapter",new AssetAdapter),egret.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),this.runGame()["catch"](function(t){console.log(t)})},e.prototype.runGame=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){switch(e.label){case 0:return[4,this.createGameScene()];case 1:return e.sent(),[4,platform.login()];case 2:return e.sent(),[4,platform.getUserInfo()];case 3:return t=e.sent(),console.log(t),[2]}})})},e.prototype.createGameScene=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){switch(e.label){case 0:return egret.ImageLoader.crossOrigin="anonymous",ModuleConfig.compile.yy&&onPKLoading(),[4,ZJ.ResManager.instance.init(this.stage)];case 1:return e.sent(),[4,ZJ.ResManager.instance.loadGroup("realpreload")];case 2:return e.sent(),ZJ.UIManager.instance.init(this),ZJ.UIManager.instance.uiLayers=ModuleConfig.uiLayers,ZJ.UIManager.instance.uiDatas=ModuleConfig.uiDatas,t=this.GetLoadingView(),[4,ZJ.ResManager.instance.loadGroup("preload",0,t)];case 3:return e.sent(),ZJ.TableManager.instance.init(),ZJ.SocketManager.instance.init(),1==ModuleConfig.compile.yy&&onPKFinishLoading(),ModuleStartUp.init(),1==ModuleConfig.compile.yy&&onPKStart(),[2]}})})},e.prototype.GetLoadingView=function(){var t=null,e=null;return ModuleConfig.compile.need_loading&&(ModuleConfig.compile.danji?e=LoadingView:ModuleConfig.compile.yy?e=YYLoadingView:ModuleConfig.compile.chushou&&(e=ChushouLoadingView)),null!=e&&(ModuleConfig.uiDatas[UIName.Loading].viewClass=e,t=ZJ.UIManager.instance.openView(UIName.Loading)),t},e.prototype.onEnterFrame=function(){},e}(eui.UILayer);__reflect(Main.prototype,"Main");var ZJ;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),Object.defineProperty(e,"instance",{get:function(){return this._instance},enumerable:!0,configurable:!0}),e.prototype.init=function(){return 0},e._instance=new e,e}(egret.EventDispatcher);t.EventManager=e,__reflect(e.prototype,"ZJ.EventManager")}(ZJ||(ZJ={}));var ZJ;!function(t){var e=function(){function e(){}return e.randomRange=function(e,i,n){null==n&&(n=t.Util.timeStamp());var o=this.randomSeed(n);return o/=233280,Math.floor(e+o*(i-e))},e.randomSeed=function(t){return t=(9301*t+49297)%233280},e.YiYuanErCi=function(t,e,i){var n,o,a,r=[];return n=e*e-4*t*i,0>n||(o=(-1*e+Math.sqrt(n))/(2*t),a=(-1*e-Math.sqrt(n))/(2*t),r.push(o),r.push(a)),r},e.GouguDingli=function(t,e){return Math.sqrt(t*t+e*e)},e}();t.MathUtil=e,__reflect(e.prototype,"ZJ.MathUtil")}(ZJ||(ZJ={}));var ZJ;!function(t){var e=function(){function e(){this.aa=null,this.stage=null,this.dbFactory=dragonBones.EgretFactory.factory,this.dbFileNames=[]}return Object.defineProperty(e,"instance",{get:function(){return this._instance},enumerable:!0,configurable:!0}),e.prototype.init=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return this.stage=t,this.aa=new AssetAdapter,[4,this.loadConfig("resource/default.res.json?v="+Math.random(),"resource/")];case 1:return e.sent(),[4,this.loadTheme()];case 2:return e.sent(),[2]}})})},e.prototype.loadRes=function(t,e,i,n){this.aa.getAsset(t,e,i,n)},e.prototype.loadExistRes=function(t){return RES.getRes(t)},e.prototype.loadConfig=function(t,e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(i){switch(i.label){case 0:return[4,RES.loadConfig(t,e)];case 1:return i.sent(),[2]}})})},e.prototype.loadGroup=function(t,e,i){return void 0===e&&(e=0),void 0===i&&(i=null),__awaiter(this,void 0,void 0,function(){var n;return __generator(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,RES.loadGroup(t,e,i)];case 1:return o.sent(),[3,3];case 2:return n=o.sent(),console.error(n),[3,3];case 3:return[2]}})})},e.prototype.loadTheme=function(){var t=this;return new Promise(function(e,i){var n=new eui.Theme("resource/default.thm.json",t.stage);n.addEventListener(eui.UIEvent.COMPLETE,function(){e()},t)})},e.prototype.loadMovieClip=function(e,i,n){t.ResManager.instance.loadRes(e+"_json",function(o,a){var r=o;t.ResManager.instance.loadRes(e+"_png",function(t,e){var o=t,a=new egret.MovieClipDataFactory(r,o),s=new egret.MovieClip(a.generateMovieClipData(i));n(s,a)},this)},this)},e.prototype.loadDragonBones=function(t,e){if(void 0===e&&(e=""),""==e&&(e=t),-1==this.dbFileNames.indexOf(t)){var i=this.loadExistRes(t+"_ske_json"),n=this.loadExistRes(t+"_tex_json"),o=this.loadExistRes(t+"_tex_png");this.dbFactory.parseDragonBonesData(i),this.dbFactory.parseTextureAtlasData(n,o),this.dbFileNames.push(t)}var a=this.dbFactory.buildArmatureDisplay(e);return a},e.prototype.replaceDBSlotDisplay=function(t,e,i,n,o){void 0===e&&(e=""),""==e&&(e=t),this.dbFactory.replaceSlotDisplay(t,e,i,n,o)},e._instance=new e,e}();t.ResManager=e,__reflect(e.prototype,"ZJ.ResManager")}(ZJ||(ZJ={}));var ZJ;!function(t){var e=function(){function t(){}return t.getRect=function(t,e,i,n,o,a){void 0===o&&(o=0),void 0===a&&(a=0);var r=new egret.Shape;return r.graphics.beginFill(t,e),r.graphics.drawRect(o,a,i,n),r.graphics.endFill(),r},t.getCircle=function(t,e,i,n,o){void 0===n&&(n=0),void 0===o&&(o=0);var a=new egret.Shape;return a.graphics.beginFill(t,e),a.graphics.drawCircle(n,o,i),a.graphics.endFill(),a},t.getLine=function(t,e,i,n,o,a,r){var s=new egret.Shape;return s.graphics.lineStyle(i,t,e),s.graphics.moveTo(n,o),s.graphics.lineTo(a,r),s.graphics.endFill(),s},t.getArc=function(t,e,i,n,o,a,r,s,h){void 0===r&&(r=!1),void 0===s&&(s=0),void 0===h&&(h=0);var c=new egret.Shape;return c.graphics.lineStyle(i,t,e),c.graphics.drawArc(s,h,n,Math.PI/180*o,Math.PI/180*a,r),c.graphics.endFill(),c},t.getArch=function(t,e,i,n,o,a,r,s){void 0===a&&(a=!1),void 0===r&&(r=0),void 0===s&&(s=0);var h=new egret.Shape;return h.graphics.beginFill(t,e),h.graphics.drawArc(r,s,i,Math.PI/180*n,Math.PI/180*o,a),h.graphics.endFill(),h},t.setArcMask=function(t,e,i,n,o,a,r){void 0===o&&(o=!1),void 0===a&&(a=t.width*t.scaleX/2),void 0===r&&(r=t.height*t.scaleY/2);var s;null!=t.mask?s=t.mask:(s=new egret.Shape,t.parent.addChild(s));var h=Math.round(i+360*n)*Math.PI/180;i*=Math.PI/180,s.graphics.clear(),s.graphics.beginFill(16711680,1),s.graphics.lineTo(e,0),s.graphics.drawArc(a,r,e,i,h,o),s.graphics.lineTo(a,r),s.graphics.endFill(),s.x=t.x,s.y=t.y,t.mask=s},t}();t.ShapeUtil=e,__reflect(e.prototype,"ZJ.ShapeUtil")}(ZJ||(ZJ={}));var ZJ;!function(t){var e=function(t){function e(e,i,n,o){var a=t.call(this,e,i,n,o)||this;return a.data=null,a}return __extends(e,t),e}(egret.Event);t.SocketDataEvent=e,__reflect(e.prototype,"ZJ.SocketDataEvent")}(ZJ||(ZJ={}));var ZJ;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.socket=null,t.ProtoBufRoot=new protobuf.Root,t.send=null,t.onSocketData=null,t.getProtoByID=null,t._company=1,t.clientIndex=0,t}return __extends(i,e),Object.defineProperty(i,"instance",{get:function(){return this._instance},enumerable:!0,configurable:!0}),i.prototype.init=function(){return this.parseProto(),this.socket=new egret.WebSocket,this.socket.type=egret.WebSocket.TYPE_BINARY,this.setCompany(1),this.socket.addEventListener(egret.ProgressEvent.SOCKET_DATA,this.onSocketData,this),this.socket.addEventListener(egret.Event.CONNECT,this.onSocketConnect,this),0},i.prototype.parseProto=function(){for(var t=this.ProtoBufRoot,e=ModuleConfig.protoFiles,i=0,n=e.length;n>i;++i){var o=RES.getRes(e[i]);protobuf.parse(o,t)}},i.prototype.setCompany=function(t){switch(this._company=t,t){case 2:this.send=this.sendYouai,this.onSocketData=this.onSocketDataYouai,this.getProtoByID=this.getProtoByIDYouai;break;case 3:this.send=this.sendAli,this.getProtoByID=this.getProtoByIDHuoshu;break;default:this.send=this.sendHuoshu,this.onSocketData=this.onSocketDataHuoshu,this.getProtoByID=this.getProtoByIDHuoshu}},i.prototype.connect=function(t,e){this.socket.connect(t,e)},i.prototype.connectByUrl=function(t){this.socket.connectByUrl(t)},i.prototype.close=function(){this.socket.close()},i.prototype.onSocketConnect=function(e){var i=new egret.Event(t.CommonEventName.SOCKET_CONNECTED);this.dispatchEvent(i)},i.prototype.buildSmallShitByID=function(t,e){var i=this.getProtoByID(t,!0),n=this.buildSmallShit(i,e);return n},i.prototype.decodeShitByID=function(t,e){var i=this.getProtoByID(t,!1),n=this.decodeShit(i,e);return n},i.prototype.buildSmallShit=function(t,e){var i=t.create(e),n=t.encode(i),o=n.finish();return o},i.prototype.decodeShit=function(t,e){var i=t.decode(e);return i},i.prototype.sendHuoshu=function(t,e){void 0===e&&(e={}),console.log("send: "+t),console.log(e);var i=this.buildSmallShitByID(t,e),n=new egret.ByteArray;n.writeInt(i.byteLength),n.writeShort(t),n._writeUint8Array(i),this.socket.writeBytes(n)},i.prototype.onSocketDataHuoshu=function(e){var i=new egret.ByteArray;this.socket.readBytes(i);var n=(i.readInt(),i.readShort()),o=this.decodeShitByID(n,i.bytes.subarray(6));console.log("receive: "+n),console.log(o);var a=new t.SocketDataEvent(t.CommonEventName.SOCKET_DATA);a.data={data:o,protoID:n},this.dispatchEvent(a)},i.prototype.getProtoByIDHuoshu=function(e,i){var n=(Math.floor(e/1e3),""),o="";o=i?"cs_":"sc_",n=o+e;var a=t.SocketManager.instance.ProtoBufRoot,r=a.lookupType(n);return r},i.prototype.sendYouai=function(t,e){void 0===e&&(e={});var i=this.buildSmallShitByID(t,e),n=this.buildSmallShitByID(99999,{messageId:t,clientIndex:this.clientIndex++,data:i}),o=new egret.ByteArray(n);this.socket.writeBytes(o)},i.prototype.onSocketDataYouai=function(e){var i=new egret.ByteArray;this.socket.readBytes(i);var n=this.decodeShitByID(99999,i.bytes),o="",a={},r=n.result,s=n.messageId;n.result?a=this.decodeShitByID(n.messageId,n.data):o=t.Util.Utf8ArrayToStr(n.data);var h=new t.SocketDataEvent(t.CommonEventName.SOCKET_DATA);h.data={data99999:n,error:o,result:r,data:a,protoID:s},this.dispatchEvent(h)},i.prototype.getProtoByIDYouai=function(e,i){var n="";if(i)switch(e){case 99999:n="ClientCmdData";break;case 1e3:n="CmdLoginGameReqMsg";break;case 1001:n="CmdPingReqMsg";break;case 1300:n="CmdJumperUploadAnswerReqMsg";break;case 1303:n="CmdJumperGameOverReqMsg"}else switch(e){case 99999:n="ServerCmdData";break;case 1e3:n="CmdLoginGameRspMsg";break;case 1001:n="CmdPingRspMsg";break;case 1300:n="CmdJumperUploadAnswerRspMsg";break;case 1303:n="CmdJumperGameOverRspMsg";break;case 1399:n="CmdBroadcastJumperBC"}var o=t.SocketManager.instance.ProtoBufRoot,a=o.lookupType(n);return a},i.prototype.sendAli=function(t,e){void 0===e&&(e={});var i=this.buildSmallShitByID(t,e),n=new egret.ByteArray;n.writeInt(i.byteLength),n.writeShort(t),n._writeUint8Array(i),ALISDK.CatcherSDK.instance().sendData(n.buffer)},i.prototype.onSocketDataAli=function(e){var i=new egret.ByteArray(e),n=(i.readInt(),i.readShort()),o=this.decodeShitByID(n,i.bytes.subarray(6));console.log("receive: "+n),console.log(o);var a=new t.SocketDataEvent(t.CommonEventName.SOCKET_DATA);a.data={data:o,protoID:n},this.dispatchEvent(a)},i.prototype.connectByUrlAli=function(e){var i=this;ALISDK.CatcherSDK.init({url:"ws://"+e.ip+":"+e.port+"/ws/game",gameVersion:"0.0.1",gameId:"123123",messageType:"ARRAYBUFFER"}),ALISDK.CatcherSDK.instance().on("CONNECT",function(e){var n=new t.ChannelDataEvent(t.CommonEventName.CHANNEL_DATA);n.data={eventName:"CONNECT",event:e},i.dispatchEvent(n)}).on("PROGRESS",function(e){var n=new t.ChannelDataEvent(t.CommonEventName.CHANNEL_DATA);n.data={eventName:"PROGRESS",event:e},i.dispatchEvent(n)}).on("READY",function(e){var n=new t.ChannelDataEvent(t.CommonEventName.CHANNEL_DATA);n.data={eventName:"READY",event:e},i.dispatchEvent(n)}).on("KICK",function(e){var n=new t.ChannelDataEvent(t.CommonEventName.CHANNEL_DATA);n.data={eventName:"KICK",event:e},i.dispatchEvent(n)}).on("GAMEOVER",function(e){var n=new t.ChannelDataEvent(t.CommonEventName.CHANNEL_DATA);n.data={eventName:"GAMEOVER",event:e},i.dispatchEvent(n)}).on("BREAK",function(e){var n=new t.ChannelDataEvent(t.CommonEventName.CHANNEL_DATA);n.data={eventName:"BREAK",event:e},i.dispatchEvent(n)}).on("CONTINUE",function(e){var n=new t.ChannelDataEvent(t.CommonEventName.CHANNEL_DATA);n.data={eventName:"CONTINUE",event:e},i.dispatchEvent(n)}).on("ERROR",function(e){var n=new t.ChannelDataEvent(t.CommonEventName.CHANNEL_DATA);n.data={eventName:"ERROR",event:e},i.dispatchEvent(n)}).on("MIC_CHANGE",function(e){var n=new t.ChannelDataEvent(t.CommonEventName.CHANNEL_DATA);n.data={eventName:"MIC_CHANGE",event:e},i.dispatchEvent(n)}).on("AUDIO_CHANGE",function(e){var n=new t.ChannelDataEvent(t.CommonEventName.CHANNEL_DATA);n.data={eventName:"AUDIO_CHANGE",event:e},i.dispatchEvent(n)}).on("MESSAGE",function(t){i.onSocketDataAli(t.data)}).start()},i._instance=new i,i}(egret.EventDispatcher);t.SocketManager=e,__reflect(e.prototype,"ZJ.SocketManager")}(ZJ||(ZJ={}));var ZJ;!function(t){var e=function(){function e(){this._tables={}}return Object.defineProperty(e,"instance",{get:function(){return this._instance},enumerable:!0,configurable:!0}),e.prototype.init=function(){return this.load("bg_djw_png"),0},Object.defineProperty(e.prototype,"tables",{get:function(){return this._tables},enumerable:!0,configurable:!0}),e.prototype.load=function(e){t.ResManager.instance.loadRes(e,function(e){for(var i=new JSZip(e),n=i.file(/^[tc].*/),o=0,a=n.length;a>o;o++){var r=n[o],s=t.Util.strFormat("shared/{0}",r.name);this._tables[s]=JSON.parse(r.asText())}t.EventManager.instance.dispatchEvent(new egret.Event(t.CommonEventName.TABLE_LOADED))},this)},e._instance=new e,e}();t.TableManager=e,__reflect(e.prototype,"ZJ.TableManager")}(ZJ||(ZJ={}));var ThemeAdapter=function(){function t(){}return t.prototype.getTheme=function(t,e,i,n){function o(t){e.call(n,t)}function a(e){e.resItem.url==t&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,a,null),i.call(n))}"undefined"!=typeof generateEUI?egret.callLater(function(){e.call(n,generateEUI)},this):(RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,a,null),RES.getResByUrl(t,o,this,RES.ResourceItem.TYPE_TEXT))},t}();__reflect(ThemeAdapter.prototype,"ThemeAdapter",["eui.IThemeAdapter"]);var AssetAdapter=function(){function t(){}return t.prototype.getAsset=function(t,e,i,n){function o(n){e.call(i,n,t)}if(void 0===n&&(n=RES.ResourceItem.TYPE_IMAGE),RES.hasRes(t)){var a=RES.getRes(t);a?o(a):RES.getResAsync(t,o,this)}else RES.getResByUrl(t,o,this,n)},t}();__reflect(AssetAdapter.prototype,"AssetAdapter",["eui.IAssetAdapter"]);var ZJ;!function(t){var e=function(){function t(){this._uiLayers=[],this.uiDatas={},this.uiroot=null,this.views={}}return Object.defineProperty(t,"instance",{get:function(){return this._instance},enumerable:!0,configurable:!0}),t.prototype.init=function(t){return this.uiroot=t,0},Object.defineProperty(t.prototype,"uiLayers",{set:function(t){if(this._uiLayers.length>0)egret.warn("uiLayers已经设定。");else{this._uiLayers=t;for(var e=0,i=this._uiLayers.length;i>e;++e){var n=new eui.Group;n.name="layer"+e,n.touchEnabled=!1,this.uiroot.addChild(n),n.percentWidth=100,n.percentHeight=100}}},enumerable:!0,configurable:!0}),t.prototype.getUIData=function(t){return this.uiDatas[t]},t.prototype.getView=function(t){return this.views[t]},t.prototype.openView=function(t){var e=this.getUIData(t);if(void 0==e)return egret.log("ModuleConfig没有界面配置: "+t),null;var i=this.getView(t);if(void 0!=i);else{if(i=new e.viewClass,void 0==i)return console.warn("viewClass不存在 请检查ModuleConfig.uiDatas"),null;i.percentWidth=100,i.percentHeight=100,this.views[t]=i;var n=0;e.layer<this.uiroot.numChildren&&(n=e.layer),this.uiroot.getChildAt(n).addChild(i)}return i.visible=!0,i.parent.setChildIndex(i,9999),i.show(),i},t.prototype.destroyView=function(t){var e=this.getView(t);return void 0!=e&&null!=e&&(e.onDestroy(),e.parent.removeChild(e),this.views[t]=null),0},t._instance=new t,t}();t.UIManager=e,__reflect(e.prototype,"ZJ.UIManager")}(ZJ||(ZJ={}));var ZJ;!function(t){var e=function(){function t(){}return t.getChar=function(t,e){var i=new egret.ByteArray;return i.writeUTFBytes(t),i.length<e?t:(i.position=0,i.readUTFBytes(e)+"...")},t.strFormat=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];return t.replace(/\{(\d+)\}/g,function(t,i){return e[i]})},t.timeStamp=function(t){return t=t||(new Date).toString(),Date.parse(t)/1e3},t.Utf8ArrayToStr=function(t){var e,i,n,o,a,r;for(e="",n=t.length,i=0;n>i;)switch(o=t[i++],o>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:e+=String.fromCharCode(o);break;case 12:case 13:a=t[i++],e+=String.fromCharCode((31&o)<<6|63&a);break;case 14:a=t[i++],r=t[i++],e+=String.fromCharCode((15&o)<<12|(63&a)<<6|(63&r)<<0)}return e},t.getClassName=function(t){if(t&&t.constructor&&t.constructor.toString()){if(t.constructor.name)return t.constructor.name;var e=t.constructor.toString();if("["==e.charAt(0))var i=e.match(/\[\w+\s*(\w+)\]/);else var i=e.match(/function\s*(\w+)/);if(i&&2==i.length)return i[1]}},t.objToByteArray=function(t){var e=JSON.stringify(t),i=new egret.ByteArray;return i.writeUTF(e),i},t.bytesToObj=function(t){var e=new egret.ByteArray(t),i=JSON.parse(e.readUTF());return i},t.rmArrayObj=function(t,e){return-1!=t.indexOf(e)?t.splice(t.indexOf(e),1):void 0},t}();t.Util=e,__reflect(e.prototype,"ZJ.Util")}(ZJ||(ZJ={}));var ZJ;!function(t){var e=function(){function t(t,e,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),this.x=0,this.y=0,this.z=0,this.x=t,this.y=e,this.z=i}return t}();t.Vector3=e,__reflect(e.prototype,"ZJ.Vector3")}(ZJ||(ZJ={}));var DebugPlatform=function(){function t(){}return t.prototype.getUserInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,{nickName:"username"}]})})},t.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t.prototype.share=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t}();__reflect(DebugPlatform.prototype,"DebugPlatform",["Platform"]),window.platform||(window.platform=new DebugPlatform);var ZJ;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.cb=null,t.leftSecond=0,t.intervalID=0,t.isPause=!1,t.skinName="CountDownSkin",t}return __extends(i,e),i.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},i.prototype.start=function(t){var e=this;this.stop(),this.isPause=!1,this.leftSecond=t,this.count(),this.intervalID=setInterval(function(){e.count()},1e3)},i.prototype.pause=function(){this.isPause=!0},i.prototype.resume=function(){this.isPause=!1},i.prototype.stop=function(){clearInterval(this.intervalID)},i.prototype.setSecond=function(e){var i=Math.floor(e/60)%60,n=e%60,o=this.checkTime(i),a=this.checkTime(n);this.label.text=t.Util.strFormat("{0}:{1}",o,a)},i.prototype.count=function(){return this.setSecond(this.leftSecond),0==this.leftSecond?(this.stop(),void(null!=this.cb&&this.cb())):void(this.isPause||this.leftSecond--)},i.prototype.checkTime=function(t){return 10>t&&(t="0"+t),t},i.prototype.OnDestroy=function(){this.cb=null,this.stop()},i}(eui.Component);t.CountDown=e,__reflect(e.prototype,"ZJ.CountDown",["eui.UIComponent","egret.DisplayObject"])}(ZJ||(ZJ={}));var ZJ;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.INTERVAL=60,i.DISTANCE=20,i.pastTime=0,i.lastPos=new t.Vector3,i.nowPos=new t.Vector3,i.isBegin=!1,i.intervalID=0,i}return __extends(i,e),i.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},i.prototype.childrenCreated=function(){var t=this;e.prototype.childrenCreated.call(this),this.layer.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this),this.layer.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this),this.layer.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this),this.intervalID=setInterval(function(){t.onInterval()},this.INTERVAL)},i.prototype.onInterval=function(){if(this.isBegin){var e=this.nowPos.x-this.lastPos.x,i=this.nowPos.y-this.lastPos.y,n=Math.abs(e),o=Math.abs(i),a={};if(n>o?n>this.DISTANCE&&(e>0?a.direct=t.CommonConfig.RIGHT:a.direct=t.CommonConfig.LEFT,this.isBegin=!1):o>this.DISTANCE&&(i>0?a.direct=t.CommonConfig.DOWN:a.direct=t.CommonConfig.UP,this.isBegin=!1),!this.isBegin){var r=new egret.Event(t.CommonEventName.GESTURE_DIRECT);r.data=a,t.EventManager.instance.dispatchEvent(r)}this.lastPos.x=this.nowPos.x,this.lastPos.y=this.nowPos.y}},i.prototype.onTouchBegin=function(t){this.pastTime=0,this.nowPos.x=t.stageX,this.nowPos.y=t.stageY,this.lastPos.x=t.stageX,this.lastPos.y=t.stageY,this.isBegin=!0},i.prototype.onTouchEnd=function(t){this.isBegin=!1},i.prototype.onTouchMove=function(t){this.nowPos.x=t.stageX,this.nowPos.y=t.stageY},i.prototype.OnDestroy=function(){return clearInterval(this.intervalID),0},i}(t.ComponentBase);t.Gesture=e,__reflect(e.prototype,"ZJ.Gesture")}(ZJ||(ZJ={}));var ImgAnim=function(t){function e(e){var i=t.call(this)||this;return i.interval=0,i.loop=!0,i.index=0,i.imgArray=e,i.source=e[0],i}return __extends(e,t),e.prototype.play=function(){var t=this;this.id=setInterval(function(){t.index++,t.index>=t.imgArray.length&&(t.loop?t.index=0:t.stop()),t.source=t.imgArray[t.index]},this.interval,this)},e.prototype.replay=function(){this.index=0,clearInterval(this.id),this.play()},e.prototype.pause=function(){clearInterval(this.id)},e.prototype.stop=function(){this.index=0,clearInterval(this.id)},e}(eui.Image);__reflect(ImgAnim.prototype,"ImgAnim");var ZJ;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.cb=null,e.leftSecond=0,e.intervalID=0,e.isPause=!1,e}return __extends(e,t),e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e.prototype.start=function(t){var e=this;this.stop(),this.isPause=!1,this.leftSecond=t,this.count(),this.intervalID=setInterval(function(){e.count()},1e3)},e.prototype.pause=function(){this.isPause=!0},e.prototype.resume=function(){this.isPause=!1},e.prototype.stop=function(){clearInterval(this.intervalID)},e.prototype.setSecond=function(t){this.label.text=t.toString()},e.prototype.count=function(){return this.setSecond(this.leftSecond),0==this.leftSecond?(this.stop(),void(null!=this.cb&&this.cb())):void(this.isPause||this.leftSecond--)},e.prototype.checkTime=function(t){return t},e.prototype.OnDestroy=function(){this.cb=null,this.stop()},e}(eui.Component);t.MyCountDown=e,__reflect(e.prototype,"ZJ.MyCountDown",["eui.UIComponent","egret.DisplayObject"])}(ZJ||(ZJ={}));var UILayer=function(){function t(){}return t.View=0,t.Pop=1,t.SDK=2,t}();__reflect(UILayer.prototype,"UILayer");var UIName=function(){function t(){}return t.Game="Game",t.Settle="Settle",t.Loading="Loading",t}();__reflect(UIName.prototype,"UIName");var ModuleConfig=function(){function t(){}return t.uiLayers=[UILayer.View,UILayer.Pop,UILayer.SDK],t.uiDatas=(_a={},_a[UIName.Game]=new ZJ.UIData(UIName.Game,UILayer.View,GameView),_a[UIName.Settle]=new ZJ.UIData(UIName.Settle,UILayer.View,SettleView),_a[UIName.Loading]=new ZJ.UIData(UIName.Loading,UILayer.Pop,LoadingView),_a),t.compile={need_loading:!0,chushou:!0,chushou_h5AppName:"tzdzz",danji:!1},t.ip="dev-game.u17games.com",t.port="12041",t.ws="ws",t.protoFiles=["p10_proto","p11_proto"],t}();__reflect(ModuleConfig.prototype,"ModuleConfig");var EventName=function(){function t(){}return t.Test="Test",t}();__reflect(EventName.prototype,"EventName");var _a,ModuleStartUp=function(){function t(){}return t.init=function(){return ZJ.UIManager.instance.openView(UIName.Game),0},t}();__reflect(ModuleStartUp.prototype,"ModuleStartUp");var ModuleUtil=function(){function t(){}return Object.defineProperty(t,"tables",{get:function(){return ZJ.TableManager.instance.tables},enumerable:!0,configurable:!0}),t}();__reflect(ModuleUtil.prototype,"ModuleUtil");var Goat=function(t){function e(){var e=t.call(this)||this;return e.isSpecialAnim=!1,e.skinName="GoatSkin",e}return __extends(e,t),e.prototype.setAnim=function(t){null!=this.anim&&(this.anim.animation.stop(),this.removeChild(this.anim)),this.isSpecialAnim=!1,"rabbit4"==t&&(this.isSpecialAnim=!0),this.anim=ZJ.ResManager.instance.loadDragonBones(t);var e=this.width/this.anim.measuredWidth;this.anim.anchorOffsetX=-this.anim.measuredWidth/2,this.anim.anchorOffsetY=-this.anim.measuredHeight/2,this.anim.x=0,this.anim.y=0,this.anim.$setScaleX(e),this.anim.$setScaleY(e),this.addChild(this.anim)},e.prototype.playWalk=function(){if(null!=this.anim){var t=this.getAnimName("walk");this.anim.animation.play(t,0)}},e.prototype.playAttack=function(){var t=this;if(null!=this.anim){var e=this.getAnimName("jump");this.anim.animation.play(e,1),this.anim.anchorOffsetY=-this.anim.measuredHeight/2,this.anim.addDBEventListener(dragonBones.EventObject.COMPLETE,function(e){t.anim.removeDBEventListener(dragonBones.EventObject.COMPLETE,function(t){},t),t.isSpecialAnim?(t.anim.animation.play("stand_"+t.ranGoat,1),t.anim.anchorOffsetY=-t.anim.measuredHeight/2,t.anim.addDBEventListener(dragonBones.EventObject.COMPLETE,function(e){t.anim.removeDBEventListener(dragonBones.EventObject.COMPLETE,function(t){},t),t.anim.animation.play("stand(duiqian)_"+t.ranGoat,1),t.anim.anchorOffsetY=-t.anim.measuredHeight/2,t.anim.addDBEventListener(dragonBones.EventObject.COMPLETE,function(e){t.anim.removeDBEventListener(dragonBones.EventObject.COMPLETE,function(t){},t),t.anim.animation.timeScale=.6,t.anim.animation.play("stand(duihou)_"+t.ranGoat,0),t.anim.anchorOffsetY=-t.anim.measuredHeight/2},t)},t)):t.anim.animation.play("stand_"+t.ranGoat,0)},this)}},e.prototype.playEndAttackAnim=function(){this.anim.removeDBEventListener(dragonBones.EventObject.COMPLETE,function(t){},this),this.anim.animation.timeScale=.6,this.isSpecialAnim?this.anim.animation.play("stand(duihou)_"+this.ranGoat,0):this.anim.animation.play("stand_"+this.ranGoat,0),this.anim.anchorOffsetY=-this.anim.measuredHeight/2},e.prototype.getAnimName=function(t){return t+=this.isSpecialAnim?this.ranGoat:"_"+this.ranGoat},e}(eui.Component);__reflect(Goat.prototype,"Goat",["eui.UIComponent","egret.DisplayObject"]);
var NumCountDown=function(t){function e(){var e=t.call(this)||this;return e.cb=null,e.leftSecond=0,e.intervalID=0,e.isPause=!1,e.skinName="NumCountDownSkin",e}return __extends(e,t),e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e.prototype.start=function(t){var e=this;this.stop(),this.isPause=!1,this.leftSecond=t,this.count(),this.intervalID=setInterval(function(){e.count()},1e3)},e.prototype.pause=function(){this.isPause=!0},e.prototype.stop=function(){this.label.text="",clearInterval(this.intervalID)},e.prototype.count=function(){return this.label.text=this.leftSecond.toString(),0==this.leftSecond?(this.stop(),void(null!=this.cb&&this.cb())):void(this.isPause||this.leftSecond--)},e.prototype.OnDestroy=function(){this.cb=null,this.stop()},e}(eui.Component);__reflect(NumCountDown.prototype,"NumCountDown",["eui.UIComponent","egret.DisplayObject"]);var WaitComponent=function(t){function e(){var e=t.call(this)||this;return e.RADIUS=190,e.ROTATION_SECOND=90,e.FISH_ADDROTATION=57,e.curRotation=0,e.timeOnEnterFrame=0,e.isStart=!1,e.skinName="WaitComponentSkin",e.timeOnEnterFrame=egret.getTimer(),e.addEventListener(egret.Event.ENTER_FRAME,e.onEnterFrame,e),e}return __extends(e,t),e.prototype.childrenCreated=function(){this.centerX=this.width/2,this.centerY=this.height/2},e.prototype.onEnterFrame=function(t){var e=egret.getTimer(),i=e-this.timeOnEnterFrame;if(this.isStart){this.curRotation+=i/1e3*this.ROTATION_SECOND,this.curRotation%=360,this.waitLine.rotation=this.curRotation;var n=this.RADIUS*Math.cos(this.curRotation*Math.PI/180),o=this.RADIUS*Math.sin(this.curRotation*Math.PI/180);this.waitLine.x=this.centerX+n,this.waitLine.y=this.centerY+o;var a=(this.curRotation+this.FISH_ADDROTATION)%360;n=this.RADIUS*Math.cos(a*Math.PI/180),o=this.RADIUS*Math.sin(a*Math.PI/180),this.waitFish.x=this.centerX+n,this.waitFish.y=this.centerY+o}this.timeOnEnterFrame=e},e.prototype.setRotation=function(t){this.curRotation=t},e.prototype.show=function(){this.visible=!0,this.isStart=!0},e.prototype.hide=function(){this.visible=!1,this.isStart=!1},e.prototype.Destroy=function(){this.removeEventListener(egret.Event.ENTER_FRAME,this.onEnterFrame,this)},e}(eui.Component);__reflect(WaitComponent.prototype,"WaitComponent",["eui.UIComponent","egret.DisplayObject"]);var ZJ;!function(t){var e=function(){function e(){this.bgm="bgm",this._isMute=!1,this.sounds={},this.soundsUniqueChannel={},this.soundsChannel={}}return Object.defineProperty(e,"Instance",{get:function(){return this._instance},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isMute",{get:function(){return this._isMute},set:function(t){this._isMute=t,this._isMute?this.stopAll():this.playBgm()},enumerable:!0,configurable:!0}),e.prototype.playBgm=function(t,e){void 0===t&&(t=0),void 0===e&&(e=1),this._isMute||null!=this.bgm&&""!=this.bgm&&this.play(this.bgm,t,e,!0)},e.prototype.stopBgm=function(){this.stop(this.bgm)},e.prototype.play=function(e,i,n,o){var a=this;void 0===i&&(i=1),void 0===n&&(n=1),void 0===o&&(o=!1);var r=e+"_mp3";if(!this._isMute)if(null!=this.sounds[e]){o&&this.stop(e);var s=this.sounds[e].play(0,i);o?this.soundsUniqueChannel[e]=s:this.soundsChannel[e].push(s),s.volume=n}else t.ResManager.instance.loadRes(r,function(t,r){var s=t,h=s.play(0,i);h.volume=n,a.sounds[e]=s,a.soundsChannel[e]=[],o?a.soundsUniqueChannel[e]=h:a.soundsChannel[e].push(h)},this)},e.prototype.stop=function(t){var e=this.soundsChannel[t],i=this.soundsUniqueChannel[t];if(null!=e){for(var n=0,o=e;n<o.length;n++){var a=o[n];a.stop()}e.length=0}null!=i&&(i.stop(),i=null)},e.prototype.stopAll=function(){for(var t in this.soundsChannel)this.stop(t);for(var e in this.soundsUniqueChannel)this.stop(e)},e.prototype.getSound=function(t){return this.sounds[t]},e.prototype.getChannel=function(t){return this.soundsChannel[t]},e.prototype.getUniqueChannel=function(t){return this.soundsUniqueChannel[t]},e._instance=new e,e}();t.AudioManager=e,__reflect(e.prototype,"ZJ.AudioManager")}(ZJ||(ZJ={}));var ZJ;!function(t){var e=function(t){function e(e,i,n,o){var a=t.call(this,e,i,n,o)||this;return a.data=null,a}return __extends(e,t),e}(egret.Event);t.ChannelDataEvent=e,__reflect(e.prototype,"ZJ.ChannelDataEvent")}(ZJ||(ZJ={}));var ZJ;!function(t){var e=function(){function t(){}return t.FRAME=30,t.UP=0,t.DOWN=1,t.LEFT=2,t.RIGHT=3,t}();t.CommonConfig=e,__reflect(e.prototype,"ZJ.CommonConfig");var i=function(){function t(){}return t.TABLE_LOADED="TABLE_LOADED",t.SOCKET_CONNECTED="SOCKET_CONNECTED",t.SOCKET_DATA="SOCKET_DATA",t.GESTURE_DIRECT="GESTURE_DIRECT",t.CHANNEL_DATA="CHANNEL_DATA",t}();t.CommonEventName=i,__reflect(i.prototype,"ZJ.CommonEventName")}(ZJ||(ZJ={}));var YYLoadingView=function(t){function e(){var e=t.call(this)||this;return e.intervalID=0,e.ran1=0,e.ran2=0,e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this);var e=ZJ.ShapeUtil.getRect(0,1,this.stage.stageWidth,this.stage.stageHeight);this.addChild(e);var i=new eui.Image;i.source="loading_bg_png",i.height=1920,i.width=1080,this.addChild(i),i.horizontalCenter=0;var n=500,o=new eui.Group;this.addChild(o),o.horizontalCenter=0,o.y=n,ZJ.ResManager.instance.loadMovieClip("yylangren","yylangren",function(t){o.addChild(t),t.scaleX=1.5,t.scaleY=1.5,t.x=-195,t.gotoAndPlay("tiao",-1)});var a=new eui.ProgressBar;a.skinName="YYLoadingPBSkin",this.progress=a,this.progress.width=450,this.progress.height=62,this.progress.minimum=0,this.progress.maximum=100,this.progress.horizontalCenter=0,this.progress.y=n+435,this.progress.scaleX=1.3,this.progress.scaleY=1.3,this.progress.labelFunction=function(t,e){return t+"%"},this.addChild(this.progress);var r=new eui.Image;r.source="load_img03_png",r.horizontalCenter=0,r.y=n+630,r.width=510,r.height=100,r.alpha=.2,this.addChild(r),this.load3=new eui.Label,this.load3.text="等待对手加入游戏...",this.load3.horizontalCenter=0,this.load3.y=n+660,this.load3.size=40,this.load3.textColor=16777215,this.addChild(this.load3),this.startCount()},e.prototype.startCount=function(){var t=this;this.intervalID=setInterval(function(){t.ran2=Math.min(t.ran2+8*Math.random()+2,99),t.progress.value=Math.floor((t.ran1+t.ran2)/2)},200)},e.prototype.onProgress=function(t,e){this.ran1=Math.floor(t/e*100),this.progress.value=Math.floor((this.ran1+this.ran2)/2)},e.prototype.onDestroy=function(){return t.prototype.onDestroy.call(this),clearInterval(this.intervalID),0},e}(ZJ.ViewBase);__reflect(YYLoadingView.prototype,"YYLoadingView");var ChushouLoadingView=function(t){function e(){var e=t.call(this)||this;return e.intervalID=0,e.ran1=0,e.ran2=0,e.SEND_PROGRESS=10,e.progressIndex=0,e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this);var e=ZJ.ShapeUtil.getRect(0,1,this.stage.stageWidth,this.stage.stageHeight);this.addChild(e)},e.prototype.startCount=function(){var t=this;this.intervalID=setInterval(function(){t.ran2=Math.min(t.ran2+8*Math.random()+2,99),t.progress.value=Math.floor((t.ran1+t.ran2)/2)},200)},e.prototype.onProgress=function(t,e){this.progressIndex==this.SEND_PROGRESS-1&&ChushouSDK.instance.csNotifyLoadProgress(t/e*100),this.progressIndex=++this.progressIndex%this.SEND_PROGRESS},e.prototype.onDestroy=function(){return t.prototype.onDestroy.call(this),0},e}(ZJ.ViewBase);__reflect(ChushouLoadingView.prototype,"ChushouLoadingView");var ChushouSDK=function(){function t(){this.gameRoomId="",this.role="",this.title="分享标题",this.image="/resource/assets/egret_icon.png",this.description="分享描述",this.enableMic="1",this.enableAudioOutput="1",this.csAuthRequestData=null}return Object.defineProperty(t,"instance",{get:function(){return this._instance||(this._instance=new t),this._instance},enumerable:!0,configurable:!0}),t.prototype.csAuthRequest=function(t){var e=this;console.log("csAuthRequest"),csAuthRequest('{"h5AppName" : "'+ModuleConfig.compile.chushou_h5AppName+'","launchMode" : "'+chushouGameConfig.launchMode+'","inviteMode" : "'+chushouGameConfig.inviteMode+'","gameRoomId" : "'+chushouGameConfig.gameRoomId+'"}',function(i){console.log("cb csAuthRequest"),console.log(i);var n=JSON.parse(i);e.csAuthRequestData=n,t&&t(n)})},t.prototype.csJoinRoom=function(t){console.log("csJoinRoom "+this.gameRoomId),csJoinRoom('{"accessToken" : "'+this.csAuthRequestData.accessToken+'","gameRoomId" : "'+this.gameRoomId+'","role" : "'+this.csAuthRequestData.role+'"}',function(e){console.log("cb csJoinRoom"),console.log(e.toString()),t&&t(JSON.parse(e))})},t.prototype.csQuitRoom=function(t){console.log("csQuitRoom"),csQuitRoom('{"accessToken" : "'+this.csAuthRequestData.accessToken+'","gameRoomId" : "'+this.gameRoomId+'"}',function(e){console.log("cb csQuitRoom"),t&&t(JSON.parse(e))})},t.prototype.csInviteToGame=function(t){console.log("csInviteToGame"),csInviteToGame('{"accessToken" : "'+this.csAuthRequestData.accessToken+'","gameRoomId" : "'+this.gameRoomId+'","inviteMode" : "'+chushouGameConfig.inviteMode+'","title" : "'+this.title+'","description" : "'+this.description+'","image" : "'+this.image+'"}',function(e){console.log("cb csInviteToGame"),t&&t(JSON.parse(e))})},t.prototype.csKickOutUser=function(t){console.log("csKickOutUser"),csKickOutUser('{"accessToken" : "'+this.csAuthRequestData.accessToken+'","targetUid" : "sl23859","gameRoomId" : "'+this.gameRoomId+'"}',function(e){console.log("cb csKickOutUser"),t&&t(JSON.parse(e))})},t.prototype.csShareRoom=function(t){console.log("csShareRoom"),csShareRoom('{"accessToken" : "'+this.csAuthRequestData.accessToken+'","gameRoomId" : "'+this.gameRoomId+'","title" : "'+this.title+'","description" : "'+this.description+'","image" : "'+this.image+'"}',function(e){console.log("cb csShareRoom"),t&&t(JSON.parse(e))})},t.prototype.csShareRecord=function(t){console.log("csShareRecord"),csShareRecord('{"accessToken" : "'+this.csAuthRequestData.accessToken+'","gameRecordId" : "119844","title" : "'+this.title+'","description" : "'+this.description+'","image" : "'+this.image+'"}',function(e){console.log("cb csShareRecord"),t&&t(JSON.parse(e))})},t.prototype.csGetFriendList=function(t){console.log("csGetFriendList"),csGetFriendList('{"accessToken" : "'+this.csAuthRequestData.accessToken+'","numPerPage" : "10","breakpoint" : "18823-ffgh-cc08"}',function(e){console.log("cb csGetFriendList"),t&&t(JSON.parse(e))})},t.prototype.csGetUserRelationship=function(t,e){for(var i="",n=0;n<t.length;n++)i+=t[n],n!=t.length-1&&(i+=",");console.log("csGetUserRelationship"),csGetUserRelationship('{"accessToken" : "'+this.csAuthRequestData.accessToken+'","users" : "'+i+'"}',function(t){console.log("cb csGetUserRelationship"),e&&e(JSON.parse(t))})},t.prototype.csFollowUser=function(t,e){console.log("csFollowUser"),csFollowUser('{"accessToken" : "'+this.csAuthRequestData.accessToken+'","targetUid" : "'+t+'"}',function(t){console.log("cb csFollowUser"),e&&e(JSON.parse(t))})},t.prototype.csEnableMic=function(t){console.log("csEnableMic"),csEnableMic('{"accessToken" : "'+this.csAuthRequestData.accessToken+'","enableMic" : '+this.enableMic+"}",function(e){console.log("cb csEnableMic"),t&&t(JSON.parse(e))})},t.prototype.csEnableAudioOutput=function(t){console.log("csEnableAudioOutput"),csEnableAudioOutput('{"accessToken" : "'+this.csAuthRequestData.accessToken+'","enableAudioOutput" : "'+this.enableAudioOutput+'"}',function(e){console.log("cb csEnableAudioOutput"),t&&t(JSON.parse(e))})},t.prototype.onUserVolumeUpdate=function(t){console.log("onUserVolumeUpdate"),onUserVolumeUpdate(function(e){console.log("cb onUserVolumeUpdate"),t&&t(JSON.parse(e))})},t.prototype.csExitGame=function(t){console.log("csExitGame "+this.csAuthRequestData.accessToken),this.csQuitRoom(),csExitGame('{"accessToken" : "'+this.csAuthRequestData.accessToken+'"}')},t.prototype.csNotifyLoadProgress=function(t,e){console.log("csNotifyLoadProgress"),csNotifyLoadProgress('{"total" : "100","progress" : "'+t+'"}')},t.prototype.onNetworkStatusChange=function(t){console.log("onNetworkStatusChange"),onNetworkStatusChange(function(e){console.log("cb onNetworkStatusChange"),t&&t(JSON.parse(e))})},t.prototype.csGetAPIVersionInfo=function(t){console.log("csGetAPIVersionInfo"),csGetAPIVersionInfo('{"h5AppName" : "'+ModuleConfig.compile.chushou_h5AppName+'","launchMode" : "'+chushouGameConfig.launchMode+'","inviteMode" : "'+chushouGameConfig.inviteMode+'","gameRoomId" : "'+this.gameRoomId+'"}',function(e){console.log("cb csGetAPIVersionInfo"),t&&t(JSON.parse(e))})},t.prototype.csInvokeRecharge=function(t){console.log("csInvokeRecharge"),csInvokeRecharge('{"accessToken" : "'+this.csAuthRequestData.accessToken+'","paymentScene" : "1",}',function(e){console.log("cb csInvokeRecharge"),t&&t(JSON.parse(e))})},t.prototype.onBalanceChanged=function(t){console.log("onBalanceChanged")},t.prototype.csPurchaseProps=function(t){console.log("csPurchaseProps"),csPurchaseProps('{"accessToken" : "'+this.csAuthRequestData.accessToken+'","cpOrderId" : "prop7865421","cpPropName" : "双倍积分卡","cpPropId" : "1","payAmount" : "500"}',function(e){console.log("cb csPurchaseProps"),t&&t(JSON.parse(e))})},t.prototype.csPayEntryFee=function(t){console.log("csPayEntryFee"),csPayEntryFee('{"accessToken" : "'+this.csAuthRequestData.accessToken+'","cpOrderId" : "prop7865425","cpPropName" : "游戏⼊场费","cpPropId" : "999"}',function(e){console.log("cb csPayEntryFee"),t&&t(JSON.parse(e))})},t.prototype.csCheckEntryFee=function(t){console.log("csCheckEntryFee"),csCheckEntryFee('{"accessToken" : "'+this.csAuthRequestData.accessToken+'"}',function(e){console.log("cb csCheckEntryFee"),t&&t(JSON.parse(e))})},t}();__reflect(ChushouSDK.prototype,"ChushouSDK");var xlsx;!function(t){t.cfg_c_goat="shared/c_goat.json",t.c_goat_id="A",t.c_goat_speed="B",t.c_goat_weight="C",t.c_goat_strength="D",t.c_goat_score="E"}(xlsx||(xlsx={}));