var __reflect=this&&this.__reflect||function(t,e,i){t.__class__=e,i?i.push(e):i=[e],t.__types__=t.__types__?i.concat(t.__types__):i},__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},__awaiter=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))(function(o,s){function a(t){try{h(n.next(t))}catch(e){s(e)}}function r(t){try{h(n["throw"](t))}catch(e){s(e)}}function h(t){t.done?o(t.value):new i(function(e){e(t.value)}).then(a,r)}h((n=n.apply(t,e||[])).next())})},__generator=this&&this.__generator||function(t,e){function i(t){return function(e){return n([t,e])}}function n(i){if(o)throw new TypeError("Generator is already executing.");for(;h;)try{if(o=1,s&&(a=s[2&i[0]?"return":i[0]?"throw":"next"])&&!(a=a.call(s,i[1])).done)return a;switch(s=0,a&&(i=[0,a.value]),i[0]){case 0:case 1:a=i;break;case 4:return h.label++,{value:i[1],done:!1};case 5:h.label++,s=i[1],i=[0];continue;case 7:i=h.ops.pop(),h.trys.pop();continue;default:if(a=h.trys,!(a=a.length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){h=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){h.label=i[1];break}if(6===i[0]&&h.label<a[1]){h.label=a[1],a=i;break}if(a&&h.label<a[2]){h.label=a[2],h.ops.push(i);break}a[2]&&h.ops.pop(),h.trys.pop();continue}i=e.call(t,h)}catch(n){i=[6,n],s=0}finally{o=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}var o,s,a,r,h={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return r={next:i(0),"throw":i(1),"return":i(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r},ZJ;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.skinName=t.Util.getClassName(i)+"Skin",i}return __extends(i,e),i.prototype.onDestroy=function(){return 0},i}(eui.Component);t.ComponentBase=e,__reflect(e.prototype,"ZJ.ComponentBase",["eui.UIComponent","egret.DisplayObject"])}(ZJ||(ZJ={}));var ZJ;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e.prototype.setData=function(t){},e.prototype.show=function(){},e.prototype.onProgress=function(t,e){},e.prototype.onDestroy=function(){return t.prototype.onDestroy.call(this)},e}(t.ComponentBase);t.ViewBase=e,__reflect(e.prototype,"ZJ.ViewBase",["RES.PromiseTaskReporter"])}(ZJ||(ZJ={}));var ZJ;!function(t){var e=function(){function t(t,e,i){void 0===e&&(e=0),void 0===i&&(i=null),this.viewName="",this.layer=0,this.viewClass=null,this.viewName=t,this.layer=e,this.viewClass=i}return t}();t.UIData=e,__reflect(e.prototype,"ZJ.UIData")}(ZJ||(ZJ={}));var GameView=function(t){function e(){var e=t.call(this)||this;return e.qiuS=new QiuS,e.qiuB=new QiuB,e.qiuB1=new QiuB,e.qsY=1500,e.guanshu=1,e.isOnce=!0,e.resource=ZJ.ResManager.instance.loadDragonBones("hs"),e.disMax=0,e.disMin=0,e.qbTime1=0,e.countDown=1,e.moveDistace=0,e.health=1,e.time=0,e.table=ZJ.TableManager.instance.tables[xlsx.cfg_c_ydpz],e.nextDistance=[],e.nextTime=0,e.nextTimeMin=0,e.nextTimeMax=0,e.nextDisMax=0,e.nextDisMin=0,e.nextCountDown=0,e.qiusX=0,e.qiusY=0,e.smallX=0,e.smallY=0,e.tailArray=[],e.tailImgArray=[],e.ls=ZJ.ResManager.instance.loadDragonBones("ls"),e.runTime=250,e.isRun=!1,e.blank=0,e.continuePerfect=0,e.winId=1,e.friendRank=2,e.rank=1,e.weekScore=0,e.score=0,e.isFirst=!0,e.speedQius=3,e.flag=!1,e.DISTANCE=[],e.id=1,e.count_down=0,e.heightTothis=0,e.skinName="GameViewSkin",e}return __extends(e,t),e.prototype.loadAudio=function(){var t=ZJ.ResManager.instance.loadExistRes("xiaoqiu_png"),e=new egret.Rectangle(2,82,130,43);t.scale9Grid=e},e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.runOnChange=function(){this.X=this.qiuB.x,this.Y=this.qiuB.y,this.X1=this.qiuB1.x,this.Y1=this.qiuB1.y},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),ZJ.UIManager.instance.destroyView(UIName.Loading),this.bgAll.touchEnabled=!1,this.loadTable(this.guanshu),this.loadAudio(),this.backUI(),ModuleConfig.compile.danji?(this.countToDown(),this.nextG(),this.showTopAndButtom()):this.initCDM(),console.log("children create")},e.prototype.initCDM=function(){this.countToDown(),this.showTopAndButtom(),this.callBack()},e.prototype.callBack=function(){var t=this,e=MyCDM.instance;e.CsAuthRequestCallBack=function(){console.log("CsAuthRequestCallBack")},e.OnData11003=function(e){t.nextG()},e.SendProcessData11010({processData:this.score}),e.OnData11010=function(e){t.myAny=e.pcocessData},e.SendScoredData11011({score:this.score,resultData:[]}),e.OnData11011=function(e){t.score=e.score,t.myAny=e.resultData},e.OnData11012=function(e){t.winId=e.winPlayerId,t.friendRank=e.friendRank,t.rank=e.rank,console.log("胜利玩家"+t.winId),console.log("返回通知"+e.result)},e.GetHighestScore11008(),e.OnData11008=function(e){t.weekScore=e.weekScore}},e.prototype.nextG=function(){this.addEventListener(egret.Event.ENTER_FRAME,this.runBg,this),this.addOther(),this.createQiuS(),this.createQiuB(),this.createQiuB1()},e.prototype.showTopAndButtom=function(){for(var t=this.stage.stageWidth,e=(this.stage.stageHeight,t/154),i=0;e/2+1>=i;i++)if(0==i){var n=new eui.Image("danjuchi_png"),o=new egret.Rectangle(22,116,136,7);n.scale9Grid=o,n.width=154,n.height=450,n.anchorOffsetX=n.width/2,n.x=this.topFather.width/2,n.y=123,n.scaleY=-1,this.topFather.addChild(n)}else{var n=new eui.Image("danjuchi_png"),s=new egret.Rectangle(22,116,136,7);n.width=154,n.height=450,n.scaleY=-1,n.scale9Grid=s,n.anchorOffsetX=n.width/2,n.x=this.topFather.width/2+i*n.width,n.y=123,this.topFather.addChild(n);var a=new eui.Image("danjuchi_png"),r=new egret.Rectangle(22,116,136,7);a.width=154,a.height=450,a.anchorOffsetX=a.width/2,a.scaleY=-1,a.scale9Grid=r,a.x=this.topFather.width/2+i*-a.width,a.y=123,this.topFather.addChild(a)}for(var i=0;e/2+1>=i;i++){if(0==i){var n=new eui.Image("danjuchi_png"),h=new egret.Rectangle(22,116,136,7);n.scale9Grid=h,n.width=154,n.height=450,n.anchorOffsetX=n.width/2,n.x=this.backFather.width/2,this.backFather.addChild(n)}else{var n=new eui.Image("danjuchi_png"),c=new egret.Rectangle(22,116,136,7);n.scale9Grid=c,n.width=154,n.height=450,n.anchorOffsetX=n.width/2,n.x=this.backFather.width/2+i*n.width,this.backFather.addChild(n);var a=new eui.Image("danjuchi_png"),r=new egret.Rectangle(22,116,136,7);a.scale9Grid=r,a.width=154,a.height=450,a.anchorOffsetX=a.width/2,a.x=this.backFather.width/2-a.width*i,this.backFather.addChild(a)}this.backFather.x=this.bgAll.width/2}},e.prototype.setFlag=function(t){this.flag=t},e.prototype.tailShow=function(t){if(0==t){console.log("tailArray 显示 ");for(var e=function(t,e){var n=i.tailArray[t];egret.Tween.get(n).wait(16*t).call(function(){var t=egret.Tween.get(n);t.to({y:180},70).to({y:400,alpha:.7},100)});var o=i.tailImgArray[t];egret.Tween.get(o).wait(16*t).call(function(){var t=egret.Tween.get(o);t.to({scaleX:.7,scaleY:.7},70,egret.Ease.sineIn).to({scaleX:0,scaleY:0},100,function(t){return 1-Math.pow(1-t,2)})})},i=this,n=0,o=this.tailArray.length;o>n;n++)e(n,o)}else{console.log("tailArray 隐藏 ");for(var n=0;n<this.tailArray.length;n++){var s=this.tailArray[n];s.x=this.qiuS.width/2,s.y=this.qiuS.height/2,s.scaleX=1,s.scaleY=1,s.alpha=1,this.tailImgArray[n].scaleX=1,this.tailImgArray[n].scaleY=1}}},e.prototype.setClick=function(){var t=this;if(this.flag){this.setFlag(!1),egret.Tween.removeTweens(this.qiuS),ZJ.AudioManager.Instance.play("sendAudio",1,1),this.tailShow(0);var e=egret.Tween.get(this.qiuS,{onChange:this.crash,onChangeObj:this});e.to({y:this.topFather.y+200},350,egret.Ease.quadIn).call(function(){t.crashAfter(t.qiuS.x,t.qiuS.y)},this)}},e.prototype.acceleRator=function(t){return console.log(t),t/9},e.prototype.countToDown=function(){this.bgAll.touchEnabled=!0,this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.setClick,this),console.log("countDown")},e.prototype.backUI=function(){this.score=0,this.health=1,this.scoreBitLabel.text=this.score.toString(),this.bg1.alpha=.5,this.bg2.alpha=.5},e.prototype.loadTable=function(t){t>20&&(t=20);var e=this.table[t][xlsx.c_ydpz_distance];this.DISTANCE=JSON.parse(e);ZJ.MathUtil.randomRange(this.DISTANCE[0],this.DISTANCE[1]+1);this.time=JSON.parse(this.table[t][xlsx.c_ydpz_time]),this.disMax=this.DISTANCE[1],this.disMin=this.DISTANCE[0],this.timeMin=this.time[0],this.timeMax=this.time[1],this.countDown=this.table[t][xlsx.c_ydpz_count_down];var i=this.table[t+1][xlsx.c_ydpz_distance];this.nextDistance=JSON.parse(i);ZJ.MathUtil.randomRange(this.nextDistance[0],this.nextDistance[1]+1);this.nextTime=JSON.parse(this.table[t+1][xlsx.c_ydpz_time]),this.nextDisMax=this.nextDistance[1],this.nextDisMin=this.nextDistance[0],this.nextTimeMax=this.nextTime[1],this.nextTimeMin=this.nextTime[0],this.nextCountDown=this.table[t+1][xlsx.c_ydpz_count_down]},e.prototype.change=function(){this.smallX=this.qiuS.x,this.smallY=this.qiuS.y},e.prototype.shadowArray=function(){for(var t=0;100>t;t++){var e=new eui.Image;e.source="xiaoqiu2_png",e.width=this.qiuS.width,e.height=this.qiuS.height,e.anchorOffsetX=e.width/2,e.anchorOffsetY=e.height/2,e.x=this.qiuS.width/2,e.y=this.qiuS.height/2;var i=new eui.Group;i.width=e.width,i.height=e.height,i.anchorOffsetX=e.width/2,i.anchorOffsetY=e.height/2,i.x=e.x,i.y=e.y,i.addChild(e),this.qiuS.addChild(i),this.tailArray.push(i),this.tailImgArray.push(e)}},e.prototype.createQiuS=function(){if(this.isFirst){this.qiuS.anchorOffsetX=this.qiuS.width/2,this.qiuS.anchorOffsetY=this.qiuS.height/2,this.qiuS.x=this.bgAll.width/2,this.qiuS.y=this.qsY-100,this.bgAll.addChild(this.qiuS),this.shadowArray();var t=new eui.Image("xiaoqiu_png");t.width=this.qiuS.width,t.height=this.qiuS.height,t.anchorOffsetX=t.width/2,t.anchorOffsetY=t.height/2,t.x=this.qiuS.width/2,t.y=this.qiuS.height/2,this.qiuS.addChild(t);var e=new eui.Image("daqiu_png");this.qiuS.addChild(e),e.width=this.qiuS.width,e.height=this.qiuS.height,e.x=this.qiuS.width/2,e.y=this.qiuS.height/2,e.anchorOffsetX=e.width/2,e.anchorOffsetY=e.height/2,this.qiuS.addChild(e),this.maskImg=e,this.maskImg.alpha=0,this.isFirst=!1}this.setFlag(!0),1==this.guanshu?(this.isOnce=!0,this.qiuS.y=this.qsY):(this.isOnce=!1,egret.Tween.removeTweens(this.qiuS),this.maskImg.alpha=1,egret.Tween.get(this.qiuS).to({y:this.qsY},this.runTime),egret.Tween.get(this.maskImg).to({alpha:0},this.runTime))},e.prototype.createQiuB1=function(){if(1==this.guanshu&&(this.qiuB1.y=-1e3),this.qiuB1.anchorOffsetX=this.qiuB.width/2,this.qiuB1.anchorOffsetY=this.qiuB.height/2,this.bgAll.addChild(this.qiuB1),this.qiuB1.x=this.qiuB1.width,this.qiuB1.y<0){var t=(this.qsY-this.qiuS.width/2-this.nextDisMin,this.qsY-this.qiuS.width/2-this.nextDisMax);this.qby1=t+(this.nextDisMax-this.nextDisMin)*Math.random(),this.heightTothis=this.bgAll.height-this.qsY,this.speed=Math.random()+1,this.qbTime1=(this.nextTimeMin+(this.nextTimeMax-this.nextTimeMin)*Math.random())/2,this.qiuB1.x=this.qiuB1.width,this.qbRunF(this.qiuB1,this.qbTime1,this.speed)}this.guanshu%2==0&&this.qbRun(this.qiuB1,this.qbTime1,this.speed)},e.prototype.createQiuB=function(){if(this.qiuB.anchorOffsetX=this.qiuB.width/2,this.qiuB.anchorOffsetY=this.qiuB.height/2,this.bgAll.addChild(this.qiuB),1==this.guanshu){var t=(this.qsY-this.qiuS.width/2-this.disMin,this.qsY-this.qiuS.width/2-this.disMax);this.qbY=t+(this.disMax-this.disMin)*Math.random(),this.heightTothis=this.bgAll.height-this.qsY,this.speed=Math.random()+1,this.qbTime=(this.timeMin+(this.timeMax-this.timeMin)*Math.random())/2,this.qiuB.x=this.bgAll.width-this.qiuB.width,this.qiuB.y=this.qbY,this.qbRun(this.qiuB,this.qbTime,this.speed)}else{if(this.qiuB.y<0){var t=(this.qsY-this.qiuS.width/2-this.nextDisMin,this.qsY-this.qiuS.width/2-this.nextDisMax);this.qbY=t+(this.nextDisMax-this.nextDisMin)*Math.random(),this.heightTothis=this.bgAll.height-this.qsY,this.speed=Math.random()+1,this.qbTime=(this.nextTimeMin+(this.nextTimeMax-this.nextTimeMin)*Math.random())/2}var e=Math.random();egret.Tween.removeTweens(this.qiuB),e>.5?this.qbRunF(this.qiuB,this.qbTime,this.speed):this.qbRun(this.qiuB,this.qbTime,this.speed)}},e.prototype.setPath=function(t){return egret.Ease.getPowInOut(2)},e.prototype.qbRun=function(t,e,i){egret.Tween.get(t,{onChange:this.runOnChange,onChangeObj:this}).to({x:t.width/2},e,this.setPath(i)).call(function(){egret.Tween.get(t,{onChange:this.runOnChange,onChangeObj:this}).to({x:this.bgAll.width-t.width/2},e,this.setPath(i)).call(function(){t.x=this.bgAll.width-t.width/2,this.qbRun(t,e,this.speed)},this)},this)},e.prototype.qbRunF=function(t,e,i){egret.Tween.get(t,{onChange:this.runOnChange,onChangeObj:this}).to({x:this.bgAll.width-t.width/2},e,this.setPath(i)).call(function(){egret.Tween.get(t,{onChange:this.runOnChange,onChangeObj:this}).to({x:this.qiuB.width/2},e,this.setPath(i)).call(function(){t.x=t.width/2,this.qbRunF(t,e,this.speed)},this)},this)},e.prototype.crashAfter=function(t,e){egret.Tween.removeAllTweens(),this.tailShow(1),ZJ.AudioManager.Instance.play("deathAudio",1,1),ZJ.AudioManager.Instance.stop("sendAudio"),this.guanshu=1,this.loadTable(this.guanshu),this.health--,this.ls.x=t,this.ls.y=e,this.ls.animation.play("",1),this.bgAll.addChild(this.ls),MyCDM.instance.SendScoredData11011({score:this.score,resultData:[]}),0==this.health&&(this.qiuB.alpha=0,this.qiuS.alpha=0,this.scoreBitLabel.alpha=0,MyCDM.instance.SendGameResult11012({winPlayerId:this.winId}),ZJ.UIManager.instance.openView(UIName.Settle).setData({score:this.score,weekScore:this.weekScore,rank:this.rank,friendRank:this.friendRank})),this.nextG()},e.prototype.crash=function(){var t=this.qiuB.width/2+this.qiuS.width/2,e=this.qiuB1.width/2+this.qiuS.width/2,i=Math.sqrt(Math.pow(this.qiuS.y-this.Y,2)+Math.pow(this.qiuS.x-this.X,2)),n=Math.sqrt(Math.pow(this.qiuS.y-this.Y1,2)+Math.pow(this.qiuS.x-this.X1,2));if(t>=i||e>=n){for(var o=0;o<this.tailArray.length;o++){var s=this.tailArray[o];egret.Tween.removeTweens(s),egret.Tween.removeTweens(this.tailImgArray[o])}this.tailShow(1);var a=Math.abs(this.qiuB.x-this.qiuS.x),r=Math.abs(this.qiuB1.x-this.qiuS.x);if(this.isOnce)a<=.025*this.qiuS.width||r<=.025*this.qiuS.width?(this.score+=5,console.log("加5分"),ZJ.AudioManager.Instance.play("comboAudio",1,1),ZJ.AudioManager.Instance.stop("sendAudio"),this.startGroup.alpha=1,egret.setTimeout(function(){this.startGroup.alpha=0},this,800),this.continuePerfect++):this.continuePerfect=0;else if(a<=.025*this.qiuS.width||r<=.025*this.qiuS.width){if(this.score+=3,console.log("加3分"),this.hitGroup.alpha=1,egret.setTimeout(function(){this.hitGroup.alpha=0},this,800),this.continuePerfect++,ZJ.AudioManager.Instance.play("comboAudio",1,1),ZJ.AudioManager.Instance.stop("sendAudio"),this.continuePerfect>=2){var h=this.continuePerfect-1,c=1*h;this.score+=c,this.comboNum.text=c.toString(),this.comboGroups.alpha=1,this.hitGroup.alpha=0,this.startGroup.alpha=0,egret.setTimeout(function(){this.comboGroups.alpha=0},this,800)}}else this.continuePerfect=0;ZJ.AudioManager.Instance.play("collisionAudio",1,.75),ZJ.AudioManager.Instance.stop("sendAudio"),this.score+=1,this.guanshu++,this.scoreBitLabel.text=this.score.toString(),this.loadTable(this.guanshu),this.jugdeBallQB(),egret.Tween.removeTweens(this.qiuS),MyCDM.instance.SendProcessData11010({processData:this.score}),this.createQiuS()}},e.prototype.jugdeBallQB=function(){var t=this;this.resource.animation.play("",1),this.isRun=!0,egret.setTimeout(function(){t.isRun=!1},this,this.runTime),this.qiuB.y>0?(this.resource.x=this.X,this.resource.y=this.Y,this.bgAll.addChild(this.resource),this.qiuB.y=-1e3,egret.Tween.removeTweens(this.qiuB),this.createQiuB(),egret.Tween.get(this.qiuB1).to({y:this.qby1},this.runTime,egret.Ease.quartOut).call(function(){t.qiuB1.y=t.qby1,egret.Tween.get(t.qiuB1).to({y:t.qby1+t.heightTothis},t.countDown),egret.Tween.get(t.qiuS,{onChange:t.change,onChangeObj:t}).to({y:t.backFather.y-t.qiuS.width/2},t.countDown).call(function(){t.crashAfter(t.qiuS.x,t.backFather.y-t.qiuS.width/2)},t)})):this.qiuB.y<=0&&(this.resource.x=this.X1,this.resource.y=this.Y1,this.bgAll.addChild(this.resource),this.qiuB1.y=-1e3,egret.Tween.removeTweens(this.qiuB1),this.createQiuB1(),egret.Tween.get(this.qiuB).to({y:this.qbY},this.runTime,egret.Ease.quartOut).call(function(){t.qiuB.y=t.qbY,egret.Tween.get(t.qiuB).to({y:t.qbY+t.heightTothis},t.countDown),egret.Tween.get(t.qiuS,{onChange:t.change,onChangeObj:t}).to({y:t.backFather.y-t.qiuS.width/2},t.countDown).call(function(){t.crashAfter(t.qiuS.x,t.backFather.y-t.qiuS.width/2)},t)}))},e.prototype.runBg=function(){this.isRun?(this.bg1.y+=50,this.bg2.y+=50):(this.bg1.y+=1,this.bg2.y+=1),this.bg1.y>=this.stage.stageHeight?this.bg1.y=this.bg2.y-2340:this.bg2.y>=this.stage.stageHeight&&(this.bg2.y=this.bg1.y-2340)},e.prototype.addOther=function(){this.bgAll.addChild(this.scoreBitLabel),this.scoreBitLabel.text=this.score.toString()},e.passID=1,e}(ZJ.ViewBase);__reflect(GameView.prototype,"GameView");var LoadingView=function(t){function e(){var e=t.call(this)||this;return e.intervalID=0,e.ran1=0,e.ran2=0,e.skinName="resource/eui_skins/view/LoadingView.exml",e}return __extends(e,t),e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this);var e=ZJ.ShapeUtil.getRect(0,1,this.stage.stageWidth,this.stage.stageHeight);this.black.addChild(e)},e.prototype.onProgress=function(t,e){this.load1.text=Math.floor(t/e*100)+"%"},e.prototype.onDestroy=function(){return t.prototype.onDestroy.call(this),clearInterval(this.intervalID),0},e}(ZJ.ViewBase);__reflect(LoadingView.prototype,"LoadingView");var SettleView=function(t){function e(){var e=t.call(this)||this;return e.SHOW_TIME=3e3,e.model=MyCDM.instance,e.skinName="SettleViewSkin",e}return __extends(e,t),e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.initUI=function(){this.weekScoreImg.alpha=0,this.weekScore.alpha=0,this.scoreImg.alpha=0,this.scoreBit.alpha=0,this.smallWeekScore.alpha=0,this.smallWeekScoreImg.alpha=0},e.prototype.childrenCreated=function(){var e=this;t.prototype.childrenCreated.call(this),this.initUI(),this.dikuan.alpha=.5;var i=ZJ.ShapeUtil.getRect(0,.4,this.stage.stageWidth,this.stage.stageHeight);this.gBg.addChild(i),this.game=ZJ.UIManager.instance.openView(UIName.Game),this.restart.addEventListener("touchTap",function(){e.game.qiuB.alpha=1,e.game.qiuS.alpha=1,e.game.scoreBitLabel.alpha=1,ZJ.UIManager.instance.destroyView(UIName.Settle),e.game.backUI(),ModuleConfig.compile.danji?e.game.backUI():(e.game.backUI(),MyCDM.instance.PlayAgain11007(),MyCDM.instance.OnData11007=function(t){0==t.result?console.log("成功"):1==t.result?console.log("失败"):3==t.result&&console.log("已经开始")},e.phb.addEventListener("touchTap",function(){ChushouSDK.instance.csExitGame()},e))},this)},e.prototype.setData=function(t){this.score=t.score,this.weekscore=t.weekScore,this.friend=t.friendRank,this.rank=t.rank,t.score>t.weekScore?(this.weekScore.text=t.score.toString(),this.weekScore.alpha=1,this.weekScoreImg.alpha=1):(this.scoreBit.text=this.score.toString(),this.scoreImg.alpha=1,this.scoreBit.alpha=1,this.smallWeekScore.text=this.score.toString(),this.smallWeekScoreImg.alpha=1,this.smallWeekScore.alpha=1)},e.prototype.onDestroy=function(){return t.prototype.onDestroy.call(this),0},e}(ZJ.ViewBase);__reflect(SettleView.prototype,"SettleView");var ChushouDataModel=function(){function t(){this.INTERVAL_PING=5e3,this.gameStyle=0,this.sbIsFriend=!1,this.intervalPing=0,ZJ.SocketManager.instance.addEventListener(ZJ.CommonEventName.SOCKET_CONNECTED,this.onConnect,this),ZJ.SocketManager.instance.addEventListener(ZJ.CommonEventName.SOCKET_DATA,this.onData,this),"20"==chushouGameConfig.launchMode?(this.gameStyle=1,ZJ.SocketManager.instance.connectByUrl(ModuleConfig.ws+"://"+ModuleConfig.ip+":"+ModuleConfig.singlePort)):"30"==chushouGameConfig.launchMode&&(this.gameStyle=2,ZJ.SocketManager.instance.connectByUrl(ModuleConfig.ws+"://"+ModuleConfig.ip+":"+ModuleConfig.doublePort))}return t.prototype.onConnect=function(){var t=this;ChushouSDK.instance.csAuthRequest(function(e){t.Login10000(),t.ping11004(),t.CsAuthRequestCallBack()})},t.prototype.onData=function(t){var e=this,i=t.data.data;switch(console.log(t.data.protoID),console.log(JSON.stringify(i)),t.data.protoID){case 1e4:0==i.result?(5!=this.gameStyle&&6!=this.gameStyle?this.match10001():5==this.gameStyle&&(this.myData={playerId:i.playerId,openId:i.openId,nickname:i.nickname,avatarUrl:i.avatarUrl,gender:"male",isRobot:0,battleTimes:1}),this.myReconnectTicket=i.ticket,this.doAction(this.OnData10000,i)):ChushouSDK.instance.csExitGame();break;case 10001:0==i.result?(this.doAction(this.OnData10001,i),2==this.gameStyle?(ChushouSDK.instance.gameRoomId=i.roomId,ChushouSDK.instance.csJoinRoom(function(t){0==t.code?e.gamePreStart11002():ChushouSDK.instance.csExitGame()})):1==this.gameStyle&&this.gamePreStart11002()):2==i.result?ChushouSDK.instance.csExitGame():ChushouSDK.instance.csExitGame();break;case 10010:0==i.result?ChushouSDK.instance.csPayEntryFee(i.cpOrderId,i.cpPropId,i.cpPropName,function(t){"0"==t.code?console.log("成功扣除入场费"):("100"==t.code&&console.log("触手豆余额不足"),console.log(t.code+","+t.errMsg))}):console.log("商品不存在"),this.doAction(this.OnData10010,i);break;case 11002:0==i.result?this.doAction(this.OnData11002,i):ChushouSDK.instance.csExitGame();break;case 11003:2==this.gameStyle?(ZJ.SocketManager.instance.send(10010,{cpPropId:"11"}),i.playerInfos[0].openId==ChushouSDK.instance.csAuthRequestData.openUid?(this.myData=i.playerInfos[0],this.sbData=i.playerInfos[1]):(this.myData=i.playerInfos[1],this.sbData=i.playerInfos[0]),ChushouSDK.instance.csGetUserRelationship([this.sbData.openId],function(t){e.sbIsFriend=!1,0==t.code&&0!=t.users[0].relationship&&(e.sbIsFriend=!0)})):1==this.gameStyle&&(this.myData=i.playerInfos[0]),this.doAction(this.OnData11003,i);break;case 11005:this.doAction(this.OnData11005,i);break;case 11006:this.doAction(this.OnData11006,i);break;case 11007:this.doAction(this.OnData11007,i);break;case 11008:this.doAction(this.OnData11008,i);break;case 11009:this.doAction(this.OnData11009,i);break;case 11010:this.doAction(this.OnData11010,i);break;case 11011:this.doAction(this.OnData11011,i);break;case 11012:this.doAction(this.OnData11012,i);default:this.extendOnData(t.data.protoID,i)}},t.prototype.extendOnData=function(t,e){},t.prototype.doAction=function(t,e){t&&t(e)},t.prototype.Login10000=function(){egret.log("do Login"),ZJ.SocketManager.instance.send(1e4,{openId:ChushouSDK.instance.csAuthRequestData.openUid,sign:"sign",timestamp:ZJ.Util.timeStamp(),appId:ModuleConfig.compile.channel_id,params:[ChushouSDK.instance.csAuthRequestData.nickname,ChushouSDK.instance.csAuthRequestData.gender,ChushouSDK.instance.csAuthRequestData.avatar]})},t.prototype.match10001=function(){egret.log("do Match"),1==this.gameStyle?ZJ.SocketManager.instance.send(10001,{gameMode:this.gameStyle,matchType:1}):2==this.gameStyle&&ZJ.SocketManager.instance.send(10001,{gameMode:this.gameStyle,matchType:2,matchId:ChushouSDK.instance.csAuthRequestData.csGroupId.toString()})},t.prototype.gamePreStart11002=function(){egret.log("do Ready"),ZJ.SocketManager.instance.send(11002)},t.prototype.ping11004=function(){egret.log("do Ping"),this.intervalPing=setInterval(function(){ZJ.SocketManager.instance.send(11004)},this.INTERVAL_PING)},t.prototype.GetGameState11005=function(){0!=this.gameStyle&&(egret.log("get game state"),ZJ.SocketManager.instance.send(11005))},t.prototype.GetPlayerData11006=function(){0!=this.gameStyle&&(egret.log("get player data"),ZJ.SocketManager.instance.send(11006))},t.prototype.PlayAgain11007=function(){0!=this.gameStyle&&(egret.log("play again"),ZJ.SocketManager.instance.send(11007))},t.prototype.GetHighestScore11008=function(){0!=this.gameStyle&&(egret.log("get highest score"),ZJ.SocketManager.instance.send(11008))},t.prototype.SendProcessData11010=function(t){0!=this.gameStyle&&ZJ.SocketManager.instance.send(11010,{processData:ZJ.Util.objToByteArray(t.processData).bytes})},t.prototype.SendScoredData11011=function(t){0!=this.gameStyle&&(egret.log("do Upload Score : "+t.score),ZJ.SocketManager.instance.send(11011,{score:t.score,resultData:ZJ.Util.objToByteArray(t.resultData).bytes}))},t.prototype.SendGameResult11012=function(t){0!=this.gameStyle&&(egret.log("win id : "+t.winPlayerId),ZJ.SocketManager.instance.send(11012,{winPlayerId:t.winPlayerId}))},t.prototype.SendFriendList=function(t){0!=this.gameStyle&&(egret.log("send friendList : "+t.openId),ZJ.SocketManager.instance.send(11014,{openId:t.openId}))},t}();__reflect(ChushouDataModel.prototype,"ChushouDataModel");var Arrow=function(t){function e(){var e=t.call(this)||this;return e.skinName="ArrowSkin",e}return __extends(e,t),e.prototype.childrenCreated=function(){},e}(eui.Component);__reflect(Arrow.prototype,"Arrow",["eui.UIComponent","egret.DisplayObject"]);var ZJ;!function(t){var e=function(){function t(){this.goDt={},this.goDesign={}}return Object.defineProperty(t,"instance",{get:function(){return null==this._instance&&(this._instance=new t),this._instance},enumerable:!0,configurable:!0}),t.prototype.init=function(t){this.stage=t},t.prototype.setDesign=function(t,e){this.goDesign[t]=e},t.prototype.push=function(t,e){null==this.goDt[t]&&(this.goDt[t]=new Array),this.goDt[t].push(e)},t.prototype.get=function(t){var e=this.goDt[t];return null!=e&&e.length>0?e.shift():null!=this.goDesign[t]?this.goDesign[t]():null},t.prototype.destroy=function(){for(var t in this.goDt){var e=this.goDt[t];null!=e&&(e.length=0)}},t.prototype.destroyByName=function(t){var e=this.goDt[t];if(null!=e){for(var i=0;i<e.length;i++);e.length=0}},t}();t.GoPool=e,__reflect(e.prototype,"ZJ.GoPool")}(ZJ||(ZJ={}));var ZJ;!function(t){var e=function(){function e(){}return e.randomRange=function(e,i,n){null==n&&(n=t.Util.timeStamp());var o=this.randomSeed(n);return o/=233280,Math.floor(e+o*(i-e))},e.randomSeed=function(t){return t=(9301*t+49297)%233280},e.YiYuanErCi=function(t,e,i){var n,o,s,a=[];return n=e*e-4*t*i,0>n||(o=(-1*e+Math.sqrt(n))/(2*t),s=(-1*e-Math.sqrt(n))/(2*t),a.push(o),a.push(s)),a},e}();t.MathUtil=e,__reflect(e.prototype,"ZJ.MathUtil")}(ZJ||(ZJ={}));var ZJ;!function(t){var e=function(){function e(){this.aa=null,this.stage=null,this.dbFactory=dragonBones.EgretFactory.factory,this.dbFileNames=[]}return Object.defineProperty(e,"instance",{get:function(){return this._instance},enumerable:!0,configurable:!0}),e.prototype.init=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return this.stage=t,this.aa=new AssetAdapter,[4,this.loadConfig("resource/default.res.json","resource/")];case 1:return e.sent(),[4,this.loadTheme()];case 2:return e.sent(),[2]}})})},e.prototype.loadRes=function(t,e,i,n){this.aa.getAsset(t,e,i,n)},e.prototype.loadExistRes=function(t){return RES.getRes(t)},e.prototype.loadConfig=function(t,e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(i){switch(i.label){case 0:return[4,RES.loadConfig(t,e)];case 1:return i.sent(),[2]}})})},e.prototype.loadGroup=function(t,e,i){return void 0===e&&(e=0),void 0===i&&(i=null),__awaiter(this,void 0,void 0,function(){var n;return __generator(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,RES.loadGroup(t,e,i)];case 1:return o.sent(),[3,3];case 2:return n=o.sent(),console.error(n),[3,3];case 3:return[2]}})})},e.prototype.loadTheme=function(){var t=this;return new Promise(function(e,i){var n=new eui.Theme("resource/default.thm.json",t.stage);n.addEventListener(eui.UIEvent.COMPLETE,function(){e()},t)})},e.prototype.loadMovieClip=function(e,i,n){t.ResManager.instance.loadRes(e+"_json",function(o,s){var a=o;t.ResManager.instance.loadRes(e+"_png",function(t,e){var o=t,s=new egret.MovieClipDataFactory(a,o),r=new egret.MovieClip(s.generateMovieClipData(i));n(r,s)},this)},this)},e.prototype.loadDragonBones=function(t,e){if(void 0===e&&(e=""),""==e&&(e=t),-1==this.dbFileNames.indexOf(t)){var i=this.loadExistRes(t+"_ske_json"),n=this.loadExistRes(t+"_tex_json"),o=this.loadExistRes(t+"_tex_png");this.dbFactory.parseDragonBonesData(i),this.dbFactory.parseTextureAtlasData(n,o),this.dbFileNames.push(t)}var s=this.dbFactory.buildArmatureDisplay(e);return s},e.prototype.replaceDBSlotDisplay=function(t,e,i,n,o){void 0===e&&(e=""),""==e&&(e=t),this.dbFactory.replaceSlotDisplay(t,e,i,n,o)},e._instance=new e,e}();t.ResManager=e,__reflect(e.prototype,"ZJ.ResManager")}(ZJ||(ZJ={}));var ZJ;!function(t){var e=function(){function t(){}return t.getRect=function(t,e,i,n,o,s){void 0===o&&(o=0),void 0===s&&(s=0);var a=new egret.Shape;return a.graphics.beginFill(t,e),a.graphics.drawRect(o,s,i,n),a.graphics.endFill(),a},t.getCircle=function(t,e,i,n,o){void 0===n&&(n=0),void 0===o&&(o=0);var s=new egret.Shape;return s.graphics.beginFill(t,e),s.graphics.drawCircle(n,o,i),s.graphics.endFill(),s},t.getLine=function(t,e,i,n,o,s,a){var r=new egret.Shape;return r.graphics.lineStyle(i,t,e),r.graphics.moveTo(n,o),r.graphics.lineTo(s,a),r.graphics.endFill(),r},t.getArc=function(t,e,i,n,o,s,a,r,h){void 0===a&&(a=!1),void 0===r&&(r=0),void 0===h&&(h=0);var c=new egret.Shape;return c.graphics.lineStyle(i,t,e),c.graphics.drawArc(r,h,n,Math.PI/180*o,Math.PI/180*s,a),c.graphics.endFill(),c},t.getArch=function(t,e,i,n,o,s,a,r){void 0===s&&(s=!1),void 0===a&&(a=0),void 0===r&&(r=0);var h=new egret.Shape;return h.graphics.beginFill(t,e),h.graphics.drawArc(a,r,i,Math.PI/180*n,Math.PI/180*o,s),h.graphics.endFill(),h},t.setArcMask=function(t,e,i,n,o,s,a){void 0===o&&(o=!1),void 0===s&&(s=t.x),void 0===a&&(a=t.y);var r;null!=t.mask?r=t.mask:(r=new egret.Shape,t.parent.addChild(r));var h=Math.round(i+360*n)*Math.PI/180;i*=Math.PI/180,r.graphics.clear(),r.graphics.beginFill(16711680,1),r.graphics.lineTo(e,0),r.graphics.drawArc(s,a,e,i,h,o),r.graphics.lineTo(s,a),r.graphics.endFill(),r.x=t.x,r.y=t.y,t.mask=r},t}();t.ShapeUtil=e,__reflect(e.prototype,"ZJ.ShapeUtil")}(ZJ||(ZJ={}));var ZJ;!function(t){var e=function(t){function e(e,i,n,o){var s=t.call(this,e,i,n,o)||this;return s.data=null,s}return __extends(e,t),e}(egret.Event);t.SocketDataEvent=e,__reflect(e.prototype,"ZJ.SocketDataEvent")}(ZJ||(ZJ={}));var ZJ;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.socket=null,t.ProtoBufRoot=new protobuf.Root,t.send=null,t.onSocketData=null,t.getProtoByID=null,t._company=1,t.clientIndex=0,t}return __extends(i,e),Object.defineProperty(i,"instance",{get:function(){return this._instance},enumerable:!0,configurable:!0}),i.prototype.init=function(){return this.parseProto(),this.socket=new egret.WebSocket,this.socket.type=egret.WebSocket.TYPE_BINARY,this.setCompany(1),this.socket.addEventListener(egret.ProgressEvent.SOCKET_DATA,this.onSocketData,this),this.socket.addEventListener(egret.Event.CONNECT,this.onSocketConnect,this),0},i.prototype.parseProto=function(){for(var t=this.ProtoBufRoot,e=ModuleConfig.protoFiles,i=0,n=e.length;n>i;++i){var o=RES.getRes(e[i]);protobuf.parse(o,t)}},i.prototype.setCompany=function(t){switch(this._company=t,t){case 2:this.send=this.sendYouai,this.onSocketData=this.onSocketDataYouai,this.getProtoByID=this.getProtoByIDYouai;break;case 3:this.send=this.sendAli,this.getProtoByID=this.getProtoByIDHuoshu;break;default:this.send=this.sendHuoshu,this.onSocketData=this.onSocketDataHuoshu,this.getProtoByID=this.getProtoByIDHuoshu}},i.prototype.connect=function(t,e){this.socket.connect(t,e)},i.prototype.connectByUrl=function(t){this.socket.connectByUrl(t)},i.prototype.close=function(){this.socket.close()},i.prototype.onSocketConnect=function(e){var i=new egret.Event(t.CommonEventName.SOCKET_CONNECTED);this.dispatchEvent(i)},i.prototype.buildSmallShitByID=function(t,e){var i=this.getProtoByID(t,!0),n=this.buildSmallShit(i,e);return n},i.prototype.decodeShitByID=function(t,e){var i=this.getProtoByID(t,!1),n=this.decodeShit(i,e);
return n},i.prototype.buildSmallShit=function(t,e){var i=t.create(e),n=t.encode(i),o=n.finish();return o},i.prototype.decodeShit=function(t,e){var i=t.decode(e);return i},i.prototype.sendHuoshu=function(t,e){void 0===e&&(e={}),console.log("send: "+t),console.log(JSON.stringify(e));var i=this.buildSmallShitByID(t,e),n=new egret.ByteArray;n.writeInt(i.byteLength),n.writeShort(t),n._writeUint8Array(i),this.socket.writeBytes(n)},i.prototype.onSocketDataHuoshu=function(e){var i=new egret.ByteArray;this.socket.readBytes(i);var n=(i.readInt(),i.readShort()),o=this.decodeShitByID(n,i.bytes.subarray(6));console.log("receive: "+n),console.log(JSON.stringify(o));var s=new t.SocketDataEvent(t.CommonEventName.SOCKET_DATA);s.data={data:o,protoID:n},this.dispatchEvent(s)},i.prototype.getProtoByIDHuoshu=function(e,i){var n=(Math.floor(e/1e3),""),o="";o=i?"cs_":"sc_",n=o+e;var s=t.SocketManager.instance.ProtoBufRoot,a=s.lookupType(n);return a},i.prototype.sendYouai=function(t,e){void 0===e&&(e={});var i=this.buildSmallShitByID(t,e),n=this.buildSmallShitByID(99999,{messageId:t,clientIndex:this.clientIndex++,data:i}),o=new egret.ByteArray(n);this.socket.writeBytes(o)},i.prototype.onSocketDataYouai=function(e){var i=new egret.ByteArray;this.socket.readBytes(i);var n=this.decodeShitByID(99999,i.bytes),o="",s={},a=n.result,r=n.messageId;n.result?s=this.decodeShitByID(n.messageId,n.data):o=t.Util.Utf8ArrayToStr(n.data);var h=new t.SocketDataEvent(t.CommonEventName.SOCKET_DATA);h.data={data99999:n,error:o,result:a,data:s,protoID:r},this.dispatchEvent(h)},i.prototype.getProtoByIDYouai=function(e,i){var n="";if(i)switch(e){case 99999:n="ClientCmdData";break;case 1e3:n="CmdLoginGameReqMsg";break;case 1001:n="CmdPingReqMsg";break;case 1300:n="CmdJumperUploadAnswerReqMsg";break;case 1303:n="CmdJumperGameOverReqMsg"}else switch(e){case 99999:n="ServerCmdData";break;case 1e3:n="CmdLoginGameRspMsg";break;case 1001:n="CmdPingRspMsg";break;case 1300:n="CmdJumperUploadAnswerRspMsg";break;case 1303:n="CmdJumperGameOverRspMsg";break;case 1399:n="CmdBroadcastJumperBC"}var o=t.SocketManager.instance.ProtoBufRoot,s=o.lookupType(n);return s},i.prototype.sendAli=function(t,e){void 0===e&&(e={});var i=this.buildSmallShitByID(t,e),n=new egret.ByteArray;n.writeInt(i.byteLength),n.writeShort(t),n._writeUint8Array(i),ALISDK.CatcherSDK.instance().sendData(n.buffer)},i.prototype.onSocketDataAli=function(e){var i=new egret.ByteArray(e),n=(i.readInt(),i.readShort()),o=this.decodeShitByID(n,i.bytes.subarray(6));console.log("receive: "+n),console.log(o);var s=new t.SocketDataEvent(t.CommonEventName.SOCKET_DATA);s.data={data:o,protoID:n},this.dispatchEvent(s)},i.prototype.connectByUrlAli=function(e){var i=this;ALISDK.CatcherSDK.init({url:"ws://"+e.ip+":"+e.port+"/ws/game",gameVersion:"0.0.1",gameId:"123123",messageType:"ARRAYBUFFER"}),ALISDK.CatcherSDK.instance().on("CONNECT",function(e){var n=new t.ChannelDataEvent(t.CommonEventName.CHANNEL_DATA);n.data={eventName:"CONNECT",event:e},i.dispatchEvent(n)}).on("PROGRESS",function(e){var n=new t.ChannelDataEvent(t.CommonEventName.CHANNEL_DATA);n.data={eventName:"PROGRESS",event:e},i.dispatchEvent(n)}).on("READY",function(e){var n=new t.ChannelDataEvent(t.CommonEventName.CHANNEL_DATA);n.data={eventName:"READY",event:e},i.dispatchEvent(n)}).on("KICK",function(e){var n=new t.ChannelDataEvent(t.CommonEventName.CHANNEL_DATA);n.data={eventName:"KICK",event:e},i.dispatchEvent(n)}).on("GAMEOVER",function(e){var n=new t.ChannelDataEvent(t.CommonEventName.CHANNEL_DATA);n.data={eventName:"GAMEOVER",event:e},i.dispatchEvent(n)}).on("BREAK",function(e){var n=new t.ChannelDataEvent(t.CommonEventName.CHANNEL_DATA);n.data={eventName:"BREAK",event:e},i.dispatchEvent(n)}).on("CONTINUE",function(e){var n=new t.ChannelDataEvent(t.CommonEventName.CHANNEL_DATA);n.data={eventName:"CONTINUE",event:e},i.dispatchEvent(n)}).on("ERROR",function(e){var n=new t.ChannelDataEvent(t.CommonEventName.CHANNEL_DATA);n.data={eventName:"ERROR",event:e},i.dispatchEvent(n)}).on("MIC_CHANGE",function(e){var n=new t.ChannelDataEvent(t.CommonEventName.CHANNEL_DATA);n.data={eventName:"MIC_CHANGE",event:e},i.dispatchEvent(n)}).on("AUDIO_CHANGE",function(e){var n=new t.ChannelDataEvent(t.CommonEventName.CHANNEL_DATA);n.data={eventName:"AUDIO_CHANGE",event:e},i.dispatchEvent(n)}).on("MESSAGE",function(t){i.onSocketDataAli(t.data)}).start()},i._instance=new i,i}(egret.EventDispatcher);t.SocketManager=e,__reflect(e.prototype,"ZJ.SocketManager")}(ZJ||(ZJ={}));var ZJ;!function(t){var e=function(){function e(){this._tables={}}return Object.defineProperty(e,"instance",{get:function(){return this._instance},enumerable:!0,configurable:!0}),e.prototype.init=function(){return this.load("bg_djw_png"),0},Object.defineProperty(e.prototype,"tables",{get:function(){return this._tables},enumerable:!0,configurable:!0}),e.prototype.load=function(e){t.ResManager.instance.loadRes(e,function(e){for(var i=new JSZip(e),n=i.file(/^[tc].*/),o=0,s=n.length;s>o;o++){var a=n[o],r=t.Util.strFormat("shared/{0}",a.name);this._tables[r]=JSON.parse(a.asText())}t.EventManager.instance.dispatchEvent(new egret.Event(t.CommonEventName.TABLE_LOADED))},this)},e._instance=new e,e}();t.TableManager=e,__reflect(e.prototype,"ZJ.TableManager")}(ZJ||(ZJ={}));var ThemeAdapter=function(){function t(){}return t.prototype.getTheme=function(t,e,i,n){function o(t){e.call(n,t)}function s(e){e.resItem.url==t&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,s,null),i.call(n))}"undefined"!=typeof generateEUI?egret.callLater(function(){e.call(n,generateEUI)},this):(RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,s,null),RES.getResByUrl(t,o,this,RES.ResourceItem.TYPE_TEXT))},t}();__reflect(ThemeAdapter.prototype,"ThemeAdapter",["eui.IThemeAdapter"]);var AssetAdapter=function(){function t(){}return t.prototype.getAsset=function(t,e,i,n){function o(n){e.call(i,n,t)}if(void 0===n&&(n=RES.ResourceItem.TYPE_IMAGE),RES.hasRes(t)){var s=RES.getRes(t);s?o(s):RES.getResAsync(t,o,this)}else RES.getResByUrl(t,o,this,n)},t}();__reflect(AssetAdapter.prototype,"AssetAdapter",["eui.IAssetAdapter"]);var ZJ;!function(t){var e=function(){function t(){this._uiLayers=[],this.uiDatas={},this.uiroot=null,this.views={}}return Object.defineProperty(t,"instance",{get:function(){return this._instance},enumerable:!0,configurable:!0}),t.prototype.init=function(t){return this.uiroot=t,0},Object.defineProperty(t.prototype,"uiLayers",{set:function(t){if(this._uiLayers.length>0)egret.warn("uiLayers已经设定。");else{this._uiLayers=t;for(var e=0,i=this._uiLayers.length;i>e;++e){var n=new eui.Group;n.name="layer"+e,n.touchEnabled=!1,this.uiroot.addChild(n),n.percentWidth=100,n.percentHeight=100}}},enumerable:!0,configurable:!0}),t.prototype.getUIData=function(t){return this.uiDatas[t]},t.prototype.getView=function(t){return this.views[t]},t.prototype.openView=function(t){var e=this.getUIData(t);if(void 0==e)return egret.log("ModuleConfig没有界面配置: "+t),null;var i=this.getView(t);if(void 0!=i);else{if(i=new e.viewClass,void 0==i)return console.warn("viewClass不存在 请检查ModuleConfig.uiDatas"),null;i.percentWidth=100,i.percentHeight=100,this.views[t]=i;var n=0;e.layer<this.uiroot.numChildren&&(n=e.layer),this.uiroot.getChildAt(n).addChild(i)}return i.visible=!0,i.parent.setChildIndex(i,9999),i.show(),i},t.prototype.destroyView=function(t){var e=this.getView(t);return void 0!=e&&null!=e&&(e.onDestroy(),e.parent.removeChild(e),this.views[t]=null),0},t._instance=new t,t}();t.UIManager=e,__reflect(e.prototype,"ZJ.UIManager")}(ZJ||(ZJ={}));var ZJ;!function(t){var e=function(){function t(){}return t.getChar=function(t,e){var i=new egret.ByteArray;return i.writeUTFBytes(t),i.length<e?t:(i.position=0,i.readUTFBytes(e)+"...")},t.strFormat=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];return t.replace(/\{(\d+)\}/g,function(t,i){return e[i]})},t.timeStamp=function(t){return t=t||(new Date).toString(),Date.parse(t)/1e3},t.Utf8ArrayToStr=function(t){var e,i,n,o,s,a;for(e="",n=t.length,i=0;n>i;)switch(o=t[i++],o>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:e+=String.fromCharCode(o);break;case 12:case 13:s=t[i++],e+=String.fromCharCode((31&o)<<6|63&s);break;case 14:s=t[i++],a=t[i++],e+=String.fromCharCode((15&o)<<12|(63&s)<<6|(63&a)<<0)}return e},t.getClassName=function(t){if(t&&t.constructor&&t.constructor.toString()){if(t.constructor.name)return t.constructor.name;var e=t.constructor.toString();if("["==e.charAt(0))var i=e.match(/\[\w+\s*(\w+)\]/);else var i=e.match(/function\s*(\w+)/);if(i&&2==i.length)return i[1]}},t.objToByteArray=function(t){var e=JSON.stringify(t),i=new egret.ByteArray;return i.writeUTF(e),i},t.bytesToObj=function(t){var e=new egret.ByteArray(t),i=JSON.parse(e.readUTF());return i},t.rmArrayObj=function(t,e){return-1!=t.indexOf(e)?t.splice(t.indexOf(e),1):void 0},t}();t.Util=e,__reflect(e.prototype,"ZJ.Util")}(ZJ||(ZJ={}));var ZJ;!function(t){var e=function(){function t(t,e,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),this.x=0,this.y=0,this.z=0,this.x=t,this.y=e,this.z=i}return t}();t.Vector3=e,__reflect(e.prototype,"ZJ.Vector3")}(ZJ||(ZJ={}));var ZJ;!function(t){var e=function(){function e(){this.bgm="bgm",this._isMute=!1,this.sounds={},this.soundsChannel={}}return Object.defineProperty(e,"Instance",{get:function(){return this._instance},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isMute",{get:function(){return this._isMute},set:function(t){this._isMute=t,this._isMute?this.stopAll():(this.stopBgm(),this.playBgm())},enumerable:!0,configurable:!0}),e.prototype.playBgm=function(t,e){void 0===t&&(t=0),void 0===e&&(e=1),this._isMute||null!=this.bgm&&""!=this.bgm&&this.play(this.bgm,t,e)},e.prototype.stopBgm=function(){this.stop(this.bgm)},e.prototype.play=function(e,i,n){var o=this;void 0===i&&(i=1),void 0===n&&(n=1);var s=e+"_mp3";if(!this._isMute)if(null!=this.sounds[e]){var a=this.sounds[e].play(0,i);this.soundsChannel[e]=a,a.volume=n}else t.ResManager.instance.loadRes(s,function(t,s){var a=t,r=a.play(0,i);r.volume=n,o.sounds[e]=a,o.soundsChannel[e]=r},this)},e.prototype.stop=function(t){null!=this.soundsChannel[t]&&(this.soundsChannel[t].stop(),this.soundsChannel[t]=null)},e.prototype.stopAll=function(){for(var t in this.soundsChannel)this.stop(t)},e.prototype.getSound=function(t){return this.sounds[t]},e.prototype.getChannel=function(t){return this.soundsChannel[t]},e.prototype.init=function(e){e.addEventListener(egret.Event.ACTIVATE,function(){},this),e.addEventListener(egret.Event.DEACTIVATE,function(){t.AudioManager.Instance.stopAll()},this)},e._instance=new e,e}();t.AudioManager=e,__reflect(e.prototype,"ZJ.AudioManager")}(ZJ||(ZJ={}));var ZJ;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.cb=null,t.leftSecond=0,t.intervalID=0,t.isPause=!1,t.skinName="CountDownSkin",t}return __extends(i,e),i.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},i.prototype.start=function(t){var e=this;this.stop(),this.isPause=!1,this.leftSecond=t,this.count(),this.intervalID=setInterval(function(){e.count()},1e3)},i.prototype.pause=function(){this.isPause=!0},i.prototype.resume=function(){this.isPause=!1},i.prototype.stop=function(){clearInterval(this.intervalID)},i.prototype.setSecond=function(e){var i=Math.floor(e/60)%60,n=e%60,o=this.checkTime(i),s=this.checkTime(n);this.label.text=t.Util.strFormat("{0}:{1}",o,s)},i.prototype.count=function(){return this.setSecond(this.leftSecond),0==this.leftSecond?(this.stop(),void(null!=this.cb&&this.cb())):void(this.isPause||this.leftSecond--)},i.prototype.checkTime=function(t){return 10>t&&(t="0"+t),t},i.prototype.OnDestroy=function(){this.cb=null,this.stop()},i}(eui.Component);t.CountDown=e,__reflect(e.prototype,"ZJ.CountDown",["eui.UIComponent","egret.DisplayObject"])}(ZJ||(ZJ={}));var ZJ;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.INTERVAL=60,i.DISTANCE=20,i.pastTime=0,i.lastPos=new t.Vector3,i.nowPos=new t.Vector3,i.isBegin=!1,i.intervalID=0,i}return __extends(i,e),i.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},i.prototype.childrenCreated=function(){var t=this;e.prototype.childrenCreated.call(this),this.layer.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this),this.layer.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this),this.layer.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this),this.intervalID=setInterval(function(){t.onInterval()},this.INTERVAL)},i.prototype.onInterval=function(){if(this.isBegin){var e=this.nowPos.x-this.lastPos.x,i=this.nowPos.y-this.lastPos.y,n=Math.abs(e),o=Math.abs(i),s={};if(n>o?n>this.DISTANCE&&(e>0?s.direct=t.CommonConfig.RIGHT:s.direct=t.CommonConfig.LEFT,this.isBegin=!1):o>this.DISTANCE&&(i>0?s.direct=t.CommonConfig.DOWN:s.direct=t.CommonConfig.UP,this.isBegin=!1),!this.isBegin){var a=new egret.Event(t.CommonEventName.GESTURE_DIRECT);a.data=s,t.EventManager.instance.dispatchEvent(a)}this.lastPos.x=this.nowPos.x,this.lastPos.y=this.nowPos.y}},i.prototype.onTouchBegin=function(t){this.pastTime=0,this.nowPos.x=t.stageX,this.nowPos.y=t.stageY,this.lastPos.x=t.stageX,this.lastPos.y=t.stageY,this.isBegin=!0},i.prototype.onTouchEnd=function(t){this.isBegin=!1},i.prototype.onTouchMove=function(t){this.nowPos.x=t.stageX,this.nowPos.y=t.stageY},i.prototype.OnDestroy=function(){return clearInterval(this.intervalID),0},i}(t.ComponentBase);t.Gesture=e,__reflect(e.prototype,"ZJ.Gesture")}(ZJ||(ZJ={}));var ImgAnim=function(t){function e(e){var i=t.call(this)||this;return i.interval=0,i.loop=!0,i.index=0,i.imgArray=e,i.source=e[0],i}return __extends(e,t),e.prototype.play=function(){var t=this;this.id=setInterval(function(){t.index++,t.index>=t.imgArray.length&&(t.loop?t.index=0:t.stop()),t.source=t.imgArray[t.index]},this.interval,this)},e.prototype.replay=function(){this.index=0,clearInterval(this.id),this.play()},e.prototype.pause=function(){clearInterval(this.id)},e.prototype.stop=function(){this.index=0,clearInterval(this.id)},e}(eui.Image);__reflect(ImgAnim.prototype,"ImgAnim");var UILayer=function(){function t(){}return t.View=0,t.Pop=1,t.SDK=2,t}();__reflect(UILayer.prototype,"UILayer");var UIName=function(){function t(){}return t.Test="Test",t.Game="Game",t.Settle="Settle",t.Loading="Loading",t.TestOne="TestOne",t}();__reflect(UIName.prototype,"UIName");var ModuleConfig=function(){function t(){}return t.WIN_INDEX=31,t.uiLayers=[UILayer.View,UILayer.Pop,UILayer.SDK],t.uiDatas=(_a={},_a[UIName.Game]=new ZJ.UIData(UIName.Game,UILayer.View,GameView),_a[UIName.Settle]=new ZJ.UIData(UIName.Settle,UILayer.View,SettleView),_a[UIName.Loading]=new ZJ.UIData(UIName.Loading,UILayer.View,LoadingView),_a),t.compile={need_loading:!0,danji:!1,single_player:!0,isCompetition:!0,runtime:!1,channel_id:10},t.ip="dev-game.u17games.com",t.singlePort="12061",t.doublePort="12062",t.ws="ws",t.port="20301",t.protoFiles=["p10_proto","p11_proto"],t}();__reflect(ModuleConfig.prototype,"ModuleConfig");var EventName=function(){function t(){}return t.Test="Test",t.GAME_RESTART="GAME_RESTART",t.PLAYER_DIE="PLAYER_DIE",t.PLAYER_FUHUO="PLAYER_FUHUO",t.PLAYER_WIN="PLAYER_WIN",t.PLAYER_JUMP_END="PLAYER_JUMP_END",t}();__reflect(EventName.prototype,"EventName");var GoConfig=function(){function t(){}return t.Test="Test",t}();__reflect(GoConfig.prototype,"GoConfig");var _a,ModuleStartUp=function(){function t(){}return t.init=function(){return ZJ.SocketManager.instance.setCompany(1),ModuleConfig.compile.single_player&&(ModuleConfig.uiDatas[UIName.Settle].viewClass=SettleView),ZJ.UIManager.instance.openView(UIName.Game),0},t}();__reflect(ModuleStartUp.prototype,"ModuleStartUp");var ModuleUtil=function(){function t(){}return Object.defineProperty(t,"tables",{get:function(){return ZJ.TableManager.instance.tables},enumerable:!0,configurable:!0}),t.getProtoByID=function(t,e){var i="";if(e)switch(t){case 99999:i="ClientCmdData";break;case 1e3:i="CmdLoginGameReqMsg";break;case 1001:i="CmdPingReqMsg";break;case 1300:i="CmdJumperUploadAnswerReqMsg";break;case 1303:i="CmdJumperGameOverReqMsg"}else switch(t){case 99999:i="ServerCmdData";break;case 1e3:i="CmdLoginGameRspMsg";break;case 1001:i="CmdPingRspMsg";break;case 1300:i="CmdJumperUploadAnswerRspMsg";break;case 1303:i="CmdJumperGameOverRspMsg";break;case 1399:i="CmdBroadcastJumperBC"}var n=ZJ.SocketManager.instance.ProtoBufRoot,o=n.lookupType(i);return o},t}();__reflect(ModuleUtil.prototype,"ModuleUtil");var DebugPlatform=function(){function t(){}return t.prototype.getUserInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,{nickName:"username"}]})})},t.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t.prototype.share=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t}();__reflect(DebugPlatform.prototype,"DebugPlatform",["Platform"]),window.platform||(window.platform=new DebugPlatform);var ArrowHui=function(t){function e(){var e=t.call(this)||this;return e.skinName="ArrowHuiSkin",e}return __extends(e,t),e.prototype.childrenCreated=function(){},e}(eui.Component);__reflect(ArrowHui.prototype,"ArrowHui",["eui.UIComponent","egret.DisplayObject"]);var BarBlack=function(t){function e(){var e=t.call(this)||this;return e.skinName="BarBlackSkin",e}return __extends(e,t),e.prototype.childrenCreated=function(){},e}(eui.Component);__reflect(BarBlack.prototype,"BarBlack",["eui.UIComponent","egret.DisplayObject"]);var BarRed=function(t){function e(){var e=t.call(this)||this;return e.skinName="BarRedSkin",e}return __extends(e,t),e.prototype.childrenCreated=function(){},e}(eui.Component);__reflect(BarRed.prototype,"BarRed",["eui.UIComponent","egret.DisplayObject"]);var MyCountDown=function(t){function e(){var e=t.call(this)||this;return e.cb=null,e.leftSecond=0,e.intervalID=0,e.isPause=!1,e.skinName="MyCountDownSkin",e}return __extends(e,t),e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e.prototype.start=function(t){var e=this;this.stop(),this.isPause=!1,this.leftSecond=t,this.count(),this.intervalID=setInterval(function(){e.count()},1e3)},e.prototype.pause=function(){this.isPause=!0},e.prototype.resume=function(){this.isPause=!1},e.prototype.stop=function(){clearInterval(this.intervalID)},e.prototype.setSecond=function(t){var e=Math.floor(t/60)%60,i=t%60,n=this.checkTime(e),o=this.checkTime(i);this.label.text=ZJ.Util.strFormat("{0}:{1}",n,o)},e.prototype.count=function(){return this.setSecond(this.leftSecond),0==this.leftSecond?(this.stop(),void(null!=this.cb&&this.cb())):void(this.isPause||this.leftSecond--)},e.prototype.checkTime=function(t){return 10>t&&(t="0"+t),t},e.prototype.OnDestroy=function(){this.cb=null,this.stop()},e}(eui.Component);__reflect(MyCountDown.prototype,"MyCountDown",["eui.UIComponent","egret.DisplayObject"]);var NumCountDown=function(t){function e(){var e=t.call(this)||this;return e.cb=null,e.leftSecond=0,e.intervalID=0,e.isPause=!1,e.skinName="NumCountDownSkin",e}return __extends(e,t),e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e.prototype.start=function(t){var e=this;this.stop(),this.isPause=!1,this.leftSecond=t,this.count(),this.intervalID=setInterval(function(){e.count()},1e3)},e.prototype.pause=function(){this.isPause=!0},e.prototype.stop=function(){this.label.text="",clearInterval(this.intervalID)},e.prototype.count=function(){return this.label.text=this.leftSecond.toString(),0==this.leftSecond?(this.stop(),void(null!=this.cb&&this.cb())):void(this.isPause||this.leftSecond--)},e.prototype.OnDestroy=function(){this.cb=null,this.stop()},e}(eui.Component);__reflect(NumCountDown.prototype,"NumCountDown",["eui.UIComponent","egret.DisplayObject"]);var Plate=function(t){function e(){var e=t.call(this)||this;return e.id=0,e.skinName="PlateSkin",e}return __extends(e,t),e}(eui.Component);__reflect(Plate.prototype,"Plate",["eui.UIComponent","egret.DisplayObject"]);var Player=function(t){function e(){var e=t.call(this)||this;return e.G=8500,e.V0_X=400,e.V0_Y=-1800,e.PLAYER_SCALE_MIN=.5,e.PLAYER_TIME_MIN=1e3,e.PLAYER_FORCE_MAX=2.22,e.FLOOR_Y=1510,e.JUMP_WIDTH_FIX=10,e.JUMP_FIRM=.4,e.DROP_ROTATION_TIME=500,e.FUHUO_TIME=2e3,e.LUODI_SCALE=[.7,4.4],e.PLAYER_LUODI=400,e.img=null,e.gMC=null,e.gUp=null,e.beginX=0,e.beginY=0,e._isWin=!1,e.isPlayer1=!1,e.endX=0,e.endY=0,e.force=0,e.halfTime=0,e.rotateDirect=0,e.playerData=new PlayerData,e._curPlateIndex=0,e.intervalID=0,e.timeoutFuhuo=0,e.pastTime=0,e._isPlaying=!1,e._isGameOver=!1,e.time=0,e.isPlayingAnim=!1,e.imgScaleY=1,e._state=1,e._headName=["头落后_","头准备","头领先"],e.skinName="PlayerSkin",e}return __extends(e,t),e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},Object.defineProperty(e.prototype,"scoreX",{get:function(){return this.beginX},set:function(t){this.beginX=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scoreY",{get:function(){return this.beginY},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isWin",{get:function(){return this._isWin},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"curPlateIndex",{get:function(){return this._curPlateIndex},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isPlaying",{get:function(){return this._isPlaying},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isGameOver",{get:function(){return this._isGameOver},set:function(t){this._isGameOver=t},enumerable:!0,configurable:!0}),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.img.visible=!0,egret.startTick(this.onTick,this)},e.prototype.onTick=function(t){if(this.isPlaying&&!this.isGameOver){var e=t-this.time;this.pastTime+=e;var i=this.pastTime/1e3,n=this.V0_Y*this.force,o=this.V0_X*this.force,s=n*i+.5*this.G*i*i,a=o*i;if(this.y=Math.min(this.FLOOR_Y,this.beginY+s),this.x=this.beginX+a,0!=this.endX&&0!=this.endY){if(this.x>this.endX){if(this.y=this.endY,this.x=this.endX,0==this.rotateDirect&&(this.beginX=this.x,this.beginY=this.y,this.curPlateIndex==ModuleConfig.WIN_INDEX-1)){this._isWin=!0;var r=new egret.Event(EventName.PLAYER_WIN);this.dispatchEvent(r)}this.stopJump(),this.playLuodi()}}else this.y>=this.FLOOR_Y&&(0!=this.endX&&(this.x=Math.min(this.x,this.endX+100)),this.stopJump(),this.gameOver(),this.playGhostAnim())}return this.time=t,!0},e.prototype.resetPos=function(){clearTimeout(this.timeoutFuhuo),this._isWin=!1,this.isPlayingAnim=!1,this._isPlaying=!1,this.isGameOver=!1,this.gMC.rotation=0,this.gMC.y=this.height,this.gMC.alpha=1,this._state=0,this.stopJump(!1),this.stopDieAnim(),this.playBreath()},e.prototype.restart=function(){this.resetPos(),this._curPlateIndex=0},e.prototype.gameOver=function(){var t=this;this.isGameOver=!0,this.stopAnim(),this.timeoutFuhuo=setTimeout(function(){egret.Tween.removeTweens(t.gMC),t.resetPos(),t.x=t.beginX,t.y=t.beginY;var e=new egret.Event(EventName.PLAYER_FUHUO);t.dispatchEvent(e)},this.FUHUO_TIME)},e.prototype.stopJump=function(t){var e=this;if(void 0===t&&(t=!0),this.pastTime=0,this._isPlaying=!1,0!=this.rotateDirect){var i=0;1==this.rotateDirect?i=-90:2==this.rotateDirect&&(i=90),this.rotateDirect=0,this.gameOver(),egret.Tween.get(this.gMC).wait(100).to({rotation:i,y:this.gMC.globalToLocal(0,this.FLOOR_Y+.7*this.height).y},this.DROP_ROTATION_TIME).call(function(){e.playGhostAnim()},this)}else this.playBreath();if(t){var n=new egret.Event(EventName.PLAYER_JUMP_END);this.dispatchEvent(n)}},e.prototype.setData=function(t){this.playerData=t},e.prototype.jump=function(t,e,i){void 0===e&&(e=-1),void 0===i&&(i=-1),this.playJump(),this._isPlaying=!0,this.beginX=this.x,this.beginY=this.y,this.endX=0,this.endY=0,this.force=.1+(1-t)/(1-this.PLAYER_SCALE_MIN)*this.PLAYER_FORCE_MAX;var n=this.V0_Y*this.force,o=this.V0_X*this.force;this.halfTime=-2*n/this.G*.5;for(var s=2*this.halfTime,a=this.playerData.plates.length,r=this._curPlateIndex;a>r;++r){for(var h=this.playerData.plates[r].y,c=ZJ.MathUtil.YiYuanErCi(.5*this.G,n,this.beginY+this.height-h),u=!1,l=0;l<c.length;++l)if(c[l]>this.halfTime){var p=this.beginX+o*c[l];if(p>this.playerData.plates[r].x-this.width+this.JUMP_WIDTH_FIX&&p<this.playerData.plates[r].x+this.playerData.plates[r].width-this.JUMP_WIDTH_FIX){p<this.playerData.plates[r].x-(1-this.JUMP_FIRM)*this.width+this.JUMP_WIDTH_FIX?this.rotateDirect=1:p>this.playerData.plates[r].x+this.playerData.plates[r].width-this.JUMP_FIRM*this.width-this.JUMP_WIDTH_FIX?this.rotateDirect=2:this._curPlateIndex=r,this.endX=Math.floor(p),this.endY=Math.floor(h-this.height),s=c[l],u=!0;break}}if(u)break}var d=this.endY;if(0==this.endX)for(var h=this.FLOOR_Y,c=ZJ.MathUtil.YiYuanErCi(.5*this.G,n,this.beginY+this.height-h),u=!1,l=0;l<c.length;++l)if(c[l]>this.halfTime){var p=this.beginX+o*c[l];this.endX=Math.floor(p);break}-1!=e&&(this.endX=e),-1!=i&&(this.endY=i);var g={endX:this.endX,endY:d,bgTime:s,V0_X:o,V0_Y:n};return g},e.prototype.playAnim=function(){this.isPlayingAnim||this._isWin||(this.isPlayingAnim=!0,this.isPlayer1&&ZJ.AudioManager.Instance.play("xuli",0),this.playYasuo(),this.playXuli())},e.prototype.stopAnim=function(){this.isPlayer1&&ZJ.AudioManager.Instance.stop("xuli");var t=this.dbScaler.scaleY;return egret.Tween.removeTweens(this.dbScaler),this.dbScaler.scaleY=1,this.stopXuli(),this.isPlayingAnim=!1,this.imgScaleY=t,t},e.prototype.playYasuo=function(){egret.Tween.get(this.dbScaler,{loop:!0}).to({scaleY:this.PLAYER_SCALE_MIN},this.PLAYER_TIME_MIN).to({scaleY:1},this.PLAYER_TIME_MIN),this.db.animation.fadeIn(this.getAniNameByState("xuli")).timeScale=1250/this.PLAYER_TIME_MIN},e.prototype.onDestroy=function(){egret.stopTick(this.onTick,this)},e.prototype.playXuli=function(){var t=this;null==this.xuliTw?ZJ.ResManager.instance.loadMovieClip("xuli","xuli",function(e){t.xuliTw=e,t.xuliTw.x=t.width/2,t.xuliTw.y=t.height,t.addChild(t.xuliTw),t.xuliTw.visible=!0,t.xuliTw.play(-1)}):(this.xuliTw.visible=!0,this.xuliTw.play(-1))},e.prototype.stopXuli=function(){null!=this.xuliTw&&(this.xuliTw.stop(),this.xuliTw.visible=!1)},e.prototype.playLuodi=function(){null==this.luodi&&(this.luodi=new eui.Image,this.luodi.source="luodi_png",this.luodi.width=202,this.luodi.height=22,this.luodi.anchorOffsetX=this.luodi.width/2,this.luodi.anchorOffsetY=this.luodi.height/2,this.luodi.x=this.width/2,this.luodi.y=this.height,this.addChildAt(this.luodi,0));var t=this.LUODI_SCALE[0],e=this.LUODI_SCALE[1];this.luodi.visible=!0,this.luodi.scaleX=t,this.luodi.scaleY=t,this.luodi.alpha=1;var i=t+(e-t)*(1-this.imgScaleY)/(1-this.PLAYER_SCALE_MIN);egret.Tween.get(this.luodi).to({scaleY:i,scaleX:i,alpha:0},this.PLAYER_LUODI,egret.Ease.sineOut),this.isWin?this.db.animation.fadeIn("shengli"):this.db.animation.fadeIn(this.getAniNameByState("luodi"),-1,1).timeScale=2.5,this.isPlayer1&&ZJ.AudioManager.Instance.stop("jump")},e.prototype.playGhostAnim=function(){null==this.ghost&&(this.ghost=new eui.Image,this.ghost.source="linghun_png",this.ghost.width=142,this.ghost.height=165,this.ghost.scaleX=1.5,this.ghost.scaleY=1.5,this.ghost.anchorOffsetX=this.ghost.width/2,this.ghost.anchorOffsetY=this.ghost.height/2,this.gUp.addChildAt(this.ghost,2)),null==this.qilang&&(this.qilang=new eui.Image,this.qilang.source="qilang_png",this.qilang.width=272,this.qilang.height=89,this.qilang.anchorOffsetX=this.qilang.width/2,this.qilang.anchorOffsetY=this.qilang.height/2,this.qilang.scaleX=1.5,this.qilang.scaleY=1.5,this.gUp.addChildAt(this.qilang,3)),this.ghost.x=this.gMC.x,this.ghost.y=this.gMC.y,this.qilang.x=this.gMC.x,this.qilang.y=this.gMC.y,this.ghost.visible=!0,this.qilang.visible=!0,this.ghost.alpha=1,egret.Tween.get(this.ghost).to({y:this.gMC.y-150,alpha:0},500,egret.Ease.sineIn),this.qilang.alpha=1,egret.Tween.get(this.qilang).to({alpha:0},200),this.db.animation.fadeIn("daku"),this.isPlayer1&&ZJ.AudioManager.Instance.play("tiaodaoci")},e.prototype.stopDieAnim=function(){this.ghost&&(this.ghost.visible=!1),this.qilang&&(this.qilang.visible=!1)},e.prototype.initDB=function(t){var e=this,i="",n="";1==t?(i="bao1",n="bao1"):(i="bao2",n="bao2"),this.db=ZJ.ResManager.instance.loadDragonBones(i,n),this.gMC.addChild(this.db),this.db.addEventListener(dragonBones.FrameEvent.FRAME_EVENT,function(t){switch(t.frameLabel){case"luodi_end":e.playBreath()}},this)},e.prototype.playBreath=function(){if(null!=this.db){var t=this.getAniNameByState("stand");this.db.animation.fadeIn(t)}},e.prototype.playJump=function(){null!=this.db&&this.db.animation.fadeIn(this.getAniNameByState("jumppose"))},e.prototype.updateDB=function(t){t!=this._state&&(this._state=t,this.isGameOver||this.updateDBInternal())},e.prototype.updateDBInternal=function(){if(this.db.animation.lastAnimationState){var t=this.db.animation.lastAnimationName.split("_")[0];this.db.animation.gotoAndPlayByTime(this.getAniNameByState(t),this.db.animation.lastAnimationState.currentTime)}},e.prototype.getAniNameByState=function(t){var e="";switch(this._state){case 2:e="_lingxian";break;case 0:e="_luohou"}return t+e},e}(eui.Component);__reflect(Player.prototype,"Player",["eui.UIComponent","egret.DisplayObject"]);var QiuB=function(t){function e(){var e=t.call(this)||this;return e.skinName="QiuBSkin",e}return __extends(e,t),e.prototype.childrenCreated=function(){},e}(eui.Component);__reflect(QiuB.prototype,"QiuB",["eui.UIComponent","egret.DisplayObject"]);var QiuS=function(t){function e(){var e=t.call(this)||this;return e.skinName="QiuSSkin",e}return __extends(e,t),e.prototype.childrenCreated=function(){},e}(eui.Component);__reflect(QiuS.prototype,"QiuS",["eui.UIComponent","egret.DisplayObject"]);var ReadyGo=function(t){function e(){var e=t.call(this)||this;return e.READY_TIME=2e3,e.GO_TIME=500,e.cb=null,e.skinName="ReadyGoSkin",e}return __extends(e,t),e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e.prototype.start=function(){var t=this;this.stop(),egret.Tween.get(this.ready).to({alpha:1,scaleX:1,scaleY:1},400).wait(500).to({alpha:0},500).call(function(){egret.Tween.get(t.go).to({alpha:1,scaleX:1,scaleY:1},200).wait(300).to({alpha:0},300).call(function(){null!=t.cb&&t.cb()},t)},this)},e.prototype.stop=function(){egret.Tween.removeTweens(this.ready),egret.Tween.removeTweens(this.go),this.ready.alpha=0,this.ready.scaleX=.8,this.ready.scaleY=.8,this.go.alpha=0,this.go.scaleX=2,this.go.scaleY=2},e.prototype.OnDestroy=function(){this.cb=null,this.stop()},e}(eui.Component);__reflect(ReadyGo.prototype,"ReadyGo",["eui.UIComponent","egret.DisplayObject"]);var testbtn=function(t){function e(){var e=t.call(this)||this;return e.skinName="testbtnSkin",e}return __extends(e,t),e}(ZJ.ComponentBase);__reflect(testbtn.prototype,"testbtn");var YuanJiao=function(t){function e(){var e=t.call(this)||this;return e.id=0,e.skinName="YuanJiaoSkin",e}return __extends(e,t),e}(eui.Component);__reflect(YuanJiao.prototype,"YuanJiao",["eui.UIComponent","egret.DisplayObject"]);var MyCDM=function(t){function e(){var e=t.call(this)||this;if(e.isReconnect=!1,"50"==chushouGameConfig.launchMode)e.gameStyle=5,e.DoCompetitionAuthRequest();else if("60"==chushouGameConfig.launchMode){e.gameStyle=6;var i=new egret.HttpRequest;i.responseType=egret.HttpResponseType.TEXT,i.open("http://dev-game.u17games.com:12025/getreplaydomain",egret.HttpMethod.GET),i.send(),i.addEventListener(egret.Event.COMPLETE,e.getConnectData,e)}return e}return __extends(e,t),Object.defineProperty(e,"instance",{get:function(){return this._instance||(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.prototype.DoCompetitionAuthRequest=function(){var t=this;ChushouSDK.instance.csAuthRequest(function(e){var i=new egret.HttpRequest;
i.responseType=egret.HttpResponseType.TEXT;var n="http://dev-game.u17games.com:12025/getdomain?open_id="+ChushouSDK.instance.csAuthRequestData.openUid;i.open(n,egret.HttpMethod.GET),i.send(),i.addEventListener(egret.Event.COMPLETE,t.getConnectData,t),t.CsAuthRequestCallBack()})},e.prototype.ConnectLANServerForCompetition=function(){this.gameStyle=5;var t=new egret.HttpRequest;t.responseType=egret.HttpResponseType.TEXT,t.open("http://192.168.1.194:12010/getdomain?open_id=1",egret.HttpMethod.GET),t.send(),t.addEventListener(egret.Event.COMPLETE,this.getConnectData,this)},e.prototype.ConnectLANServerForReplay=function(){this.gameStyle=6;var t=new egret.HttpRequest;t.responseType=egret.HttpResponseType.TEXT,t.open("http://192.168.1.194:12010/getreplaydomain",egret.HttpMethod.GET),t.send(),t.addEventListener(egret.Event.COMPLETE,this.getConnectData,this)},e.prototype.getConnectData=function(t){var e=t.currentTarget,i=JSON.parse(e.response);this.connectUrl=(1==i.type?"ws":"wss")+"://"+i.domain+":"+i.port,ZJ.SocketManager.instance.connectByUrl(this.connectUrl)},e.prototype.extendOnData=function(t,e){switch(t){case 10002:1==e.result||3==e.result?ChushouSDK.instance.csExitGame():(0==e.result&&(this.myReconnectTicket=e.ticket),this.doAction(this.OnData10002,e))}},e.prototype.reconnect10002=function(){egret.log("do Reconnect"),ZJ.SocketManager.instance.connectByUrl(this.connectUrl),this.isReconnect=!0},e}(ChushouDataModel);__reflect(MyCDM.prototype,"MyCDM");var PlayerData=function(){function t(){this.plates=[]}return t}();__reflect(PlayerData.prototype,"PlayerData");var SettleData=function(){function t(){this.score=0}return t}();__reflect(SettleData.prototype,"SettleData");var ZJ;!function(t){var e=function(t){function e(e,i,n,o){var s=t.call(this,e,i,n,o)||this;return s.data=null,s}return __extends(e,t),e}(egret.Event);t.ChannelDataEvent=e,__reflect(e.prototype,"ZJ.ChannelDataEvent")}(ZJ||(ZJ={}));var ZJ;!function(t){var e=function(){function t(){}return t.FRAME=30,t.UP=0,t.DOWN=1,t.LEFT=2,t.RIGHT=3,t}();t.CommonConfig=e,__reflect(e.prototype,"ZJ.CommonConfig");var i=function(){function t(){}return t.TABLE_LOADED="TABLE_LOADED",t.SOCKET_CONNECTED="SOCKET_CONNECTED",t.SOCKET_DATA="SOCKET_DATA",t.GESTURE_DIRECT="GESTURE_DIRECT",t.CHANNEL_DATA="CHANNEL_DATA",t}();t.CommonEventName=i,__reflect(i.prototype,"ZJ.CommonEventName")}(ZJ||(ZJ={}));var Main=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this),egret.lifecycle.addLifecycleListener(function(t){}),egret.lifecycle.onPause=function(){egret.ticker.pause()},egret.lifecycle.onResume=function(){egret.ticker.resume()},egret.registerImplementation("eui.IAssetAdapter",new AssetAdapter),egret.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),this.runGame()["catch"](function(t){console.log(t)})},e.prototype.runGame=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){switch(e.label){case 0:return[4,this.createGameScene()];case 1:return e.sent(),[4,platform.login()];case 2:return e.sent(),[4,platform.getUserInfo()];case 3:return t=e.sent(),console.log(t),[2]}})})},e.prototype.createGameScene=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){switch(e.label){case 0:return egret.ImageLoader.crossOrigin="anonymous",ZJ.AudioManager.Instance.init(this.stage),[4,ZJ.ResManager.instance.init(this.stage)];case 1:return e.sent(),[4,ZJ.ResManager.instance.loadGroup("realpreload")];case 2:return e.sent(),ZJ.UIManager.instance.init(this),ZJ.UIManager.instance.uiLayers=ModuleConfig.uiLayers,ZJ.UIManager.instance.uiDatas=ModuleConfig.uiDatas,t=this.GetLoadingView(),[4,ZJ.ResManager.instance.loadGroup("preload",0,t)];case 3:return e.sent(),ZJ.TableManager.instance.init(),ZJ.SocketManager.instance.init(),ModuleStartUp.init(),[2]}})})},e.prototype.GetLoadingView=function(){var t=null,e=null;return ModuleConfig.compile.need_loading&&(e=ModuleConfig.compile.danji?LoadingView:ChushouLoadingView),null!=e&&(ModuleConfig.uiDatas[UIName.Loading].viewClass=e,t=ZJ.UIManager.instance.openView(UIName.Loading)),t},e.prototype.onEnterFrame=function(){},e}(eui.UILayer);__reflect(Main.prototype,"Main");var TestView=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),ZJ.UIManager.instance.destroyView(UIName.Loading),this.initChushouTest()},e.prototype.initFeibiao=function(){new eui.Image},e.prototype.initHitTest=function(){var t=this,e=new eui.Button;this.addChild(e),e.x=0,e.y=100;var i=new eui.Button;this.addChild(i),i.x=20,i.y=100,setTimeout(function(){console.log(t.myHitTest(e,i))},1e3)},e.prototype.myHitTest=function(t,e){var i=t.getBounds(),n=e.getBounds();return i.x=t.x,i.y=t.y,n.x=e.x,n.y=e.y,i.intersects(n)},e.prototype.onSocketConnected=function(){console.log("onSocketConnected")},e.prototype.onSocketData=function(t){console.log("onSocketData")},e.prototype.initChushouTest=function(){for(var t=100,e=200,i=600,n=250,o=3,s=["csAuthRequest","csJoinRoom","csQuitRoom","csInviteToGame","csKickOutUser","csShareRoom","csShareRecord","csGetFriendList","csGetUserRelationship","csFollowUser","csEnableMic","csEnableAudioOutput","onUserVolumeUpdate","csExitGame","onNetworkStatusChange","csGetAPIVersionInfo","cs_10000","cs_10001","无视，进入游戏"],a=[this.csAuthRequest,this.csJoinRoom,this.csQuitRoom,this.csInviteToGame,this.csKickOutUser,this.csShareRoom,this.csShareRecord,this.csGetFriendList,this.csGetUserRelationship,this.csFollowUser,this.csEnableMic,this.csEnableAudioOutput,this.onUserVolumeUpdate,this.csExitGame,this.onNetworkStatusChange,this.csGetAPIVersionInfo,this.cs_10000,this.cs_10001,this.enterGame],r=0,h=s.length;h>r;++r){var c=this.getChushouBtn();c.x=t+r%o*i,c.y=e+Math.floor(r/o)*n,c.label=s[r],c.addEventListener(egret.TouchEvent.TOUCH_TAP,a[r],this)}},e.prototype.getChushouBtn=function(){var t=new eui.Button;return this.addChild(t),t.width=400,t.height=150,t.labelDisplay.size=40,t},e.prototype.csAuthRequest=function(){console.log("csAuthRequest"),csAuthRequest('{"h5AppName" : "五⼦棋","launchMode" : "10","inviteMode" : "10","gameRoomId" : "1084"}',function(t){console.log("cb csAuthRequest")})},e.prototype.csJoinRoom=function(){console.log("csJoinRoom"),csJoinRoom('{"accessToken" : "89d57e62acg45b33","gameRoomId" : "1084","role" : "0"}',function(t){console.log("cb csJoinRoom")})},e.prototype.csQuitRoom=function(){console.log("csQuitRoom"),csQuitRoom('{"accessToken" : "89d57e62acg45b33","gameRoomId" : "1084"}',function(t){console.log("cb csQuitRoom")})},e.prototype.csInviteToGame=function(){console.log("csInviteToGame"),csInviteToGame('{"accessToken" : "89d57e62acg45b33","gameRoomId" : "1084","inviteMode" : "10","title" : "触⼿五⼦棋","description" : "我正在触⼿玩五⼦棋，快来围观吧","image" : "/9j/4RMQRXhpZgAATU0AKgAAA"}',function(t){console.log("cb csInviteToGame")})},e.prototype.csKickOutUser=function(){console.log("csKickOutUser"),csKickOutUser('{"accessToken" : "89d57e62acg45b33","targetUid" : "sl23859","gameRoomId" : "1084"}',function(t){console.log("cb csKickOutUser")})},e.prototype.csShareRoom=function(){console.log("csShareRoom"),csShareRoom('{"accessToken" : "89d57e62acg45b33","gameRoomId" : "1084","title" : "触⼿五⼦棋","description" : "我正在触⼿玩五⼦棋，快来围观吧","image" : "/9j/4RMQRXhpZgAATU0AKgAAA"}',function(t){console.log("cb csShareRoom")})},e.prototype.csShareRecord=function(){console.log("csShareRecord"),csShareRecord('{"accessToken" : "89d57e62acg45b33","gameRecordId" : "119844","title" : "触⼿五⼦棋","description" : "我在触⼿五⼦棋获得了最强王者称号","image" : "/9j/4RMQRXhpZgAATU0AKgAAA"}',function(t){console.log("cb csShareRecord")})},e.prototype.csGetFriendList=function(){console.log("csGetFriendList"),csGetFriendList('{"accessToken" : "89d57e62acg45b33","numPerPage" : "10","breakpoint" : "18823-ffgh-cc08"}',function(t){console.log("cb csGetFriendList")})},e.prototype.csGetUserRelationship=function(){console.log("csGetUserRelationship"),csGetUserRelationship('{"accessToken" : "89d57e62acg45b33","users" : "10785,491721"}',function(t){console.log("cb csGetUserRelationship")})},e.prototype.csFollowUser=function(){console.log("csFollowUser"),csFollowUser('{"accessToken" : "89d57e62acg45b33","targetUid" : "sl10785"}',function(t){console.log("cb csFollowUser")})},e.prototype.csEnableMic=function(){console.log("csEnableMic"),csEnableMic('{"accessToken" : "89d57e62acg45b33","enableMic" : "1"}',function(t){console.log("cb csEnableMic")})},e.prototype.csEnableAudioOutput=function(){console.log("csEnableAudioOutput"),csEnableAudioOutput('{"accessToken" : "89d57e62acg45b33","enableAudioOutput" : "1"}',function(t){console.log("cb csEnableAudioOutput")})},e.prototype.onUserVolumeUpdate=function(){console.log("onUserVolumeUpdate"),onUserVolumeUpdate(function(t){console.log("cb onUserVolumeUpdate")})},e.prototype.csExitGame=function(){console.log("csExitGame"),csExitGame('{"accessToken" : "89d57e62acg45b33"}')},e.prototype.onNetworkStatusChange=function(){console.log("onNetworkStatusChange"),onNetworkStatusChange(function(t){console.log("cb onNetworkStatusChange")})},e.prototype.csGetAPIVersionInfo=function(){console.log("csGetAPIVersionInfo"),csGetAPIVersionInfo('{"h5AppName" : "五⼦棋","launchMode" : "10","inviteMode" : "10","gameRoomId" : "1084"}',function(t){console.log("cb csGetAPIVersionInfo")})},e.prototype.cs_10000=function(){console.log("cs_10000"),ZJ.SocketManager.instance.send(1e4,{openId:"2333",sign:"sign",timestamp:ZJ.Util.timeStamp(),appId:1234,params:"params"})},e.prototype.cs_10001=function(){console.log("cs_10001"),ZJ.SocketManager.instance.send(10001,{gameMode:1,matchType:1,matchId:3})},e.prototype.enterGame=function(){ZJ.UIManager.instance.openView(UIName.Game),ZJ.UIManager.instance.destroyView(UIName.Test)},e.prototype.onDestroy=function(){return t.prototype.onDestroy.call(this),0},e}(ZJ.ViewBase);__reflect(TestView.prototype,"TestView");var AliLoadingView=function(t){function e(){var e=t.call(this)||this;return e.intervalID=0,e.ran1=0,e.ran2=0,e.SEND_PROGRESS=6,e.progressIndex=0,e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this);var e=ZJ.ShapeUtil.getRect(0,1,this.stage.stageWidth,this.stage.stageHeight);this.addChild(e);var i=500,n=new eui.ProgressBar;n.skinName="YYLoadingPBSkin",this.progress=n,this.progress.width=450,this.progress.height=62,this.progress.minimum=0,this.progress.maximum=100,this.progress.horizontalCenter=0,this.progress.y=i+435,this.progress.scaleX=1.3,this.progress.scaleY=1.3,this.progress.labelFunction=function(t,e){return t+"%"},this.addChild(this.progress);var o=new eui.Image;o.source="load_img03_png",o.horizontalCenter=0,o.y=i+630,o.width=510,o.height=100,o.alpha=.2,this.addChild(o),this.load3=new eui.Label,this.load3.text="等待对手加入游戏...",this.load3.horizontalCenter=0,this.load3.y=i+660,this.load3.size=40,this.load3.textColor=16777215,this.addChild(this.load3),this.startCount(),ZJ.SocketManager.instance.connectByUrlAli({ip:ModuleConfig.ip,port:ModuleConfig.port})},e.prototype.startCount=function(){var t=this;this.intervalID=setInterval(function(){t.ran2=Math.min(t.ran2+8*Math.random()+2,99),t.progress.value=Math.floor((t.ran1+t.ran2)/2)},200)},e.prototype.onProgress=function(t,e){this.ran1=Math.floor(t/e*100);var i=Math.floor(t/e*100);100==i?ALISDK.CatcherSDK.instance().updateProgress(ALISDK.CatcherSDK.ProgressState.COMPLETED,i):(this.progressIndex==this.SEND_PROGRESS-1&&ALISDK.CatcherSDK.instance().updateProgress(ALISDK.CatcherSDK.ProgressState.PROGRESSING,i),this.progressIndex=++this.progressIndex%this.SEND_PROGRESS)},e.prototype.onDestroy=function(){return t.prototype.onDestroy.call(this),0},e}(ZJ.ViewBase);__reflect(AliLoadingView.prototype,"AliLoadingView");var ZJ;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),Object.defineProperty(e,"instance",{get:function(){return this._instance},enumerable:!0,configurable:!0}),e.prototype.init=function(){return 0},e._instance=new e,e}(egret.EventDispatcher);t.EventManager=e,__reflect(e.prototype,"ZJ.EventManager")}(ZJ||(ZJ={}));var ChushouLoadingView=function(t){function e(){var e=t.call(this)||this;return e.intervalID=0,e.ran1=0,e.ran2=0,e.SEND_PROGRESS=10,e.progressIndex=0,e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this);var e=ZJ.ShapeUtil.getRect(0,1,this.stage.stageWidth,this.stage.stageHeight);this.addChild(e)},e.prototype.startCount=function(){var t=this;this.intervalID=setInterval(function(){t.ran2=Math.min(t.ran2+8*Math.random()+2,99),t.progress.value=Math.floor((t.ran1+t.ran2)/2)},200)},e.prototype.onProgress=function(t,e){this.progressIndex==this.SEND_PROGRESS-1&&ChushouSDK.instance.csNotifyLoadProgress(t/e*100),this.progressIndex=++this.progressIndex%this.SEND_PROGRESS},e.prototype.onDestroy=function(){return t.prototype.onDestroy.call(this),0},e}(ZJ.ViewBase);__reflect(ChushouLoadingView.prototype,"ChushouLoadingView");var ChushouSDK=function(){function t(){this.gameRoomId="",this.role="",this.h5AppName="hsdailyshot",this.title="分享标题",this.image="/resource/assets/egret_icon.png",this.description="分享描述",this.enableMic="1",this.enableAudioOutput="1",this.csAuthRequestData=null}return Object.defineProperty(t,"instance",{get:function(){return this._instance||(this._instance=new t),this._instance},enumerable:!0,configurable:!0}),t.prototype.csAuthRequest=function(t){var e=this;this.log("csAuthRequest"),csAuthRequest('{"h5AppName" : "'+this.h5AppName+'","launchMode" : "'+chushouGameConfig.launchMode+'","inviteMode" : "'+chushouGameConfig.inviteMode+'","gameRoomId" : "'+chushouGameConfig.gameRoomId+'"}',function(i){e.log("cb csAuthRequest"),e.log(i);var n=JSON.parse(i);e.csAuthRequestData=n,t&&t(n)})},t.prototype.csJoinRoom=function(t){var e=this;this.log("csJoinRoom "+this.gameRoomId),csJoinRoom('{"accessToken" : "'+this.csAuthRequestData.accessToken+'","gameRoomId" : "'+this.gameRoomId+'","role" : "'+this.csAuthRequestData.role+'"}',function(i){e.log("cb csJoinRoom"),e.log(i.toString()),t&&t(JSON.parse(i))})},t.prototype.csQuitRoom=function(t){var e=this;this.log("csQuitRoom"),csQuitRoom('{"accessToken" : "'+this.csAuthRequestData.accessToken+'","gameRoomId" : "'+this.gameRoomId+'"}',function(i){e.log("cb csQuitRoom"),t&&t(JSON.parse(i))})},t.prototype.csInviteToGame=function(t){var e=this;this.log("csInviteToGame"),csInviteToGame('{"accessToken" : "'+this.csAuthRequestData.accessToken+'","gameRoomId" : "'+this.gameRoomId+'","inviteMode" : "'+chushouGameConfig.inviteMode+'","title" : "'+this.title+'","description" : "'+this.description+'","image" : "'+this.image+'"}',function(i){e.log("cb csInviteToGame"),t&&t(JSON.parse(i))})},t.prototype.csKickOutUser=function(t){var e=this;this.log("csKickOutUser"),csKickOutUser('{"accessToken" : "'+this.csAuthRequestData.accessToken+'","targetUid" : "sl23859","gameRoomId" : "'+this.gameRoomId+'"}',function(i){e.log("cb csKickOutUser"),t&&t(JSON.parse(i))})},t.prototype.csShareRoom=function(t){var e=this;this.log("csShareRoom"),csShareRoom('{"accessToken" : "'+this.csAuthRequestData.accessToken+'","gameRoomId" : "'+this.gameRoomId+'","title" : "'+this.title+'","description" : "'+this.description+'","image" : "'+this.image+'"}',function(i){e.log("cb csShareRoom"),t&&t(JSON.parse(i))})},t.prototype.csShareRecord=function(t){var e=this;this.log("csShareRecord"),csShareRecord('{"accessToken" : "'+this.csAuthRequestData.accessToken+'","gameRecordId" : "119844","title" : "'+this.title+'","description" : "'+this.description+'","image" : "'+this.image+'"}',function(i){e.log("cb csShareRecord"),t&&t(JSON.parse(i))})},t.prototype.csGetFriendList=function(t){var e=this;this.log("csGetFriendList"),csGetFriendList('{"accessToken" : "'+this.csAuthRequestData.accessToken+'","numPerPage" : "10","breakpoint" : "18823-ffgh-cc08"}',function(i){e.log("cb csGetFriendList"),t&&t(JSON.parse(i))})},t.prototype.csGetUserRelationship=function(t,e){for(var i=this,n="",o=0;o<t.length;o++)n+=t[o],o!=t.length-1&&(n+=",");this.log("csGetUserRelationship"),csGetUserRelationship('{"accessToken" : "'+this.csAuthRequestData.accessToken+'","users" : "'+n+'"}',function(t){i.log("cb csGetUserRelationship"),e&&e(JSON.parse(t))})},t.prototype.csFollowUser=function(t,e){var i=this;this.log("csFollowUser"),csFollowUser('{"accessToken" : "'+this.csAuthRequestData.accessToken+'","targetUid" : "'+t+'"}',function(t){i.log("cb csFollowUser"),e&&e(JSON.parse(t))})},t.prototype.csEnableMic=function(t){var e=this;this.log("csEnableMic"),csEnableMic('{"accessToken" : "'+this.csAuthRequestData.accessToken+'","enableMic" : '+this.enableMic+"}",function(i){e.log("cb csEnableMic"),t&&t(JSON.parse(i))})},t.prototype.csEnableAudioOutput=function(t){var e=this;this.log("csEnableAudioOutput"),csEnableAudioOutput('{"accessToken" : "'+this.csAuthRequestData.accessToken+'","enableAudioOutput" : "'+this.enableAudioOutput+'"}',function(i){e.log("cb csEnableAudioOutput"),t&&t(JSON.parse(i))})},t.prototype.onUserVolumeUpdate=function(t){var e=this;this.log("onUserVolumeUpdate"),onUserVolumeUpdate(function(i){e.log("cb onUserVolumeUpdate"),t&&t(JSON.parse(i))})},t.prototype.csExitGame=function(t){this.log("csExitGame "+this.csAuthRequestData.accessToken),this.csQuitRoom(),csExitGame('{"accessToken" : "'+this.csAuthRequestData.accessToken+'"}')},t.prototype.csNotifyLoadProgress=function(t,e){this.log("csNotifyLoadProgress");var i=typeof csNotifyLoadProgress;"function"==i?(console.log("haha doprogress"),csNotifyLoadProgress('{"total" : "100","progress" : "'+t+'"}'),console.log("haha progress done")):console.log("haha protected")},t.prototype.onNetworkStatusChange=function(t){var e=this;this.log("onNetworkStatusChange"),onNetworkStatusChange(function(i){e.log("cb onNetworkStatusChange"),t&&t(JSON.parse(i))})},t.prototype.csGetAPIVersionInfo=function(t){var e=this;this.log("csGetAPIVersionInfo"),csGetAPIVersionInfo('{"h5AppName" : "'+this.h5AppName+'","launchMode" : "'+chushouGameConfig.launchMode+'","inviteMode" : "'+chushouGameConfig.inviteMode+'","gameRoomId" : "'+this.gameRoomId+'"}',function(i){e.log("cb csGetAPIVersionInfo"),t&&t(JSON.parse(i))})},t.prototype.csInvokeRecharge=function(t,e){var i=this;this.log("csInvokeRecharge"),csInvokeRecharge('{"accessToken" : "'+this.csAuthRequestData.accessToken+'","paymentScene" : "'+t+'"}',function(t){i.log("cb csInvokeRecharge"),e&&e(JSON.parse(t))})},t.prototype.onBalanceChanged=function(t){this.log("onBalanceChanged")},t.prototype.csPurchaseProps=function(t){var e=this;this.log("csPurchaseProps"),csPurchaseProps('{"accessToken" : "'+this.csAuthRequestData.accessToken+'","cpOrderId" : "prop7865421","cpPropName" : "双倍积分卡","cpPropId" : "1","payAmount" : "500"}',function(i){e.log("cb csPurchaseProps"),t&&t(JSON.parse(i))})},t.prototype.csPayEntryFee=function(t,e,i,n){var o=this;this.log("csPayEntryFee"),csPayEntryFee('{"accessToken" : "'+this.csAuthRequestData.accessToken+'","cpOrderId" : "'+t+'","cpPropName" : "'+i+'","cpPropId" : "'+e+'"}',function(t){o.log("cb csPayEntryFee"),n&&n(JSON.parse(t))})},t.prototype.csCheckEntryFee=function(t){var e=this;this.log("csCheckEntryFee"),csCheckEntryFee('{"accessToken" : "'+this.csAuthRequestData.accessToken+'"}',function(i){e.log("cb csCheckEntryFee"),t&&t(JSON.parse(i))})},t.prototype.csRecordReport=function(t,e){this.log("csRecordReport"),csRecordReport('{"accessToken" : "'+this.csAuthRequestData.accessToken+'","openUid" : "'+this.csAuthRequestData.openUid+'","gameResult" : "'+t+'" , "gameRecordId" : "'+chushouGameConfig.gameRecordId+'"}')},t.prototype.log=function(t){console.log(t)},t}();__reflect(ChushouSDK.prototype,"ChushouSDK");var YYLoadingView=function(t){function e(){var e=t.call(this)||this;return e.intervalID=0,e.ran1=0,e.ran2=0,e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this);var e=ZJ.ShapeUtil.getRect(0,1,this.stage.stageWidth,this.stage.stageHeight);this.addChild(e);var i=new eui.Image;i.source="loading_bg_png",i.height=1920,i.percentWidth=100,this.addChild(i),i.horizontalCenter=0;var n=500,o=new eui.Group;this.addChild(o),o.horizontalCenter=0,o.y=n,ZJ.ResManager.instance.loadMovieClip("yylangren","yylangren",function(t){o.addChild(t),t.scaleX=1.5,t.scaleY=1.5,t.x=-195,t.gotoAndPlay("tiao",-1)});var s=new eui.ProgressBar;s.skinName="YYLoadingPBSkin",this.progress=s,this.progress.width=450,this.progress.height=62,this.progress.minimum=0,this.progress.maximum=100,this.progress.horizontalCenter=0,this.progress.y=n+435,this.progress.scaleX=1.3,this.progress.scaleY=1.3,this.progress.labelFunction=function(t,e){return t+"%"},this.addChild(this.progress);var a=new eui.Image;a.source="load_img03_png",a.horizontalCenter=0,a.y=n+630,a.width=510,a.height=100,a.alpha=.2,this.addChild(a),this.load3=new eui.Label,this.load3.text="等待对手加入游戏...",this.load3.horizontalCenter=0,this.load3.y=n+660,this.load3.size=40,this.load3.textColor=16777215,this.addChild(this.load3),this.startCount()},e.prototype.startCount=function(){var t=this;this.intervalID=setInterval(function(){t.ran2=Math.min(t.ran2+8*Math.random()+2,99),t.progress.value=Math.floor((t.ran1+t.ran2)/2)},200)},e.prototype.onProgress=function(t,e){this.ran1=Math.floor(t/e*100),this.progress.value=Math.floor((this.ran1+this.ran2)/2)},e.prototype.onDestroy=function(){return t.prototype.onDestroy.call(this),clearInterval(this.intervalID),0},e}(ZJ.ViewBase);__reflect(YYLoadingView.prototype,"YYLoadingView");var xlsx;!function(t){t.cfg_c_ydpz="shared/c_ydpz.json",t.c_ydpz_id="A",t.c_ydpz_distance="B",t.c_ydpz_time="C",t.c_ydpz_count_down="D"}(xlsx||(xlsx={}));